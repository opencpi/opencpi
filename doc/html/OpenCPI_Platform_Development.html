<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN" "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><!--This file was converted to xhtml by LibreOffice - see http://cgit.freedesktop.org/libreoffice/core/tree/filter/source/xslt for the code.--><head profile="http://dublincore.org/documents/dcmi-terms/"><meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8"/><title xml:lang="en-US">OCPI_ODT</title><meta name="DCTERMS.title" content="OCPI_ODT" xml:lang="en-US"/><meta name="DCTERMS.language" content="en-US" scheme="DCTERMS.RFC4646"/><meta name="DCTERMS.source" content="http://xml.openoffice.org/odf2xhtml"/><meta name="DCTERMS.creator" content="James Kulp"/><meta name="DCTERMS.issued" content="2014-12-13T12:37:04.602691000" scheme="DCTERMS.W3CDTF"/><meta name="DCTERMS.contributor" content="James Kulp"/><meta name="DCTERMS.modified" content="2018-08-29T09:40:57.028401671" scheme="DCTERMS.W3CDTF"/><meta name="DCTERMS.provenance" content="" xml:lang="en-US"/><meta name="DCTERMS.subject" content="," xml:lang="en-US"/><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" hreflang="en"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" hreflang="en"/><link rel="schema.DCTYPE" href="http://purl.org/dc/dcmitype/" hreflang="en"/><link rel="schema.DCAM" href="http://purl.org/dc/dcam/" hreflang="en"/><style type="text/css">
    @page {  }
    table { border-collapse:collapse; border-spacing:0; empty-cells:show }
    td, th { vertical-align:top; font-size:12pt;}
    h1, h2, h3, h4, h5, h6 { clear:both;}
    ol, ul { margin:0; padding:0;}
    li { list-style: none; margin:0; padding:0;}
    /* "li span.odfLiEnd" - IE 7 issue*/
    li span. { clear: both; line-height:0; width:0; height:0; margin:0; padding:0; }
    span.footnodeNumber { padding-right:1em; }
    span.annotation_style_by_filter { font-size:95%; font-family:Arial; background-color:#fff000;  margin:0; border:0; padding:0;  }
    span.heading_numbering { margin-right: 0.8rem; }* { margin:0;}
    .Body { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .Code { font-size:11pt; margin-bottom:0in; margin-top:0.0417in; text-align:left ! important; font-family:Courier New; writing-mode:lr-tb; margin-left:0.25in; margin-right:0in; text-indent:0in; font-weight:bold; }
    .Contents_20_1 { font-size:12pt; margin-bottom:0in; margin-top:0.0835in; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; font-weight:bold; }
    .Contents_20_2 { font-size:11pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; margin-left:0.1665in; margin-right:0in; text-indent:0in; font-weight:bold; }
    .Contents_20_3 { font-size:11pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; margin-left:0.3335in; margin-right:0in; text-indent:0in; }
    .Contents_20_4 { font-size:10pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; margin-left:0.5in; margin-right:0in; text-indent:0in; }
    .Contents_20_5 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; margin-left:0.6665in; margin-right:0in; text-indent:0in; }
    .Contents_20_6 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; margin-left:0.8335in; margin-right:0in; text-indent:0in; }
    .Contents_20_7 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; margin-left:1in; margin-right:0in; text-indent:0in; }
    .Contents_20_8 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; margin-left:1.1665in; margin-right:0in; text-indent:0in; }
    .Contents_20_9 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; margin-left:1.3335in; margin-right:0in; text-indent:0in; }
    .Contents_20_Heading { font-size:12pt; margin-bottom:0.0835in; margin-top:0.1665in; text-align:center ! important; font-family:Liberation Sans; writing-mode:lr-tb; font-weight:bold; }
    .Footer { font-size:12pt; margin-bottom:0in; margin-top:0.0555in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .Heading_20_1 { font-size:14pt; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; font-weight:bold; }
    .Heading_20_2 { font-size:12pt; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; font-style:italic; font-weight:bold; }
    .Heading_20_3 { font-size:12pt; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; font-style:italic; }
    .Heading_20_4 { font-size:12pt; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; font-style:italic; }
    .IndentHang { font-size:12pt; font-style:normal; margin-bottom:0.0598in; margin-left:0.6252in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.3752in; font-family:Arial; writing-mode:lr-tb; }
    .List_20_Bullet { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; margin-left:0.4in; margin-right:0in; text-indent:-0.2in; }
    .List_20_Number { font-size:12pt; margin-bottom:0.05in; margin-top:0.05in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; margin-left:0.4in; margin-right:0.4in; text-indent:-0.2in; }
    .Numbering_20_1 { font-size:12pt; line-height:120%; margin-bottom:0.0972in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P1 { font-size:12pt; margin-bottom:0.0417in; margin-top:0.0417in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; }
    .P10 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P100 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P101 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P102 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; font-weight:normal; }
    .P103 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P104 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P105 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P106 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P107 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P108 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P109 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P11 { font-size:10pt; margin-bottom:0.05in; margin-top:0.05in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P110 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P111 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P112 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P113 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P114 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P115 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P116 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P117 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P118 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P119 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P12 { font-size:12pt; margin-bottom:0.05in; margin-top:0.05in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P120 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P121 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P122 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P123 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P124 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P125 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P126 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P127 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P128 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P129 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P13 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P130 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P131 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P132 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P133 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P134 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P135 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P136 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P137 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P138 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P139 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P14 { font-size:10pt; margin-bottom:0.05in; margin-top:0.05in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P140 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P141 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P142 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P143 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P144 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P145 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P146 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P147 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P148 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P149 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P15 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P150 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P151 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P152 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P153 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P154 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P155 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P156 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P157 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P158 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P159 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P16 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P160 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P161 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P162 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P163 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P164 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P165 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P166 { font-size:12pt; margin-bottom:0.05in; margin-top:0.05in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P167 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P168 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P169 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P17 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P170 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P171 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P172 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
    .P174 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P175 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P176 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P177 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P178 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P179 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P180 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P181 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P182 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P183 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P184 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P185 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P186 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P187 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P188 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P189 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P190 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P191 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P192 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P193 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P194 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P195 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P196 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P197 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P198 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P199 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P2 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P200 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P201 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P202 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P203 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P204 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P205 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P206 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P207 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P208 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P209 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P21 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P210 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P211 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P212 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P213 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P214 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P215 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P216 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P217 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P218 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P219 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P22 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P220 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P221 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P222 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P223 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P224 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P225 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P226 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P227 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P228 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P229 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P23 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P230 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P231 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P232 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P233 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P234 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P235 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P236 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P237 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P238 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P239 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P24 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P240 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P241 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P242 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P243 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P244 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P245 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P246 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P247 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P248 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P249 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P25 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P250 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P251 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; color:#000000; }
    .P252 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P253 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P254 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P255 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P256 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P257 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P258 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P259 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P26 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P260 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P261 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P262 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P263 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P264 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P265 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P266 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P267 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P268 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P269 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P27 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P270 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P271 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P272 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P273 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P274 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P275 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P276 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P277 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P278 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P279 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P28 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P280 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P281 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P282 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P283 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P284 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P285 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P286 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P287 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P288 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P289 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P29 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P290 { font-size:9pt; line-height:120%; margin-bottom:0.0972in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P291 { font-size:9pt; line-height:120%; margin-bottom:0.0972in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P292 { font-size:9pt; line-height:120%; margin-bottom:0.0972in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; font-weight:bold; }
    .P293 { font-size:12pt; line-height:120%; margin-bottom:0.0972in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P295 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
    .P296 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
    .P297 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
    .P298 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
    .P299 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
    .P3 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P30 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P300 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
    .P301 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; text-decoration:none ! important; }
    .P302 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
    .P303 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
    .P304 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
    .P305 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
    .P306 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
    .P307 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
    .P308 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
    .P309 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
    .P31 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P310 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
    .P311 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
    .P312 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
    .P313 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
    .P314 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
    .P315 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
    .P316 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
    .P317 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
    .P318 { font-size:11pt; margin-bottom:0.0201in; margin-top:0.0201in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P319 { font-size:11pt; margin-bottom:0.0201in; margin-top:0.0201in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P32 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P320 { font-size:11pt; margin-bottom:0.0201in; margin-top:0.0201in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P321 { font-size:11pt; margin-bottom:0.0201in; margin-top:0.0201in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P322 { font-size:11pt; margin-bottom:0.0201in; margin-top:0.0201in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P323 { font-size:11pt; margin-bottom:0.0201in; margin-top:0.0201in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P324 { font-size:11pt; margin-bottom:0.0201in; margin-top:0.0201in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P325 { font-size:11pt; margin-bottom:0.0201in; margin-top:0.0201in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P326 { font-size:11pt; margin-bottom:0.0201in; margin-top:0.0201in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P327 { font-size:11pt; margin-bottom:0.0201in; margin-top:0.0201in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P328 { font-size:11pt; margin-bottom:0.0201in; margin-top:0.0201in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P329 { font-size:11pt; margin-bottom:0.0201in; margin-top:0.0201in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P33 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P330 { font-size:11pt; margin-bottom:0.0201in; margin-top:0.0201in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P331 { font-size:11pt; margin-bottom:0.0201in; margin-top:0.0201in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P332 { font-size:11pt; margin-bottom:0.0201in; margin-top:0.0201in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P333 { font-size:11pt; margin-bottom:0.0201in; margin-top:0.0201in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P334 { font-size:11pt; margin-bottom:0.0201in; margin-top:0.0201in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P335 { font-size:11pt; margin-bottom:0.0201in; margin-top:0.0201in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P336 { font-size:11pt; margin-bottom:0.0201in; margin-top:0.0201in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P337 { font-size:11pt; margin-bottom:0.0201in; margin-top:0.0201in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P338 { font-size:12pt; font-style:normal; margin-bottom:0.0598in; margin-left:0.6252in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.3752in; font-family:Arial; writing-mode:lr-tb; }
    .P339 { font-size:12pt; font-style:normal; margin-bottom:0.0598in; margin-left:0.6252in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.3752in; font-family:Arial; writing-mode:lr-tb; }
    .P34 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P340 { font-size:12pt; font-style:normal; margin-bottom:0.0598in; margin-left:0.6252in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.3752in; font-family:Arial; writing-mode:lr-tb; }
    .P341 { font-size:12pt; font-style:normal; margin-bottom:0.0598in; margin-left:0.6252in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.3752in; font-family:Arial; writing-mode:lr-tb; }
    .P342 { font-size:12pt; font-style:normal; margin-bottom:0.0598in; margin-left:0.6252in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.3752in; font-family:Arial; writing-mode:lr-tb; }
    .P343 { font-size:12pt; font-style:normal; margin-bottom:0.0598in; margin-left:0.6252in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.3752in; font-family:Arial; writing-mode:lr-tb; }
    .P344 { font-size:7pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P345 { font-size:7pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P346 { font-size:7pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P347 { font-size:7pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P348 { font-size:7pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P349 { font-size:7pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P35 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P350 { font-size:7pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P351 { font-size:7pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P352 { font-size:7pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P353 { font-size:7pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P354 { font-size:7pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P355 { font-size:12pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P356 { font-size:12pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P357 { font-size:12pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P358 { font-size:12pt; margin-bottom:0in; margin-top:0in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; font-style:italic; }
    .P359 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P36 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P360 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; }
    .P361 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; }
    .P362 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P363 { font-size:12pt; margin-bottom:0.1665in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P364 { font-size:12pt; margin-bottom:0.1665in; margin-top:0.0555in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P365 { font-size:12pt; font-weight:bold; margin-bottom:0in; margin-top:0.0835in; text-align:center ! important; font-family:Calibri; writing-mode:lr-tb; }
    .P366 { font-size:11pt; font-weight:bold; margin-bottom:0.0201in; margin-top:0.0201in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P367 { font-size:11pt; font-weight:bold; margin-bottom:0.0201in; margin-top:0.0201in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P368 { font-size:11pt; font-weight:bold; margin-bottom:0.0201in; margin-top:0.0201in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; }
    .P369 { font-size:11pt; font-weight:bold; margin-bottom:0.0201in; margin-top:0.0201in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P37 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P370 { font-size:11pt; font-weight:bold; margin-bottom:0.0201in; margin-top:0.0201in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; }
    .P371 { font-size:12pt; font-weight:bold; margin-bottom:0.0201in; margin-top:0.0201in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; }
    .P372 { font-size:12pt; font-style:normal; margin-bottom:0.0598in; margin-left:0in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:0in; font-family:Arial; writing-mode:lr-tb; }
    .P373_borderStart { border-style:none; font-size:12pt; font-style:italic; margin-top:0.1in; padding:0in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; padding-bottom:0.15in;  border-bottom-style:none; }
    .P373 { border-style:none; font-size:12pt; font-style:italic; padding:0in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; padding-bottom:0.15in; padding-top:0.1in;  border-top-style:none; border-bottom-style:none; }
    .P373_borderEnd { border-style:none; font-size:12pt; font-style:italic; margin-bottom:0.15in; padding:0in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; padding-top:0.1in;  border-top-style:none;}
    .P374_borderStart { font-size:11pt; font-weight:bold; margin-left:0.25in; margin-right:-0.75in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; background-color:transparent; padding-bottom:0in;  border-bottom-style:none; }
    .P374 { font-size:11pt; font-weight:bold; margin-left:0.25in; margin-right:-0.75in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; background-color:transparent; padding-bottom:0in; padding-top:0.0417in;  border-top-style:none; border-bottom-style:none; }
    .P374_borderEnd { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:-0.75in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; background-color:transparent; padding-top:0.0417in;  border-top-style:none;}
    .P375_borderStart { font-size:11pt; font-weight:bold; margin-left:0.25in; margin-right:-0.75in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; background-color:transparent; padding-bottom:0in;  border-bottom-style:none; }
    .P375 { font-size:11pt; font-weight:bold; margin-left:0.25in; margin-right:-0.75in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; background-color:transparent; padding-bottom:0in; padding-top:0.0417in;  border-top-style:none; border-bottom-style:none; }
    .P375_borderEnd { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:-0.75in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; background-color:transparent; padding-top:0.0417in;  border-top-style:none;}
    .P376 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P377 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P378 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P379 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P38 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P380 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P381 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P382 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P383 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P384 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P385 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P386 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P387 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P388 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P389 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P39 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P390 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P391 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P392 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P393 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P394 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P395 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P396 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P397 { font-size:11pt; margin-bottom:0in; margin-left:0.3335in; margin-right:0in; margin-top:0in; text-align:left ! important; text-indent:0in; font-family:Calibri; writing-mode:lr-tb; }
    .P398 { font-size:12pt; margin-bottom:0.05in; margin-left:0.4in; margin-right:0.4in; margin-top:0.05in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P399 { font-size:12pt; margin-bottom:0.05in; margin-left:0.4in; margin-right:0.4in; margin-top:0.05in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P4 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P40 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P400 { font-size:12pt; margin-bottom:0.05in; margin-left:0.4in; margin-right:0.4in; margin-top:0.05in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P401 { font-size:12pt; margin-bottom:0.05in; margin-left:0.4in; margin-right:0.4in; margin-top:0.05in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P402 { font-size:12pt; margin-bottom:0.05in; margin-left:0.4in; margin-right:0.4in; margin-top:0.05in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P403 { font-size:12pt; margin-bottom:0.05in; margin-left:0.4in; margin-right:0.4in; margin-top:0.05in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P404 { font-size:12pt; margin-bottom:0.05in; margin-left:0.4in; margin-right:0.4in; margin-top:0.05in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P405 { font-size:12pt; margin-bottom:0.05in; margin-left:0.4in; margin-right:0.4in; margin-top:0.05in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P406 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P407 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P408 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P409 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P41 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P410 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P411 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P412 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P413 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P414 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P415 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P416 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P417 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P418 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P419 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P42 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P420 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P421 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P422 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P423 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P424 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P425 { font-size:12pt; font-style:italic; font-weight:bold; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P426 { font-size:12pt; font-style:italic; font-weight:bold; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P427 { font-size:12pt; font-style:italic; font-weight:bold; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P428 { font-size:12pt; font-style:italic; font-weight:bold; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P429 { font-size:12pt; font-style:italic; font-weight:bold; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P43 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P430 { font-size:12pt; font-style:italic; font-weight:bold; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P432 { font-size:14pt; font-weight:bold; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P433 { font-size:14pt; font-weight:bold; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P435 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P436 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P437 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P438 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P439 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P44 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P440 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P441 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P442 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P443 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P444 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P445 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P446 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P447 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P448 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P449 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P45 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P450 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P451 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P452 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P453 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P454 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P455 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P456 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P457 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P458 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P459 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P46 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P460 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P461 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P462 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P463 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P464 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P465 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P466 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P467 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P468 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P469 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P47 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P470 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
    .P471 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; font-weight:normal; }
    .P473 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; font-weight:normal; }
    .P474 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.1665in; margin-right:0in; margin-top:0in; text-align:left ! important; text-indent:0in; font-family:Calibri; writing-mode:lr-tb; }
    .P475 { font-size:12pt; font-weight:bold; margin-bottom:0in; margin-top:0.0835in; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; }
    .P478 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P48 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P486 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; }
    .P49 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P5 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P50 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P51 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P52 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P53 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P54 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P55 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P56 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P57 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P58 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P59 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P6 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P60 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P61 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P62 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P63 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P64 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P65 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P66 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P67 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P68 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P69 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P7 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; font-weight:normal; }
    .P70 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P71 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P72 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P73 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P74 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P75 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P76 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P77 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P78 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P79 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P8 { font-size:10pt; font-weight:bold; margin-bottom:0.05in; margin-left:0.25in; margin-right:0in; margin-top:0.05in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
    .P80 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P81 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P82 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P83 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P84 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P85 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P86 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P87 { font-size:14pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; }
    .P88 { font-size:14pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P89 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; color:#ff0000; font-weight:bold; }
    .P9 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P90 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; color:#ff0000; font-weight:bold; }
    .P91 { font-size:22pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; color:#ff0000; font-style:italic; font-weight:bold; }
    .P92 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P93 { font-size:8pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; font-weight:bold; }
    .P94 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P95 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P96 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P97 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P98 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .P99 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
    .Standard { font-size:12pt; font-family:Arial; writing-mode:lr-tb; margin-top:0.0799in; margin-bottom:0.0598in; text-align:left ! important; }
    .Table_20_Caption_20__28_before_29__borderStart { border-style:none; font-size:12pt; font-style:italic; margin-top:0.1in; padding:0in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; padding-bottom:0.15in;  border-bottom-style:none; }
    .Table_20_Caption_20__28_before_29_ { border-style:none; font-size:12pt; font-style:italic; padding:0in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; padding-bottom:0.15in; padding-top:0.1in;  border-top-style:none; border-bottom-style:none; }
    .Table_20_Caption_20__28_before_29__borderEnd { border-style:none; font-size:12pt; font-style:italic; margin-bottom:0.15in; padding:0in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; padding-top:0.1in;  border-top-style:none;}
    .Table_20_Heading { font-size:12pt; margin-bottom:0.0201in; margin-top:0.0201in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; font-weight:bold; }
    .Table1 { width:6.5in; margin-left:0in; margin-top:0in; margin-bottom:0in; margin-right:auto;writing-mode:lr-tb; }
    .Table2 { width:6.5in; margin-left:0in; margin-top:0in; margin-bottom:0in; margin-right:auto;writing-mode:lr-tb; }
    .Table3 { width:6.4597in; margin-left:0px; margin-right:auto;writing-mode:lr-tb; }
    .Table4 { width:6.5in; float:none; writing-mode:lr-tb; }
    .Table6 { width:6.5in; float:none; writing-mode:lr-tb; }
    .Table1_A1 { padding-left:0.0833in; padding-right:0.0799in; padding-top:0in; padding-bottom:0in; border-width:0.0176cm; border-style:solid; border-color:#00000a; }
    .Table1_A4 { padding-left:0.0833in; padding-right:0.0799in; padding-top:0in; padding-bottom:0in; border-left-width:0.0176cm; border-left-style:solid; border-left-color:#00000a; border-right-width:0.0176cm; border-right-style:solid; border-right-color:#00000a; border-top-style:none; border-bottom-width:0.0176cm; border-bottom-style:solid; border-bottom-color:#00000a; }
    .Table2_A1 { vertical-align:middle; padding-left:0.0833in; padding-right:0.0799in; padding-top:0in; padding-bottom:0in; border-width:0.0176cm; border-style:solid; border-color:#00000a; }
    .Table2_A3 { vertical-align:middle; padding-left:0.0833in; padding-right:0.0799in; padding-top:0in; padding-bottom:0in; border-left-width:0.0176cm; border-left-style:solid; border-left-color:#00000a; border-right-width:0.0176cm; border-right-style:solid; border-right-color:#00000a; border-top-style:none; border-bottom-width:0.0176cm; border-bottom-style:solid; border-bottom-color:#00000a; }
    .Table3_A1 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-width:thin; border-top-style:solid; border-top-color:#000000; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
    .Table3_A2 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-style:none; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
    .Table3_E1 { padding:0.0382in; border-width:thin; border-style:solid; border-color:#000000; }
    .Table3_E2 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-width:thin; border-right-style:solid; border-right-color:#000000; border-top-style:none; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
    .Table4_A1 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-width:thin; border-top-style:solid; border-top-color:#000000; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
    .Table4_A2 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-style:none; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
    .Table4_D1 { padding:0.0382in; border-width:thin; border-style:solid; border-color:#000000; }
    .Table4_D2 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-width:thin; border-right-style:solid; border-right-color:#000000; border-top-style:none; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
    .Table6_A1 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-width:thin; border-top-style:solid; border-top-color:#000000; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
    .Table6_A2 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-style:none; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
    .Table6_D1 { padding:0.0382in; border-width:thin; border-style:solid; border-color:#000000; }
    .Table6_D2 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-width:thin; border-right-style:solid; border-right-color:#000000; border-top-style:none; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
    .Table1_A { width:0.7326in; }
    .Table1_B { width:4.9583in; }
    .Table1_C { width:0.809in; }
    .Table2_A { width:2.1861in; }
    .Table2_B { width:0.9958in; }
    .Table2_C { width:3.3181in; }
    .Table3_A { width:0.8083in; }
    .Table3_B { width:1.1264in; }
    .Table3_C { width:1.1271in; }
    .Table3_D { width:1.4076in; }
    .Table3_E { width:1.9903in; }
    .Table4_A { width:0.8729in; }
    .Table4_B { width:0.691in; }
    .Table4_C { width:1.2451in; }
    .Table4_D { width:3.691in; }
    .Table6_A { width:1in; }
    .Table6_B { width:0.691in; }
    .Table6_C { width:0.9361in; }
    .Table6_D { width:3.8729in; }
    .Code { font-family:Courier New; font-size:12pt; font-weight:bold; background-color:transparent; }
    .Default_20_Paragraph_20_Font { font-family:Arial; font-size:12pt; }
    .FirstEmphasis { font-family:Arial; font-size:12pt; font-style:italic; font-weight:bold; }
    .Internet_20_link { font-size:12pt; font-family:Arial; color:#0000ff; text-decoration:underline; }
    .T100 { font-size:11pt; }
    .T101 { font-size:11pt; font-style:italic; }
    .T130 { text-decoration:none ! important; }
    .T131 { text-decoration:none ! important; }
    .T132 { text-decoration:none ! important; }
    .T133 { text-decoration:none ! important; }
    .T134 { text-decoration:none ! important; }
    .T135 { text-decoration:none ! important; }
    .T136 { text-decoration:none ! important; }
    .T137 { text-decoration:none ! important; }
    .T138 { text-decoration:none ! important; }
    .T139 { text-decoration:none ! important; }
    .T143 { font-family:Courier New; font-size:12pt; font-weight:bold; background-color:transparent; }
    .T144 { font-family:Courier New; font-weight:bold; }
    .T145 { font-family:Courier New; font-size:11pt; font-weight:bold; }
    .T146 { font-family:Courier New; font-size:11pt; font-weight:bold; }
    .T180 { font-style:normal; font-weight:normal; }
    .T181 { font-style:normal; font-weight:normal; }
    .T182 { font-style:normal; font-weight:normal; }
    .T183 { font-style:normal; font-weight:normal; }
    .T184 { font-style:normal; font-weight:normal; }
    .T185 { font-style:normal; font-weight:normal; }
    .T186 { font-style:normal; font-weight:normal; }
    .T187 { font-style:normal; font-weight:normal; }
    .T188 { font-style:normal; }
    .T189 { font-style:normal; }
    .T190 { font-style:normal; }
    .T191 { font-weight:normal; }
    .T198 { color:#000000; }
    .T199 { color:#000000; }
    .T2 { font-size:11pt; }
    .T202 { font-weight:bold; }
    .T203 { font-weight:bold; }
    .T204 { font-weight:bold; }
    .T205 { font-weight:bold; }
    .T206 { font-size:28pt; font-weight:bold; }
    .T207 { font-size:28pt; font-weight:bold; }
    .T208 { font-size:7pt; }
    .T209 { font-size:7pt; }
    .T210 { font-size:7pt; }
    .T22 { font-style:italic; }
    .T23 { font-style:italic; }
    .T24 { font-style:italic; }
    .T25 { font-style:italic; }
    .T26 { font-style:italic; }
    .T27 { font-style:italic; }
    .T28 { font-style:italic; }
    .T29 { font-style:italic; }
    .T30 { font-style:italic; }
    .T31 { font-style:italic; }
    .T32 { font-style:italic; }
    .T33 { font-style:italic; }
    .T34 { font-style:italic; }
    .T35 { font-style:italic; }
    .T358 { font-family:Courier New; }
    .T359 { font-family:Courier New; }
    .T36 { font-style:italic; }
    .T37 { font-style:italic; }
    .T38 { font-style:italic; }
    .T39 { font-style:italic; }
    .T40 { font-style:italic; }
    .T41 { font-style:italic; }
    .T42 { font-style:italic; }
    .T43 { font-style:italic; }
    .T44 { font-style:italic; }
    .T45 { font-style:italic; }
    .T46 { font-style:italic; }
    .T462 { vertical-align:super; font-size:58%;}
    .T47 { font-style:italic; }
    .T48 { font-style:italic; }
    .T484 { font-family:Courier New; }
    .T49 { font-style:italic; }
    .T5 { font-style:italic; }
    .T50 { font-style:italic; }
    .T51 { font-style:italic; }
    .T52 { font-style:italic; }
    .T53 { font-style:italic; }
    .T54 { font-style:italic; }
    .T55 { font-style:italic; }
    .T56 { font-style:italic; }
    .T57 { font-style:italic; }
    .T58 { font-style:italic; }
    .T59 { font-style:italic; }
    .T60 { font-style:italic; }
    .T61 { font-style:italic; font-weight:bold; }
    .T62 { font-style:italic; font-weight:bold; }
    .T63 { font-style:italic; font-weight:bold; }
    .T64 { font-style:italic; font-weight:bold; }
    .T65 { font-style:italic; text-decoration:none ! important; }
    .T66 { font-style:italic; text-decoration:none ! important; }
    .T67 { font-style:italic; text-decoration:none ! important; }
    .T68 { font-style:italic; font-weight:normal; }
    .T69 { font-style:italic; font-weight:normal; }
    .T70 { font-style:italic; text-decoration:underline; font-weight:bold; }
    .T71 { font-style:italic; text-decoration:underline; }
    .T83 { font-size:11pt; }
    .T84 { font-size:11pt; }
    .T85 { font-size:11pt; }
    .T86 { font-size:11pt; }
    .T87 { font-size:11pt; }
    .T88 { font-size:11pt; }
    .T89 { font-size:11pt; }
    .T90 { font-size:11pt; }
    .T91 { font-size:11pt; }
    .T92 { font-size:11pt; }
    .T93 { font-size:11pt; }
    .T94 { font-size:11pt; }
    .T95 { font-size:11pt; }
    .T96 { font-size:11pt; }
    .T97 { font-size:11pt; }
    .T98 { font-size:11pt; }
    /* ODF styles with no properties representable as CSS */
    .Sect1 .Table1.1 .Table1.11 .Table1.2 .Table2.1 .Footnote_20_Symbol .Index_20_Link .ListLabel_20_1 .Numbering_20_Symbols .T1 .T10 .T102 .T103 .T104 .T105 .T106 .T107 .T108 .T109 .T11 .T110 .T111 .T112 .T113 .T114 .T115 .T116 .T117 .T118 .T119 .T12 .T120 .T121 .T122 .T123 .T124 .T125 .T126 .T127 .T128 .T129 .T13 .T14 .T140 .T141 .T142 .T147 .T148 .T149 .T15 .T150 .T151 .T152 .T153 .T154 .T155 .T156 .T157 .T158 .T159 .T16 .T160 .T161 .T162 .T163 .T164 .T165 .T166 .T167 .T168 .T169 .T170 .T171 .T172 .T173 .T174 .T175 .T176 .T177 .T178 .T179 .T192 .T193 .T194 .T195 .T196 .T197 .T20 .T200 .T201 .T211 .T212 .T213 .T214 .T215 .T216 .T217 .T218 .T219 .T220 .T221 .T222 .T223 .T224 .T225 .T226 .T227 .T228 .T229 .T230 .T231 .T232 .T233 .T234 .T235 .T236 .T237 .T238 .T239 .T240 .T241 .T242 .T243 .T244 .T245 .T246 .T247 .T248 .T249 .T250 .T251 .T252 .T253 .T254 .T255 .T256 .T257 .T258 .T259 .T260 .T261 .T262 .T263 .T264 .T265 .T266 .T267 .T268 .T269 .T270 .T271 .T272 .T273 .T274 .T275 .T276 .T277 .T278 .T279 .T280 .T281 .T282 .T283 .T284 .T285 .T286 .T287 .T288 .T289 .T290 .T291 .T292 .T293 .T294 .T295 .T296 .T297 .T298 .T299 .T3 .T300 .T301 .T302 .T303 .T304 .T305 .T306 .T307 .T308 .T309 .T310 .T311 .T312 .T313 .T314 .T315 .T316 .T317 .T318 .T319 .T320 .T321 .T322 .T323 .T324 .T325 .T326 .T327 .T328 .T329 .T330 .T331 .T332 .T333 .T334 .T335 .T336 .T337 .T338 .T339 .T340 .T341 .T342 .T343 .T344 .T345 .T346 .T347 .T348 .T349 .T350 .T351 .T352 .T353 .T354 .T355 .T356 .T357 .T360 .T361 .T362 .T363 .T364 .T365 .T366 .T367 .T368 .T369 .T370 .T371 .T372 .T373 .T374 .T375 .T376 .T377 .T378 .T379 .T380 .T381 .T382 .T383 .T384 .T385 .T386 .T387 .T388 .T389 .T390 .T391 .T392 .T393 .T394 .T395 .T396 .T397 .T398 .T399 .T400 .T401 .T402 .T403 .T404 .T405 .T406 .T407 .T408 .T409 .T410 .T411 .T412 .T413 .T414 .T415 .T416 .T417 .T418 .T419 .T420 .T421 .T422 .T423 .T424 .T425 .T426 .T427 .T428 .T429 .T430 .T431 .T432 .T433 .T434 .T435 .T436 .T437 .T438 .T439 .T440 .T441 .T442 .T443 .T444 .T445 .T446 .T447 .T448 .T449 .T450 .T451 .T452 .T453 .T454 .T455 .T456 .T457 .T458 .T459 .T460 .T461 .T463 .T464 .T465 .T466 .T467 .T468 .T469 .T470 .T471 .T472 .T473 .T474 .T475 .T476 .T477 .T478 .T479 .T480 .T481 .T482 .T483 .T485 .T486 .T487 .T488 .T489 .T490 .T491 .T492 .T493 .T494 .T495 .T496 .T497 .T498 .T499 .T500 .T501 .T502 .T503 .T504 .T505 .T506 .T507 .T508 .T509 .T510 .T511 .T512 .T6 .T7 .T79 .T8 .T82 .T9  { }
    </style></head><body dir="ltr" style="max-width:8.5in;margin-top:1in; margin-bottom:0.5in; margin-left:1in; margin-right:1in; "><p class="P486"><span class="T206">OpenCPI<br/></span><span class="T207">Platform Development<br/>Guide</span></p><p class="P87"></p><p class="P88"></p><p class="P92"></p><p class="P92"></p><p class="P92"></p><p class="P92"></p><p class="P91"></p><p class="P90"></p><p class="P90"></p><p class="P89"></p><p class="P89"></p><p class="P92"></p><p class="P92"></p><p class="P92"></p><p class="P92"></p><p class="P92"></p><p class="P92"></p><p class="P358">Revision History</p><table border="0" cellspacing="0" cellpadding="0" class="Table1"><colgroup><col width="81"/><col width="550"/><col width="90"/></colgroup><tr class="Table11"><td style="text-align:left;width:0.7326in; " class="Table1_A1"><p class="P93">Revision</p></td><td style="text-align:left;width:4.9583in; " class="Table1_A1"><p class="P93">Description of Change</p></td><td style="text-align:left;width:0.809in; " class="Table1_A1"><p class="P93">Date</p></td></tr><tr class="Table12"><td style="text-align:left;width:0.7326in; " class="Table1_A1"><p class="P344">0.01</p></td><td style="text-align:left;width:4.9583in; " class="Table1_A1"><p class="P357"><span class="T209">I</span><span class="T208">nitial</span></p></td><td style="text-align:left;width:0.809in; " class="Table1_A1"><p class="P356"><span class="T208">201</span><span class="T209">4</span><span class="T208">-</span><span class="T209">12</span><span class="T208">-</span><span class="T209">1</span><span class="T210">5</span></p></td></tr><tr class="Table12"><td style="text-align:left;width:0.7326in; " class="Table1_A1"><p class="P345">0.5</p></td><td style="text-align:left;width:4.9583in; " class="Table1_A1"><p class="P345">Release partial draft</p></td><td style="text-align:left;width:0.809in; " class="Table1_A1"><p class="P345">2015-02-27</p></td></tr><tr class="Table12"><td style="text-align:left;width:0.7326in; " class="Table1_A4"><p class="P346">0.6</p></td><td style="text-align:left;width:4.9583in; " class="Table1_A4"><p class="P346">Add more general introduction to enabling systems for OpenCPI</p></td><td style="text-align:left;width:0.809in; " class="Table1_A4"><p class="P346">2015-04-23</p></td></tr><tr class="Table12"><td style="text-align:left;width:0.7326in; " class="Table1_A4"><p class="P347">0.7</p></td><td style="text-align:left;width:4.9583in; " class="Table1_A4"><p class="P347">Add content about device workers/subdevices/device proxies and endpoint proxies.</p></td><td style="text-align:left;width:0.809in; " class="Table1_A4"><p class="P347">2015-05-06</p></td></tr><tr class="Table12"><td style="text-align:left;width:0.7326in; " class="Table1_A4"><p class="P348">0.8</p></td><td style="text-align:left;width:4.9583in; " class="Table1_A4"><p class="P348">Add content about platforms and platform workers, apply review <span class="T287">comments for HDL devices</span></p></td><td style="text-align:left;width:0.809in; " class="Table1_A4"><p class="P349">2015-06-22</p></td></tr><tr class="Table12"><td style="text-align:left;width:0.7326in; " class="Table1_A4"><p class="P350">0.9</p></td><td style="text-align:left;width:4.9583in; " class="Table1_A4"><p class="P350">Add content about develop<span class="T288">ing HDL </span>platform support outside the core <span class="T288">directory </span>tree</p></td><td style="text-align:left;width:0.809in; " class="Table1_A4"><p class="P350">2015-08-28</p></td></tr><tr class="Table12"><td style="text-align:left;width:0.7326in; " class="Table1_A4"><p class="P351">1.0</p></td><td style="text-align:left;width:4.9583in; " class="Table1_A4"><p class="P351">Update for 2016Q2 release</p></td><td style="text-align:left;width:0.809in; " class="Table1_A4"><p class="P351">2016-05-23</p></td></tr><tr class="Table12"><td style="text-align:left;width:0.7326in; " class="Table1_A4"><p class="P352">1.1</p></td><td style="text-align:left;width:4.9583in; " class="Table1_A4"><p class="P352">Update for 2017Q1 release, <span class="T375">still requires diagrams and cpmaster and sdp protocols</span></p></td><td style="text-align:left;width:0.809in; " class="Table1_A4"><p class="P352">2017-03-03</p></td></tr><tr class="Table12"><td style="text-align:left;width:0.7326in; " class="Table1_A4"><p class="P353">1.2</p></td><td style="text-align:left;width:4.9583in; " class="Table1_A4"><p class="P353">Update for 2017Q2, <span class="T433">more detail and clarity on cards/slots/subdevices and many edits. No major new content.</span></p></td><td style="text-align:left;width:0.809in; " class="Table1_A4"><p class="P353">2017-06-15</p></td></tr><tr class="Table111"><td style="text-align:left;width:0.7326in; " class="Table1_A4"><p class="P354">1.3</p></td><td style="text-align:left;width:4.9583in; " class="Table1_A4"><p class="P354">Update software platform enablement</p></td><td style="text-align:left;width:0.809in; " class="Table1_A4"><p class="P354">2018-05-02</p></td></tr></table><p class="P355"></p><p class="P365">Table of Contents</p><table border="0" cellspacing="0" cellpadding="0" class="Sect1"><colgroup/><tr><td><p class="P475"><a href="#__RefHeading__1015_1060509377">1 Introduction</a></p></td></tr><tr><td><p class="P474"><a href="#__RefHeading__1017_1060509377">1.1 References</a></p></td></tr><tr><td><p class="P475"><a href="#__RefHeading__1019_1060509377">2 OpenCPI Systems and Platforms</a></p></td></tr><tr><td><p class="P474"><a href="#__RefHeading___Toc4319_234407367">2.1 Inside an OpenCPI Platform</a></p></td></tr><tr><td><p class="P474"><a href="#__RefHeading__1021_1060509377">2.2 Development and Execution</a></p></td></tr><tr><td><p class="P474"><a href="#__RefHeading___Toc4321_234407367">2.3 Enabling New Systems for OpenCPI</a></p></td></tr><tr><td><p class="P474"><a href="#__RefHeading___Toc4323_234407367">2.4 Process Template for Enabling OpenCPI on a New System</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading___Toc4325_234407367">2.4.1 System inventory</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading___Toc4327_234407367">2.4.2 Processor, interconnect and device assessment</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading___Toc4329_234407367">2.4.3 Assemble Technical Data Package</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading___Toc4331_234407367">2.4.4 Experiments to Establish Feasibility and Missing Information</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading___Toc4333_234407367">2.4.5 Planning and Specification</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading___Toc4335_234407367">2.4.6 Technical Development</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading___Toc4337_234407367">2.4.7 Verification</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading___Toc4339_234407367">2.4.8 Contribution</a></p></td></tr><tr><td><p class="P475"><a href="#__RefHeading__1023_1060509377">3 Enabling the Development Host</a></p></td></tr><tr><td><p class="P474"><a href="#__RefHeading__17646_2116501284">3.1 Operating System Installation</a></p></td></tr><tr><td><p class="P474"><a href="#__RefHeading__17648_2116501284">3.2 Development Tools Installation for the Development Host.</a></p></td></tr><tr><td><p class="P475"><a href="#__RefHeading__1025_1060509377">4 Enabling GPP Platforms</a></p></td></tr><tr><td><p class="P474"><a href="#__RefHeading__1027_1060509377">4.1 Enabling Development for New GPP Platforms</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading___Toc290926_943807761">4.1.1 The OpenCPI Build Process for Software Platforms</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading___Toc290928_943807761">4.1.2 Software Platform Files in the Platform's Directory</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading__17656_2116501284">4.1.3 Summary for Enabling Development for a New GPP Platform</a></p></td></tr><tr><td><p class="P474"><a href="#__RefHeading__1029_1060509377">4.2 Enabling Execution for GPP Platforms</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading___Toc38776_1517956095">4.2.1 Creating a Bootable Image or SD card for an Embedded Platform</a></p></td></tr><tr><td><p class="P475"><a href="#__RefHeading__1033_1060509377">5 Enabling FPGA Platforms</a></p></td></tr><tr><td><p class="P474"><a href="#__RefHeading___Toc17468_1235158909">5.1 Physical FPGA Platforms</a></p></td></tr><tr><td><p class="P474"><a href="#__RefHeading___Toc17470_1235158909">5.2 Simulator FPGA Platforms</a></p></td></tr><tr><td><p class="P474"><a href="#__RefHeading__1035_1060509377">5.3 Enabling Development for FPGA Platforms</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading__17658_2116501284">5.3.1 Installing the Tool Chain</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading__17660_2116501284">5.3.2 Integrating the Tool Chain into the OpenCPI HDL Build Process</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading__17662_2116501284">5.3.3 Building All the Existing Vendor-independent HDL Code</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading___Toc22146_1235158909">5.3.4 Scripts for HDL Platforms</a></p></td></tr><tr><td><p class="P474"><a href="#__RefHeading__1037_1060509377">5.4 Enabling Execution for FPGA platforms</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading___Toc18275_4003722483">5.4.1 Signal Declaration XML Elements for Devices, Platforms, Slots and Cards</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading___Toc18277_4003722483">5.4.2 Slots  How Cards Plug into Platforms</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading__17664_2116501284">5.4.3 Creating the XML Metadata Definition for the Platform</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading___Toc13565_2939887359">5.4.4 Writing the Platform Worker Source Code</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading___Toc13567_2939887359">5.4.5 The Makefile for the Platform Worker</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading___Toc38643_1517956095">5.4.6 Specifying Platform Configurations in XML Files.</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading___Toc18281_4003722483">5.4.7 Control Plane Master Port Protocol</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading___Toc18283_4003722483">5.4.8 SDP Port Protocol</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading__17668_2116501284">5.4.9 Testing the Basic Platform without Devices</a></p></td></tr><tr><td><p class="P474"><a href="#__RefHeading__1039_1060509377">5.5 Device Support for FPGA Platforms</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading___Toc38645_1517956095">5.5.1 A Device Worker Implements the Data Sheet</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading___Toc4826_234407367">5.5.2 Device Component Specs and Device Worker Modularity</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading___Toc4828_234407367">5.5.3 Device Proxies  Software Workers that Control HDL Device Workers</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading___Toc4832_234407367">5.5.4 Subdevice Workers</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading___Toc18285_4003722483">5.5.5 Testing Device Workers with Emulators</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading___Toc4834_234407367">5.5.6 Higher-level Endpoint Proxies Suitable for Applications</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading__17670_2116501284">5.5.7 XML Metadata for Device Workers/Subdevices/DeviceProxies/EndpointProxies</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading___Toc4836_234407367">5.5.8 Associating Device Workers and Subdevice Workers with Platforms and Cards.</a></p></td></tr><tr><td><p class="P397"><a href="#__RefHeading___Toc18287_4003722483">5.5.9 Summary of Worker Types for Supporting HDL Devices</a></p></td></tr><tr><td><p class="P474"><a href="#__RefHeading___Toc18289_4003722483">5.6 Defining Cards Containing Devices that Plug into Slots of Platforms</a></p></td></tr><tr><td><p class="P475"><a href="#__RefHeading__1049_1060509377">6 Glossary</a></p></td></tr></table><h1 class="Heading_20_1"><a id="a_1_Introduction"><span class="heading_numbering">1</span></a><a id="_Toc57540730"/><a id="__RefHeading__1015_1060509377"/><a id="_Toc57540727"/><a id="_Toc144999751"/>Introduction</h1><p class="P174"><a id="_GoBack"/><span class="T382">This document describes how to enable new platforms for OpenCPI, which will support the execution of component-based applications.</span> <span class="T296">It assumes a basic knowledge of OpenCPI as described in the </span><span class="FirstEmphasis">OpenCPI Overview</span><span class="T296"> and </span><span class="FirstEmphasis">OpenCPI Component Development Guide</span><span class="T296">. </span>Platform development is the third class of OpenCPI development, beyond <span class="T383">application</span> development and <span class="T383">component</span> development. It involves configuring, adapting and wrapping various aspects of hardware platforms, operating system<span class="T214">s</span>, system libraries, and development tools. It applies to general purpose computing platforms, FPGA platforms and GPU platforms. It applies to self-hosted development as well as cross development.</p><p class="P175">The questions this document tries to answer are:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>What are suitable platforms?<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>What is involved in making a platform ready?<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>What are the actual steps and processes for making a platform ready?<span class="odfLiEnd"/></p></li></ul><p class="P175">These questions are answered separately for <span class="T383">development vs. </span>execution.</p><p class="P175">These questions are answered separately for GPP, FPGA, and GPU platforms.</p><p class="P216">After introducing all these topics, this document has <span class="T212">sections for each aspect in the following table</span>, </p><p class="Table_20_Caption_20__28_before_29_"><span class="T213">Table </span><span class="T213"><a id="refTable0"/>1</span><span class="T213">: </span>Categories of Platform Development</p><table border="0" cellspacing="0" cellpadding="0" class="Table3"><colgroup><col width="90"/><col width="125"/><col width="125"/><col width="156"/><col width="221"/></colgroup><tr><td style="text-align:left;width:0.8083in; " class="Table3_A1"><p class="P370"></p></td><td style="text-align:left;width:1.1264in; " class="Table3_A1"><p class="P368"></p><p class="P368">Examples</p></td><td style="text-align:left;width:1.1271in; " class="Table3_A1"><p class="P368">Development<br/><span class="T211">Tools</span></p></td><td style="text-align:left;width:1.4076in; " class="Table3_A1"><p class="P368">Execution<br/><span class="T211">Environment</span></p></td><td style="text-align:left;width:1.9903in; " class="Table3_E1"><p class="P368">I/O and Interconnect<br/>Device Support</p></td></tr><tr><td style="text-align:left;width:0.8083in; " class="Table3_A2"><p class="P292">General-Purpose Processors<br/>(GPPs)</p></td><td style="text-align:left;width:1.1264in; " class="Table3_A2"><p class="P290">X86<br/>(Intel/AMD),</p><p class="P290">ARM<br/>(Xilinx/Altera/TI)</p></td><td style="text-align:left;width:1.1271in; " class="Table3_A2"><p class="P290">Compiler<br/>tool chains</p></td><td style="text-align:left;width:1.4076in; " class="Table3_A2"><p class="P290">Operating System,</p><p class="P290">Libraries,</p><p class="P290">Drivers</p></td><td style="text-align:left;width:1.9903in; " class="Table3_E2"><p class="P290"></p></td></tr><tr><td style="text-align:left;width:0.8083in; " class="Table3_A2"><p class="P292">FPGAs</p></td><td style="text-align:left;width:1.1264in; " class="Table3_A2"><p class="P290">Xilinx<br/>(<span class="T159">V</span>irtex, Zynq)</p><p class="P290"><span class="T406">Intel/</span>Altera<br/>(<span class="T159">S</span>tratix, <span class="T159">C</span>yclone)</p><p class="P290">Mentor/Modelsim</p></td><td style="text-align:left;width:1.1271in; " class="Table3_A2"><p class="P290">Synthesis</p><p class="P290">Place&amp;route</p><p class="P290">Simulation</p></td><td style="text-align:left;width:1.4076in; " class="Table3_A2"><p class="P290">Bitstream loading</p><p class="P290">Control Plane Drivers</p><p class="P290">Data Plane Drivers</p></td><td style="text-align:left;width:1.9903in; " class="Table3_E2"><p class="P291">Directly attached I/O devices</p></td></tr><tr><td style="text-align:left;width:0.8083in; " class="Table3_A2"><p class="P292">Graphics Processors</p></td><td style="text-align:left;width:1.1264in; " class="Table3_A2"><p class="P290">Nvidia Tesla</p><p class="P290">AMD FirePro</p></td><td style="text-align:left;width:1.1271in; " class="Table3_A2"><p class="P290">Compilers,<br/>Profilers</p></td><td style="text-align:left;width:1.4076in; " class="Table3_A2"><p class="P290">Execution Management</p><p class="P290">Drivers</p><p class="P290">Data Plane Drivers</p></td><td style="text-align:left;width:1.9903in; " class="Table3_E2"><p class="P290"></p></td></tr></table><h2 class="Heading_20_2"><a id="a_1_1_References"><span class="heading_numbering">1.1</span></a><a id="__RefHeading__1017_1060509377"/><a id="_Toc144999752"/>References</h2><p class="P94">This document <span class="T213">requires information from several others. To actually perform platform development it is generally useful to understand OpenCPI component and application development, as well as the installation process for previously enabled platforms. To simply get a flavor for what is involved in platform development, only the OpenCPI Introduction is required.</span></p><p class="Table_20_Caption_20__28_before_29_">Table <a id="refTable1"/>1- Table of Reference Documents</p><table border="0" cellspacing="0" cellpadding="0" class="Table2"><colgroup><col width="243"/><col width="111"/><col width="368"/></colgroup><tr class="Table21"><td style="text-align:left;width:2.1861in; " class="Table2_A1"><p class="Table_20_Heading">Title</p></td><td style="text-align:left;width:0.9958in; " class="Table2_A1"><p class="P371">Published By</p></td><td style="text-align:left;width:3.3181in; " class="Table2_A1"><p class="P371">Link</p></td></tr><tr class="Table21"><td style="text-align:left;width:2.1861in; " class="Table2_A1"><p class="P362">OpenCPI Overview</p></td><td style="text-align:left;width:0.9958in; " class="Table2_A1"><p class="P361">OpenCPI</p></td><td style="text-align:left;width:3.3181in; " class="Table2_A1"><p class="P1"><a href="https://github.com/opencpi/opencpi/raw/2018.Q3/doc/pdf/OpenCPI_Overview.pdf" class="Internet_20_link"><span class="T100">https://github.com/opencpi/opencpi/raw/2018.Q3/doc/pdf/OpenCPI_Overview.pdf</span></a></p></td></tr><tr class="Table21"><td style="text-align:left;width:2.1861in; " class="Table2_A3"><p class="P359"><span class="T289">OpenCPI </span>Installation <span class="T289">Guide</span></p></td><td style="text-align:left;width:0.9958in; " class="Table2_A3"><p class="P360">OpenCPI</p></td><td style="text-align:left;width:3.3181in; " class="Table2_A3"><p class="P1"><a href="https://github.com/opencpi/opencpi/raw/2018.Q3/doc/pdf/OpenCPI_Installation.pdf" class="Internet_20_link"><span class="T100">https://github.com/opencpi/opencpi/raw/2018.Q3/doc/pdf/OpenCPI_Installation.pdf</span></a></p></td></tr><tr class="Table21"><td style="text-align:left;width:2.1861in; " class="Table2_A3"><p class="P359"><span class="T289">OpenCPI </span>Component Development <span class="T289">Guide</span></p></td><td style="text-align:left;width:0.9958in; " class="Table2_A3"><p class="P360">OpenCPI</p></td><td style="text-align:left;width:3.3181in; " class="Table2_A3"><p class="P1"><a href="https://github.com/opencpi/opencpi/raw/2018.Q3/doc/pdf/OpenCPI_Component_Development.pdf" class="Internet_20_link"><span class="T100">https://github.com/opencpi/opencpi/raw/2018.Q3/doc/pdf/OpenCPI_Component_Development.pdf</span></a></p></td></tr><tr class="Table21"><td style="text-align:left;width:2.1861in; " class="Table2_A3"><p class="P359"><span class="T289">OpenCPI </span>Application Development <span class="T289">Guide</span></p></td><td style="text-align:left;width:0.9958in; " class="Table2_A3"><p class="P360">OpenCPI</p></td><td style="text-align:left;width:3.3181in; " class="Table2_A3"><p class="P1"><a href="https://github.com/opencpi/opencpi/raw/2018.Q3/doc/pdf/OpenCPI_Application_Development.pdf" class="Internet_20_link"><span class="T100">https://github.com/opencpi/opencpi/raw/2018.Q3/doc/pdf/OpenCPI_Application_Development.pdf</span></a></p></td></tr></table><h1 class="P432"><a id="a_2_OpenCPI_Systems_and_Platforms"><span class="heading_numbering">2</span></a><a id="__RefHeading__1019_1060509377"/><a id="_Toc144999753"/>OpenCPI <span class="T242">Systems and </span>Platforms</h1><p class="P22">OpenCPI provides a consistent model and framework for component-based application development and execution on various <span class="T239">combinations of </span>(heterogeneous) processing technologies, focusing mostly on embedded systems.</p><p class="P22">An <span class="T61">OpenCPI system</span> is a collection of processing elements that can be used together as resources for running component-based applications. <span class="T303">OpenCPI considers</span> each processor part of <span class="T303">some</span> hardware <span class="T5">sub</span>system. <span class="T294">T</span>hese subsystems are wired together using some interconnect technologies (<span class="T265">e.g. </span>networks, buses, fabrics, cables).</p><p class="P22">We call each available processor and its surrounding directly-connected hardware a <span class="FirstEmphasis"><span class="T295">platform</span></span>. Most commonly, a platform is a card or motherboard housing <span class="T238">a</span> processor and associated memory and I/O devices. <span class="T425">T</span>he data paths that allow platforms to communicate with each other <span class="T425">are called</span> <span class="FirstEmphasis"><span class="T295">interconnects</span></span>. <span class="T215">The most common interconnects for OpenCPI systems are PCI Express or Ethernet, although others are also supported and used for some platforms (e.g. the AXI system interconnects on Xilinx Zynq-based systems).</span></p><p class="P95">The scope of a system can be a small embedded system that fits in <span class="T294">a</span> <span class="T216">pocket</span>, or racks full of network-connected hardware that act as a system of systems. Since this system definition is somewhat broad, we target <span class="T82">the </span>efforts to enable run<span class="T82">ning</span> OpenCPI at each <span class="FirstEmphasis">platform</span> and <span class="FirstEmphasis">interconnect</span> within a system. Hence <span class="T61">platform development</span> <span class="T82">i</span>s enabling a platform, and <span class="T188">enabling a system is</span><span class="T5"> enabling whatever platforms </span><span class="T27">and interconnects </span><span class="T5">are in the system</span>.</p><p class="P95">Our most common and simple example system is the ZedBoard from Digilent <span class="T217">(zedboard.org)</span>, which is based on <span class="T240">the </span>Xilinx Zynq chip. This chip is called a system on chip or S<span class="T266">o</span>C, and indeed has two processing elements connected with an interconnect, all on one chip: 1) a dual-core ARM general-purpose processor, and 2) an FPGA. They are connected via an on-chip fabric based on the AXI standard, and each is connected to some I/O devices. <span class="T216">Thus the ZedBoard </span><span class="T62">system</span><span class="T216"> consists of two </span><span class="T62">platforms</span><span class="T216"> that happen to reside in the same chip, with an AXI </span><span class="T62">interconnect</span><span class="T216"> between them.</span></p><p class="P95">Another common example system is a typical PC, which has a multicore (1-12) Intel or AMD x86 processor on a motherboard. <span class="T216">If cards are plugged into slots on the PC's motherboard, and those cards have processors (e.g. GPP, FPGA, GPU) on them, then those cards can act as additional platforms in that system.</span></p><p class="P95">We consider multi-core GPPs as single processors since they generally run a single operating system and act as a single resource that can run multiple threads concurrent<span class="T219">l</span>y.</p><p class="P101">The final defined element of an OpenCPI system is <span class="T61">devices</span>, which are locally attached to some platform to allow the source or sink of data flowing between component<span class="T303">s</span> to enter or exit the system. <span class="T294">Thus devices are distinct from interconnects.</span></p><p class="P23"><span class="T294">A </span><span class="FirstEmphasis">system</span><span class="T102"> consists of </span><span class="FirstEmphasis">platforms</span><span class="T102"> connected by </span><span class="FirstEmphasis">interconnects</span><span class="T102">, and platforms can have local </span><span class="FirstEmphasis">devices</span><span class="T102">, either permanently attached (e.g. on the motherboard) or on optional </span><span class="FirstEmphasis">cards</span><span class="T383"> in the platform's </span><span class="FirstEmphasis">slots</span>.</p><h2 class="P425"><a id="a_2_1_Inside_an_OpenCPI_Platform"><span class="heading_numbering">2.1</span></a><a id="__RefHeading___Toc4319_234407367"/>Inside an OpenCPI Platform</h2><p class="P217">As mentioned above, a <span class="T61">platform</span> consists of a processor (GPP, FPGA, GPU, etc.) <span class="T243">attached to</span> <span class="T61">interconnects</span> allowing it to communicate with other platforms. The processor may have multiple cores, and may even consist of multiple processor chips (such as a dual-socket motherboard where two Intel X86 processors act together). There are two other elements that make up a platform: <span class="T61">devices</span> and <span class="T61">slots</span>. </p><p class="P217"><span class="T61">Devices</span> are hardware elements that are locally attached to the processor of the platform. They are controlled by special workers called <span class="FirstEmphasis">device workers</span> (analogous to device drivers), and usually act as source<span class="T243">s</span> or sinks for data into or out of <span class="T102">the system, and thus can be used for inputs and outputs for </span>a component-based application <span class="T102">running on that system.</span></p><p class="P176">When a device is hard-wired to the platform, it is defined as part of the platform. It is also common for platforms to be optionally configured <span class="T296">with</span> add-on <span class="T61">cards</span> that provide additional devices for the platform. To allow for this, platforms can have <span class="T61">slots</span>, which are an intrinsic part of the platform, and enable cards to be plugged in that <span class="T424">make</span> devices <span class="T424">accessible </span>to the platform. <span class="T242">Such cards may be plugged in to any platforms that have compatible slots.</span></p><p class="P223">An example <span class="FirstEmphasis">system</span> is the ZedBoard, which has a Xilinx Zynq SoC part on its motherboard that has a dual-core ARM processor as well as an FPGA inside. This board thus has two platforms, an ARM-based <span class="FirstEmphasis">platform</span> attached to a variety of external peripherals (Ethernet, USB, etc.) as well as an FPGA-based <span class="FirstEmphasis">platform</span> attached to some external peripherals (devices) as well as an attached external FMC <span class="FirstEmphasis">slot</span> into which different <span class="FirstEmphasis">cards</span> may be plugged.</p><p class="P176">Thus the devices available on a platform are either a permanent part of the platform, or are optionally configured as being available on defined cards <span class="T296">when they</span> are plugged into one of the platform's slots.</p><p class="P177">Platforms can have any number of devices, and may have multiple devices of the same type. When cards are plugged into a platform's slots, they make additional devices available <span class="T424">to</span> the platform.</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Systems have platforms and interconnects.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Platforms have slots and devices, <span class="T424">and are attached to interconnects.</span><span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Cards plug into slots and have devices.<span class="odfLiEnd"/></p></li></ul><h2 class="P426"><a id="a_2_2_Development_and_Execution"><span class="heading_numbering">2.2</span></a><a id="__RefHeading__1021_1060509377"/>Development and Execution</h2><p class="P97">Every platform must be enabled for development as well as execution. <span class="T5">Development</span> is the process of producing executable binaries, and <span class="T5">execution</span> is the process of running those binaries on the <span class="T82">available </span>platforms <span class="T82">in a system, </span>as part of the execution of a component-based application. <span class="T304">Development activities are typically said to be done at </span><span class="T33">build-time</span><span class="T304">; execution activities are typically said to be done at </span><span class="T33">run-time</span></p><p class="P97">OpenCPI uses the term binary artifact as a technology-neutral term for the <span class="T297">binary file</span> that execut<span class="T218">es</span> on various processing technologies. On GPPs, they are typically shared object files or dynamic libraries. On FPGAs, they are sometimes called bitstreams. On GPUs, they are sometimes called graphics kernels.</p><p class="P96">Enabling <span class="T5">development</span> is procuring, installing, configuring and integrating the various tools necessary to enable the developer to design and create binary artifacts from source code, <span class="T300">for a given target platform</span>. Some adaptations, scripts or wrappers are typically required to enable such tools to operate in the OpenCPI development context. OpenCPI does not contain, preclude or require GUI-based IDEs in the component or application development process.</p><p class="P98">For <span class="T241">most</span> embedded systems, the development tools do not run on the system itself, but run on a separate development host, typically a <span class="T231">(possibly virtual) </span>PC. The unusual, but still possible, case where the tools run on the targeted embedded system itself, is termed self-hosted development. When the target platform is embedded <span class="T231">and </span>development tools run on a development host, <span class="T231">that</span> is termed cross development, using cross-tools (e.g. cross-compilers).</p><p class="P98">All development hosts also act as execution platforms since any host capable of running development tools can act as an <span class="T300">OpenCPI </span>execution platform for the GPP/processor of that system. <span class="T300">OpenCPI contains tools that must be compiled on the development host and will always run on the development host. Thus a development host is established to execute tools used both to create binaries for itself and other target platforms (cross development). These tools include both OpenCPI's own tools as well as target-specific tools from third parties.</span></p><p class="P147">Enabling systems may involve creating or modifying infrastructure code in OpenCPI, but enabling for development is defined in this document as enabling developers to <span class="T5">build</span> workers and applications for subsequent execution on a platform. I.e. the development of infrastructure code enables execution, but does not enable development.</p><h2 class="Heading_20_2"><a id="a_2_3_Enabling_New_Systems_for_OpenCPI"><span class="heading_numbering">2.3</span></a><a id="__RefHeading___Toc4321_234407367"/>Enabling New Systems for OpenCPI</h2><p class="P179">Enabling systems for OpenCPI implies enabling the platforms and interconnects in the system for OpenCPI, as well as enabling the processors and devices on the platforms and the devices on any cards used in the system. The first step in the enabling process is to establish the inventory of these elements in the system.</p><p class="P178">Since <span class="T384">specific </span>interconnects, processors, and devices are frequently found in many different systems, it is <span class="T384">possible</span> that support for some of them is already available in OpenCPI. So the enabling process is reduced to only dealing with the elements that do not already have OpenCPI support. Furthermore, there may be devices in the system that do not require OpenCPI <span class="T384">support, </span>either because they are not going to be used, or <span class="T385">there is no benefit given</span> the scope of what OpenCPI does.</p><p class="P179">The system inventory for OpenCPI <span class="T304">consists of</span>:</p><ul><li><p class="P435" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Processors <span class="T386">(attached to interconnects and devices)</span><span class="odfLiEnd"/></p></li><li><p class="P435" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Interconnects <span class="T386">(among processors)</span><span class="odfLiEnd"/></p></li><li><p class="P435" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Devices <span class="T386">(attached to processors)</span><span class="odfLiEnd"/></p></li></ul><p class="P179">For each, if there is no existing support in OpenCPI, support modules must be developed. For some, there may be partial support that must be extended for the intended usage. For new classes of processor (beyond GPP, FPGA, GPU) or new interconnects, the core framework of OpenCPI must be enhanced. Otherwise individual support modules can be developed without modifying the core infrastructure layers of OpenCPI. <span class="T103">Later sections of this document describe the requirements and process of enabling each type of element in the system. Processors must be supported for both development (e.g. compilation) and runtime. Devices and interconnects are enabled for runtime only.</span></p><p class="P181">Since OpenCPI is open source software, it is very desirable to contribute new or extended support modules back to the community since most such modules will likely be used in other systems.</p><p class="P181">A key aspect of supporting new system elements is obtaining the necessary technical information and tools, and in some cases performing a variety of experiments to assess feasibility and derive otherwise unavailable information. When the information is not available from public sources (such as data sheets for device ICs), NDAs or other confidentiality agreements may be required. Vendors may refuse to supply the necessary information, leaving reverse engineering the only option.</p><p class="P180">Since OpenCPI, especially on FPGAs, operates directly on the FPGA devices and usually interacts directly with attached devices, either the vendor must supply the required device workers or supply the information required to development them. Preexisting FPGA drivers for attached devices that were not written with OpenCPI in mind are usually unsuitable as is, and must be either modified or replaced. In some cases then can be wrapped, <span class="T387">although this may result in the addition of undesired overhead.</span></p><h2 class="P427"><a id="a_2_4_Process_Template_for_Enabling_OpenCPI_on_a_New_System"><span class="heading_numbering">2.4</span></a><a id="__RefHeading___Toc4323_234407367"/>Process Template for Enabling OpenCPI on a New System</h2><p class="P218">Here is a list of steps normal<span class="T244">l</span>y required to enable a new system for OpenCPI. <span class="T247">The first four steps are used to establish a clear base of information to estimate and plan the effort. This section may be useful for managers planning the effort, and includes non-technical aspects of the process.</span></p><h3 class="P378"><a id="a_2_4_1_System_inventory"><span class="heading_numbering">2.4.1</span></a><a id="__RefHeading___Toc4325_234407367"/>System inventory</h3><p class="Body">Collect information to determine <span class="T107">the rough </span><span class="T203">scope of </span><span class="T204">the </span><span class="T203">effort.</span></p><p class="P102">This is the basic inventory of the relevant parts of the system, each of which needs to be considered in planning to enable the system.</p><p class="Body"><span class="T422">D</span>evelop the list of processors, interconnects, and devices in the system that are relevant to OpenCPI applications, <span class="T245">establishing the system breakdown. This is usually a block diagram and data sheet exercise.</span></p><p class="P183"><span class="T388">The time required for t</span>his activity <span class="T388">depends to a large extent on whether complete</span> information about the target system is unavailable or unduly restricted.</p><h3 class="P378"><a id="a_2_4_2_Processor__interconnect_and_device_assessment"><span class="heading_numbering">2.4.2</span></a><a id="__RefHeading___Toc4327_234407367"/>Processor, interconnect and device assessment</h3><p class="P24">Evaluate the state of support <span class="T389">currently with</span>in OpenCPI and <span class="T106">identify</span> additional technical efforts are likely to be required. These assessments establish a rough level of effort, without necessarily establishing feasibility. A ROM <span class="T110">(rough order or magnitude) </span>LOE <span class="T110">(level of effort) </span>can be establishe<span class="T110">d</span>.</p><p class="P103">This effort requires matching technical support requirements with the current state of support in OpenCPI, and thus would require either gaining some familiarity with the OpenCPI supported hardware universe, or engaging with a group that is already familiar with it.</p><h4 class="P406"><a id="a_2_4_2_1_For_each_processor__determine_the_level_of_support_within_OpenCPI_"><span class="heading_numbering">2.4.2.1</span></a>For each processor, determine <span class="T104">the level of support within OpenCPI:</span></h4><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T106">Currently</span> supported (e.g. Zynq ARM processor, Intel AMD x86 processor)<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Variant supported (e.g. Virtex6 vs. Virtex 7 FPGA)<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>New processor of existing type (e.g. PPC CPU vs. ARM CPU)<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>New class of processor (e.g. Adapteva Multicore). <span class="T248">This requires new work usually outside the scope of enabling a new system.</span><span class="odfLiEnd"/></p></li></ul><h4 class="P406"><a id="a_2_4_2_2_For_each_processor__determine_the_level_of_tool_chain_support_within_OpenCPI_"><span class="heading_numbering">2.4.2.2</span></a>For each processor, <span class="T105">determine the level of tool chain support within OpenCPI:</span></h4><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T106">Currently</span> supported by OpenCPI<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T106">R</span>equire<span class="T106">s</span> a version upgrade/downgrade/variant of what is <span class="T106">currently</span> supported.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T106">N</span>ot <span class="T106">currently</span> supported by OpenCPI.<span class="odfLiEnd"/></p></li></ul><h4 class="Heading_20_4"><a id="a_2_4_2_3_For_each_interconnect__determine_level_of_support_required_for_each_processor_type_that_is_attached_to_it_"><span class="heading_numbering">2.4.2.3</span></a>For each interconnect, determine level of support required for each processor type <span class="T107">that is attached to it</span>:</h4><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T106">Currently</span> supported<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T106">R</span>equires <span class="T106">updating or </span>enhancements (e.g. PCI-E gen3x8, vs. PCI-E gen2x4).<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T106">Not currently supported</span> for processor type (e.g. Ethernet L2 on FPGAs).<span class="odfLiEnd"/></p></li></ul><h4 class="Heading_20_4"><a id="a_2_4_2_4_For_each_device_attached_to_a_processor_or_on_a_required_card__determine_the_level_of_support_within_OpenCPI_and_identify_the_additional_technical_efforts_likely_to_be_required_the_each_device_"><span class="heading_numbering">2.4.2.4</span></a><span class="T108">For each device attached to a processor or on a required card, determine the level</span> of support <span class="T109">within</span> OpenCPI and <span class="T109">identify the</span> additional technical efforts likely to be required the each device.</h4><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T109">Currently</span> supported<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T109">R</span>equire<span class="T110">s</span> updating or enhancement.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T109">Not currently supported</span>, but similar devices are supported as a model.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T109">Not supported and</span> different from any existing supported devices.<span class="odfLiEnd"/></p></li></ul><h3 class="P379"><a id="a_2_4_3_Assemble_Technical_Data_Package"><span class="heading_numbering">2.4.3</span></a><a id="__RefHeading___Toc4329_234407367"/>Assemble Technical Data Package</h3><p class="P182">For all elements requiring updated or new support, collect information necessary to perform the enabling technical development, and to establish more detailed work estimates. <span class="T390">The information required here is more comprehensive than the basic information required above: it must be sufficient to perform the needed development. </span>This effort will establish the availability of appropriate information to perform the technical developments. It will also find any roadblocks to obtaining the information (vendor unwillingness, legacy unavailability<span class="T110">)</span>.</p><p class="P184">In the particular case of device support, some vendors <span class="T390">may</span> not expose sufficient information to support their devices in the absence of their own drivers that embed their ICD <span class="T110">(interface control document) </span>information they consider a trade secret. Such positioning by vendors <span class="T390">may make optimal support for OpenCPI challenging or impossible.</span>.</p><p class="Body">Required information for processors/<span class="T246">FPGAs include:</span></p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Tool requirements (which tools, which settings, <span class="T246">cost</span>)<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Connectivity <span class="T246">technical </span>details (e.g. how <span class="T246">interconnects, </span>devices and slots are connected, <span class="T246">including pin-outs etc.</span>)<span class="odfLiEnd"/></p></li></ul><p class="Body">Require information for devices <span class="T108">include:</span></p><ul><li><p class="P436" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Device data sheets <span class="T247">or equivalent functional and interface documentation.</span><span class="odfLiEnd"/></p></li><li><p class="P436" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T246">P</span>rogramming/application guides.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Appropriate/relevant existing support modules in OpenCPI's<span class="odfLiEnd"/></p></li><li><p class="P437" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>How the devices are attached to the processors. (e.g. ICD)<span class="odfLiEnd"/></p></li></ul><p class="P183">As part of this effort, any additional required feasibility experiments or reverse engineering tasks are identified. <span class="T247">These are tasks to fill in the information gaps in order to have a high confidence work estimates and plans.</span></p><h3 class="P380"><a id="a_2_4_4_Experiments_to_Establish_Feasibility_and_Missing_Information"><span class="heading_numbering">2.4.4</span></a><a id="__RefHeading___Toc4331_234407367"/>Experiments to <span class="T117">E</span>stablish <span class="T117">F</span>eas<span class="T294">i</span>bility <span class="T111">and Missing Information</span></h3><p class="P25">There are <span class="T391">typically</span> uncertainties and gaps in technical documentation, and in some cases the information is unavailable due to proprietary restrictions, In any case, as a final step to enable accurate work breakdowns and time/cost estimates, there are usually a set of tasks involving hands-on experience with the target system prior to the actual technical developments. Such <span class="T391">experiments</span> are derived from the <span class="T111">process</span> of the above tasks <span class="T111">(i.e. discovering knowledge gaps)</span>, and may include:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Verify and/or establish functional or performance capabilities of the system that are missing or questionable from the information obtained earlier.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Reverse-engineer missing ICD aspects (assuming no legal impediments).<span class="odfLiEnd"/></p></li></ul><p class="P25">These hands-on efforts establish the final information to plan and budget for the effort of enabling a new system for OpenCPI. <span class="T248">This activity depends on access to a real system. When the vendor is performing the work for there own hardware, this task may be unnecessary.</span></p><h3 class="Heading_20_3"><a id="a_2_4_5_Planning_and_Specification"><span class="heading_numbering">2.4.5</span></a><a id="__RefHeading___Toc4333_234407367"/>Planning and Specification</h3><p class="P26">This phase of enabling a system is specifying the technical capabilities to be achieved for OpenCPI on the target system, and planning the tasks to develop and verify each functionality. The specifications are mostly based on achieving functionality that already exists on other systems, so the specifications are mostly references to other existing documents, with particular options, exceptions, or limitations highlighted.</p><p class="P26">Every system element not currently supported requires a development task, while all system elements, including those supposedly already supported, should still have a verification task planned.</p><p class="P26">In some cases, supporting a new system may in fact introduce new classes of support for OpenCPI, in which case the specifications will need to define functionality more fully. <span class="T392">If such specifications are made available to the OpenCPI community, they can</span> end up being a <span class="T392">common </span>template for such support on other systems. Otherwise the functionality would be described as the existing baseline for similar devices, with any core enhancements clearly <span class="T111">specified</span>.</p><p class="P104">The tasks defined here will be of types described more fully in other sections of this document, where the various types of platform development are described in detail.</p><h3 class="P381"><a id="a_2_4_6_Technical_Development"><span class="heading_numbering">2.4.6</span></a><a id="__RefHeading___Toc4335_234407367"/>Technical Development</h3><p class="P104">The various technical development tasks are of the types corresponding to specific sections of this document. <span class="T249">Each type in the following list may or may not be required to enable a given system. Small updates or enhancements to existing modules are common.</span></p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Enabling a new development system <span class="T249">(including native development and execution)</span><span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T251">N</span>ew <span class="T250">GPP </span>development tools<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T251">N</span>ew FPGA tools<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>New GPP platform<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T251">New</span> interconnect for GPP platforms<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T251">New</span> interconnect for FPGA platforms<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T251">New</span> FPGA platform<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>New FPGA <span class="T111">d</span>evice<span class="odfLiEnd"/></p></li><li><p class="P438" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>New FPGA <span class="T111">c</span>ards<span class="odfLiEnd"/></p></li></ul><h3 class="Heading_20_3"><a id="a_2_4_7_Verification"><span class="heading_numbering">2.4.7</span></a><a id="__RefHeading___Toc4337_234407367"/>Verification</h3><p class="P185">Verification requirements <span class="T393">may be</span> very <span class="T393">project</span>-specific, but for each system element, a baseline verification should be defined, including specific characterization, both manual and automated.</p><h3 class="Heading_20_3"><a id="a_2_4_8_Contribution"><span class="heading_numbering">2.4.8</span></a><a id="__RefHeading___Toc4339_234407367"/>Contribution</h3><p class="P105">To reduce all efforts at system enablement for OpenCPI, it <span class="T111">is</span> strongly encouraged (or in some cases required <span class="T393">by licensing</span>), that enhancements to existing support modules, and new support modules for widely available processors, interconnects and devices be contributed back to the appropriate repositories.</p><h1 class="Heading_20_1"><a id="a_3_Enabling_the_Development_Host"><span class="heading_numbering">3</span></a><a id="__RefHeading__1023_1060509377"/><span class="T220">Enabling the </span>Development Host</h1><p class="P99">Before any platform-specific tools are installed on the development host, the basic development configuration must be established for OpenCPI. The <span class="FirstEmphasis">OpenCPI Installation Guide</span> describes the installation process <span class="T221">for </span><span class="T41">supported</span><span class="T221"> development hosts</span>, but the basic steps are:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Installation of the OS with suitable options and packages.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Installation of native development tools to drive OpenCPI<span class="T232">'</span>s build system on the development host.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Retrieving current source code for OpenCPI<span class="odfLiEnd"/></p></li><li><p class="P439" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Establish a build environment with appropriate options<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Building the core OpenCPI software <span class="T3">targeting the development host</span><span class="odfLiEnd"/></p></li><li><p class="P439" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Building and testing the OpenCPI component libraries and example applications<span class="odfLiEnd"/></p></li></ul><p class="P2"><span class="T3">Building the </span><span class="T3">framework</span><span class="T3"> software for the development host</span> includes <span class="T394">building OpenCPI</span> tool executables, as well as runtime libraries that support both tool execution as well as application/component execution on the development host.</p><p class="P119">This section addresses issues specific to development hosts, while following sections address issues for any target platform for execution, which also includes development hosts.</p><p class="P2"><span class="T301">F</span>or a new development <span class="T394">host</span>, the <span class="T298">following aspects</span> must be <span class="T223">defined, documented</span>, and in some cases, new scripts and software will be required:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Operating <span class="T298">s</span>ystem <span class="T298">i</span>nstallation/configuration<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Retrieval of OpenCPI source distribution.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Installation of required packages that are available as options with the OS distribution.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Installation of other required packages that require specific download/installations.<span class="odfLiEnd"/></p></li></ul><p class="P100">The first two <span class="T300">steps </span>are generally manual, requiring written instructions. The latter two <span class="T300">are</span> scripted. Both the instructions and scripts should be <span class="T301">submitted back to</span> the OpenCPI source distribution for the benefit of other users of the same development host installation.</p><h2 class="Heading_20_2"><a id="a_3_1_Operating_System_Installation"><span class="heading_numbering">3.1</span></a><a id="__RefHeading__17646_2116501284"/>Operating System Installation</h2><p class="Standard">While an existing development system with various software installed can certainly be used as a development host, it <span class="T222">is</span> valuable to make a clean installation from scratch to avoid configuration conflicts and problems that simply arise from a mis-match or mis-configuration of the environment. While most OS installations have a number of manual steps, they should still be written down so they can be reliably repeated on new systems. Scripts should be written when a number of steps can be automated, being careful to avoid dependencies on other software this early in the installation process.</p><p class="Standard">See the installation guide for instructions on OS installation for the typical development hosts. Ideally, a new development host should have a new section written about it in <span class="T299">the installation guide</span> document so others can benefit, <span class="T222">including:</span></p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>How to get the OS (DVD, download, etc.).<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>How to perform the installation, with options at least appropriate for OpenCPI development.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>How to update the OS to the most recent patch level.<span class="odfLiEnd"/></p></li><li><p class="P440" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>How to obtain/download the OpenCPI code base.<span class="odfLiEnd"/></p></li></ul><p class="Standard">This <span class="T224">(normally manual) new </span>procedure should be included in the README file in the platform's director<span class="T233">y.</span> <span class="T224">Note that the last step is the first point where any OpenCPI support scripts become available. The last step, retrieving the OpenCPI source distribution, could consist of network download or downloading to another system and burning CDs/DVDs, or even installing additional tools in order to accomplish the download. Typically, for network attached systems, it is simply accomplished by using:</span></p><p class="Code">% git clone <span class="T234">https</span>://github.com/opencpi/opencpi.git</p><p class="Standard">Once the OpenCPI source distribution is present, scripts to finish the installation can be run out of that tree <span class="T299">(after they are created and added to the OpenCPI repository). The remaining instructions assume you are in the directory created by the git clone command, i.e. you must then do:</span></p><p class="Code">% <span class="T302">cd opencpi</span></p><p class="Standard">In summary, the task to enable this <span class="T299">first </span>aspect of the <span class="T486">development host </span>installation is to create the README file explaining the initial OS installation, and the retrieval of the OpenCPI distribution. <span class="T299">C</span>reate the new directory under <span class="T471">rcc/</span><span class="Code">platforms</span>, named after the development platform, and put the README file in that directory.</p><h2 class="Heading_20_2"><a id="a_3_2_Development_Tools_Installation_for_the_Development_Host_"><span class="heading_numbering">3.2</span></a><a id="__RefHeading__17648_2116501284"/>Development Tools Installation<span class="T6"> </span>for the Development Host.</h2><p class="P3"><span class="T302">Most of the remaining steps for enabling the development host are the same as those for supporting any runtime platform, and are explained in the </span><a href="#a_Enabl" class="Internet_20_link"><span class="FirstEmphasis">Enabl</span></a><a href="#a_ing" class="Internet_20_link"><span class="FirstEmphasis"><span class="T20">ing</span></span></a><a href="#a_GPP" class="Internet_20_link"><span class="FirstEmphasis"> GPP </span></a><a href="#a_Software" class="Internet_20_link"><span class="FirstEmphasis"><span class="T20">Software </span></span></a><a href="#a_Platforms" class="Internet_20_link"><span class="FirstEmphasis">Platforms</span></a><span class="T302"> section below. Prior to the installation of any target-platform-specific tools, a basic set of tools must be installed on the development host that will support development for all platforms</span><span class="T302"> on that system</span><span class="T302">.</span><span class="T302"> Enabling the development host as an OpenCPI software platform is always a requirement before enabling a cross-compiled (embedded, non-development) platform.</span></p><p class="P165">Other than the C/C++ compilation tool chain, which is required for all platforms, OpenCPI <span class="T473">development </span>requires other tools such as:</p><ul><li><p class="P4" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="odfLiEnd"/></p></li><li><p class="P473" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>autotools (autoconf, automake, libtool etc.)<span class="odfLiEnd"/></p></li><li><p class="P471" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>make<span class="odfLiEnd"/></p></li><li><p class="P471" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>git<span class="odfLiEnd"/></p></li><li><p class="P7" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="odfLiEnd"/></p></li><li><p class="P471" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>python-<span class="T472">related</span> <span class="T472">(both version 2 and 3)</span><span class="T472">, </span><span class="T472">numpy, lxml, swig etc.</span><span class="odfLiEnd"/></p></li><li><p class="P473" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>utilities such as unzip, patch, fakeroot, <span class="T486">sed, ed</span><span class="T486">, etc.</span><span class="odfLiEnd"/></p></li></ul><p class="P166">All these tools are used on the development host by the OpenCPI development system, whether the targeted platform is the development host itself or a cross-compiled embedded platform. FPGA tools and simulators also have development host requirements which are added to this requirement list so that the system is ready for a variety of such tools before they are installed. At the current time these <span class="T474">dependencies</span> include various 32-bit libraries (even when running on 64 bit development hosts), since they are required by both the Modelsim simulator and some versions of the Altera/Intel FPGA tools.</p><p class="P166">All software platforms are enabled using the same steps described below, but development platforms simply have more dependencies and requirements.</p><p class="P8"/><h1 class="Heading_20_1"><a id="a_4_Enabling_GPP_Platforms"><span class="heading_numbering">4</span></a><a id="__RefHeading__1025_1060509377"/><span class="T197">Enabling </span>GPP Platforms</h1><p class="P15"/><p class="Standard">To execute on <span class="T79">GPP</span> platforms, new additions or modifications to the OpenCPI <span class="T16">framework</span> software may be required. The <span class="T16">framework</span> software is highly portable and <span class="T112">is</span> supported on a number of platforms and environments. However, it is <span class="T474">possible</span> for a new compiler, toolchain, or system libraries to require adjustments to the OpenCPI <span class="T474">framework</span> software. Here are <span class="T112">a few</span> reasons that <span class="T486">may </span>require modifications to <span class="T474">framework</span> software:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>New compilers have new correct warnings that should be addressed.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>System headers conform<span class="T112"> better to</span> standards, <span class="T112">requiring new correct header inclusion</span>.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Some compilers are dumber that others, requir<span class="T14">ing</span> code <span class="T16">to </span>be dumbed down to avoid language or library features that are not universally supported.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Some compilers are stricter than others, requiring code that was previously accepted to be tightened up to be strictly compliant and accepted.<span class="odfLiEnd"/></p></li></ul><p class="Standard">These reasons may result in modifications to the OpenCPI <span class="T16">framework </span>software, but they should not and cannot make that software stop working on existing supported platforms. Any such modifications should be done with care, and whenever possible, the modifications should be retested on <span class="T16">a number of </span>existing supported platforms.</p><h2 class="Heading_20_2"><a id="a_4_1_Enabling_Development_for_New_GPP_Platforms"><span class="heading_numbering">4.1</span></a><a id="__RefHeading__1027_1060509377"/>Enabling Development for <span class="T117">New </span>GPP<span class="T220"> P</span>latforms</h2><p class="P16">GPP (software) platforms are established by creating a new directory under the <span class="Code">rcc/</span><span class="Code">platforms/</span> directory in <span class="T15">any OpenCPI project.</span>. <span class="T469">In a future release this will be done using the command:</span></p><p class="P316">ocpidev create rcc platform &lt;new-platform&gt;</p><p class="P16">The name of the directory (the platform's name) should be a lower case name that usually includes a OS major version after the name of the OS. In particular, different versions of Linux should be named by their distribution name or organization providing the OS. Examples for <span class="T16">software </span>platforms are: <span class="Code">rhel5</span>, <span class="Code">centos6</span>, <span class="Code">centos7</span>, <span class="Code">ubuntu14</span>, <span class="Code">xilinx13_4</span>, <span class="Code">macos10_1</span><span class="Code"><span class="T16">3</span></span>. The <span class="T16">naming </span>concept is that each <span class="T16">software </span>platform has binary compatibility within its minor versioning, but not <span class="T5">necessarily</span> with major versioning. <span class="T471">The currently supported software platforms can be found in the </span><span class="Code">rcc/platforms/</span><span class="T471"> directory of the projects that are part of the OpenCPI source tree.</span><span class="T471"> Anyone can add support for new software platforms in their own OpenCPI projects.</span></p><p class="Body">The required and optional files in the platform's directory are defined in the <a href="#a_Software_Platform_Files" class="Internet_20_link"><span class="T16">Software Platform Files</span></a> section <span class="T16">below</span>, <span class="T449">but a discussion of why and how they are used occurs first.</span></p><p class="Body">Whether a <span class="T471">software</span> platform is the development host itself, or an embedded GPP using cross-development, the tool chain must be established on a development host. For enabling development hosts, there is typically a default tool chain that is installed globally in the system for any development task on that system. For embedded cross-developed platforms, a specific cross-development package must typically be installed using one of several methods described below.</p><p class="P278">Satisfying the OpenCPI software dependencies for any platform uses two classes of underlying software installations:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Prebuilt, globally-installed software packages that are a (usually optional) standard part of an operating system installation.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Externally source<span class="T487">d</span> software packages that require a separate combination of downloading, building and installation.<span class="odfLiEnd"/></p></li></ul><p class="P278">We use the term <span class="FirstEmphasis">standard packaged software</span><span class="T475"> to indicate the first category. E.g, a package of development tools is commonly a standard installation option on many systems. Since they are standard packages for a given operating system installation, they are prebuilt and installed globally on the (usually a development) system. Installation of such software is usually accomplished using commands like </span><span class="Code">yum</span><span class="T475"> or </span><span class="Code">apt</span><span class="T475">.</span></p><p class="P279">The second category is essentially ad hoc extra required software that must be installed using specific scripts unique to that software. We use the term <span class="FirstEmphasis">prerequisites</span> for such software, and expect individual scripts to be written to download/build/install it. <span class="T487">Software packages required by OpenCPI at runtime are normally prerequisites since they must be cross-compiled for all embedded platforms, whereas those required only for development may be supplied in either category.</span></p><p class="P279">So for any given platform, OpenCPI is enabled by a combination of standard packaged software and prerequisite software.</p><p class="Body">OpenCPI uses <span class="T445">the following</span> process <span class="T489">steps </span>when building <span class="T445">itself</span> for a software platform, <span class="T489">based on the open source tree from github.com, </span>and <span class="T470">all</span> <span class="T445">steps are enabled by the requirements described below</span>.</p><ol><li><div class="List_20_Number" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">1.</span>Install the <span class="T488">standard </span>software packages <span class="T445">required for OpenCPI </span>from the <span class="T445">appropriate </span>network software package repository <span class="T447">(usually associated with the Linux distribution</span><span class="T447">)</span>, <span class="T445">e.g. development tools</span><span class="T445"> for the development host.</span><span class="T445"><span class="Footnote_20_anchor" title="Footnote: Software package repositories are sometimes captured locally when internet access is not always available. Somes standard software packages are individually captured/downloaded so they can be (re)installed offline."><a href="#ftn1" id="body_ftn1">1</a></span></span><span class="odfLiEnd"/></div></li><li><div class="List_20_Number" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">2.</span><span class="T447">Download and b</span>uild any <span class="FirstEmphasis">prerequisite</span> software packages that are <span class="T5">specific to th</span><span class="T53">e</span><span class="T5"> platform</span>, <span class="T447">but are not available as standard packaged software.</span><span class="T447"><span class="Footnote_20_anchor" title="Footnote: Similarly, prerequisite software is sometimes downloaded and stored locally/offline and the download step simply uses the locally available downloads."><a href="#ftn2" id="body_ftn2">2</a></span></span><span class="odfLiEnd"/></div></li><li><p class="List_20_Number" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">3.</span>Build the standard (always or frequently used) OpenCPI <span class="FirstEmphasis">prerequisite</span> software packages.<span class="odfLiEnd"/></p></li><li><p class="List_20_Number" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">4.</span>Build the OpenCPI framework libraries and executables<span class="odfLiEnd"/></p></li><li><p class="List_20_Number" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">5.</span>Build <span class="T446">all the software assets in </span>the built-in projects that are part of OpenCPI, in the same github repository <span class="T470">(RCC workers and ACI applications).</span><span class="odfLiEnd"/></p></li><li><p class="P398" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">6.</span>Run a number of tests to verify OpenCPI operation (software only).<span class="odfLiEnd"/></p></li></ol><p class="Body">These <span class="T489">6 </span>steps are all done in a master installation script called:</p><p class="Code"><span class="Code">./scripts/install-opencpi.sh</span>.</p><p class="Body">These steps, and how to enable them for a software platform, will be described in detail in the following sections, but a summary of the files required <span class="T489">in a platform's directory </span>to enable <span class="T448">these steps for </span>each software platform is:</p><ol><li><p class="List_20_Number" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">1.</span>A software platform definition file, named <span class="Code"><span class="T5">&lt;platform&gt;</span></span><span class="Code">.mk</span>, which sets variables that describe the platform. <span class="T446">Between 3 and 20 variables might be required.</span><span class="odfLiEnd"/></p></li><li><p class="List_20_Number" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">2.</span><span class="T5">For development hosts </span><span class="T53">only</span>, a script to check that the currently running system is in fact the given software platform, e.g. answering: is this system running CentOS7? <span class="T446">The script is typically 5-10 lines of shell script code, and is called </span><span class="Code"><span class="T5">&lt;platform&gt;</span></span><span class="Code">-check.sh</span><span class="T446">.</span><span class="odfLiEnd"/></p></li><li><p class="List_20_Number" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">3.</span><span class="T448">If needed, </span>a script to install various <span class="T489">standard packaged software from software package repositories to support OpenCPI or compiling for this platform, called </span><span class="Code"><span class="T5">&lt;platform&gt;</span></span><span class="Code">-packages.sh</span><span class="T448">.</span><span class="odfLiEnd"/></p></li><li><p class="List_20_Number" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">4.</span><span class="T448">If platform-specific prerequisite packages are indicated in the software platform definition file, then there should be a </span><span class="T51">prerequisite</span><span class="T448"> script for each one</span><span class="T448">, named </span><span class="Code">install-</span><span class="Code"><span class="T5">&lt;prerequisite&gt;</span></span><span class="Code">.sh</span><span class="T448">.</span><span class="odfLiEnd"/></p></li></ol><h3 class="Heading_20_3"><a id="a_4_1_1_The_OpenCPI_Build_Process_for_Software_Platforms"><span class="heading_numbering">4.1.1</span></a><a id="__RefHeading___Toc290926_943807761"/>The OpenCPI <span class="T449">B</span>uild <span class="T449">P</span>rocess for <span class="T449">S</span>oftware <span class="T449">P</span>latforms</h3><p class="Body">The OpenCPI build process is designed to support a variety of platforms all built in the same source tree. I.e. all the built results for all platforms coexist in a directory structure, <span class="T490">in per-platform directories</span>. This allows:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Multiple development hosts to share the same file system and same copy of the source tree<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Multiple cross-compiled/embedded platforms all built in the same source tree, even when cross-compiled using different development hosts.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Multiple disparate runtime systems to share the same OpenCPI installation via network mounts.<span class="odfLiEnd"/></p></li></ul><p class="Body">This structure allows for rapid and productive development, debugging <span class="T450">and testing </span>across a range of platforms simultaneously. <span class="T450">The process of building for a given platform thus can coexist with others and can mostly proceed in parallel, independently, from one or more development hosts.</span></p><h4 class="Heading_20_4"><a id="a_4_1_1_1_Self-identification_of_Development_Platforms"><span class="heading_numbering">4.1.1.1</span></a>Self-identification of Development Platforms</h4><p class="Body"><span class="T450">When building for </span>development platforms, the first step in the build process is to decide which platform we are actually running on <span class="T490">and</span> <span class="T450">where its directory of platform-specific files is. After this,</span> the various scripts and tools associated with that platform <span class="T490">are used.</span></p><p class="Body">Typing <span class="Code">./scripts/install-opencpi.sh</span> <span class="T490">(or individual scripts called by that) </span>at the top level of the <span class="T451">OpenCPI </span>source tree does this self-identification step almost immediately. The algorithm for this is:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>For each project indicated in the project registry and each project indicated in the <span class="Code">OCPI_PROJECT_PATH</span> environment variable, look for software platforms defined in the <span class="Code">rcc/platforms</span> directory, and invoke the <span class="Code">&lt;platform&gt;-check.sh</span> script found there. If <span class="T451">that script</span> succeeds, that platform and its directory are now used as the <span class="T5">platform we are running on</span>.<span class="odfLiEnd"/></p></li></ul><p class="Body">The exact definition and operation of this script, and examples, are described in the <a href="#a_Softare_Platform_Check_Scripts" class="Internet_20_link">Softare Platform Check Scripts</a> section. <span class="T451">Even when targeting cross-development platforms, the </span><span class="T54">development host </span><span class="T55">platform</span><span class="T451"> must still be identifiable this way. When building OpenCPI for cross-developed platforms, the target platform name is specified explicitly, but the same project search algorithm is used to find a </span><span class="Code">rcc/platform</span><span class="Code"><span class="T5">/&lt;platform&gt;</span></span><span class="T451"> directory for the specified platform. No </span><span class="Code"><span class="T5">&lt;platform&gt;</span></span><span class="Code">-check.sh</span><span class="T451"> script is needed for cross-developed platforms.</span></p><h4 class="Heading_20_4"><a id="a_4_1_1_2_Installation_of_Pre-packaged_Software_from_a_Package_Repository"><span class="heading_numbering">4.1.1.2</span></a>Installation of <span class="T453">P</span>re-pack<span class="T453">a</span>ged <span class="T453">S</span>oftware from a <span class="T453">P</span>ackage <span class="T453">Re</span>pository</h4><p class="Body">The tools required to support OpenCPI development <span class="T491">on</span> a development host are usually obtained from <span class="T491">standard packed </span>software <span class="T491">in</span> repositories accessible on the internet. Different Linux distributions use different repositories, and different commands, to retrieve and install software packages from those repositories. <span class="T452">If a platform requires any such packages to be installed, there must be a script file </span><span class="Code"><span class="T5">&lt;platform&gt;-</span></span><span class="Code">packages.sh</span><span class="T452"> in the platform's directory.</span></p><p class="P341"><span style="position:absolute;left:5.398cm;">Note that when installing a prepackaged OpenCPI binary distribution (e.g. from RPMs using the <span class="Code">yum</span> command on CentOS platforms), the required packages are usually installed automatically as part of installing <span class="T453">that</span> OpenCPI package.</span></p><p class="Body">This script is run first (after self-identification), to install <span class="T491">the</span> <span class="T491">software</span> that enable building other software: prerequisites, the OpenCPI framework, and the built-in projects in the OpenCPI github repo. <span class="T453">The software package repository used may in fact be local on the system or on the local network rather than being internet-based.</span></p><p class="Body">These packages are generally <span class="T5">globally installed</span> on the system, and not in any sand box only for use by OpenCPI. Thus they are considered default installations of standard software for the platform. If a software package should <span class="T5">not</span> be globally installed (not be seen or used by other users or other software), we consider that a <span class="T5">prerequisite</span> package, which requires its own installation script, described next.</p><p class="Body">Embedded and cross-developed platforms do not usually install software from a software package repository into a global location on the system, but if that is desired or required, such platforms can also have a <span class="Code"><span class="T5">&lt;platform&gt;</span></span><span class="Code">-packages.sh</span> script.</p><h4 class="P407"><a id="a_4_1_1_3_Installation_of_Prerequisite_Software_Packages_in_the_OpenCPI_Sand_Box_"><span class="heading_numbering">4.1.1.3</span></a>Installation of Prerequisite Software Packages in the OpenCPI Sand Box.</h4><p class="Body">After the installation of pre-built <span class="T492">standard packaged </span>software from repositories is done (if there are any), the next step is to, <span class="T492">if required,</span> build and install prerequisite software packages in a directory soley used by OpenCPI (and thus not seen or used by other users or software). Each prerequisite software package has its own installation script, as defined in the <a href="#a_Prerequisite_Installation_Scripts" class="Internet_20_link">Prerequisite Installation Scripts</a> section.</p><p class="Body">The term prerequisite in this case implies an independently downloaded, possibly built-from-source, installed in the OpenCPI sand box, software package. This is in contrast to the previously discussed packages, installed prebuilt from software package repositories and installed globally, visible, us<span class="T492">able </span>by all users and <span class="T492">unrelated </span>other software.</p><p class="Body">There are two types of prerequisites, <span class="T492">each installed using the same type of script</span>:</p><ol><li><p class="List_20_Number" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">1.</span>Platform-specific scripts that support the development requirements of OpenCPI (e.g. compilers, or other required utilities) <span class="T492">for a particular platform.</span><span class="odfLiEnd"/></p></li><li><p class="List_20_Number" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">2.</span>OpenCPI-standard prerequisites required by some or all platforms, both development and cross-compiled.<span class="odfLiEnd"/></p></li></ol><p class="Body">The first type <span class="T493">requires</span> installation scripts <span class="T493">be </span>supplied in the platform's directory, while the second type has installation scripts that are part of OpenCPI. A platform <span class="T454">indicates</span>, in its platform definition file (<span class="Code"><span class="T5">&lt;platform&gt;</span></span><span class="Code">.mk</span>) whether it has any such platform-specific prerequisites, and if so, its scripts are run before building any of the second type of prerequisites. <span class="T455">This allows the first type (perhaps cross compilers) to enable building the second type (the standard required prerequisites for OpenCPI). All prerequisite installation scripts have the name:</span></p><p class="P315">install-&lt;package&gt;.sh</p><p class="Body">Each such script can build its package in whatever way is needed, which can vary widely, but can rely on previously installed packages.</p><p class="P342"><span style="position:absolute;left:5.398cm;"><span class="T494">W</span>hen installing a prepackaged OpenCPI binary distribution (e.g. from RPMs using the <span class="Code">yum</span> command on CentOS platforms), the <span class="T456">prerequisite packages are also installed from prebuilt RPMs.</span></span></p><h4 class="P408"><a id="a_4_1_1_4_Building_the_OpenCPI_Framework_Libraries_and_Executables"><span class="heading_numbering">4.1.1.4</span></a>Building the OpenCPI Framework Libraries and Executables</h4><p class="P271">After the <span class="T495">standard packaged software is installed,</span> and the platform-specific and OpenCPI standard prerequisite packages are built and installed, the OpenCPI framework can built. This is done either as part of the <span class="Code">./scripts/</span><span class="Code"><span class="T495">install</span></span><span class="Code">-opencpi.sh</span> script or simply by issuing the <span class="Code">make</span> command in the top level of the OpenCPI source tree.</p><p class="P272">Building the framework depends on a tool chain declared in the platform definition file, as well as any platform-specific or OpenCPI standard prerequisites.</p><p class="P272">The results of this step are made available in the <span class="Code">exports/</span> directory of the source tree, in a subdirectory whose name is the platform. Executables are in <span class="Code">exports/</span><span class="Code"><span class="T5">&lt;platform&gt;</span></span><span class="Code">/bin/</span>, and libraries are in <span class="Code">exports/</span><span class="Code"><span class="T5">&lt;platform&gt;</span></span><span class="Code">/lib</span>.</p><h4 class="P409"><a id="a_4_1_1_5_Building_the_Assets_in_the_Built-in_Projects_in_the_OpenCPI_git_Repository_"><span class="heading_numbering">4.1.1.5</span></a>Building the Assets in the Built-in Projects in the OpenCPI git Repository.</h4><p class="Body">The final step of building OpenCPI is building all the software assets in the projects that are present in the OpenCPI source tree in its github repository (currently <span class="Code">core</span>, <span class="Code">assets</span>, and <span class="Code">inactive</span>). This occurs as the last part of the <span class="Code">./scripts/</span><span class="Code"><span class="T496">install</span></span><span class="Code">opencpi.sh</span> script or issuing the <span class="Code">make projects</span> command in the top level of the OpenCPI source tree.</p><p class="Body">This builds all software workers, and ACI applications in these projects. It is equivalent to using the <span class="Code">ocpidev build</span> command in each project.</p><p class="Body">When a new softare platform is defined correctly, this step represents a successful software platform definition and supporting software <span class="T496">for building.</span></p><h4 class="P410"><a id="a_4_1_1_6_Testing_the_OpenCPI_Installation_for_a_Software_Platform"><span class="heading_numbering">4.1.1.6</span></a>Testing the OpenCPI Installation for a Software Platform</h4><p class="Body">Running the <span class="Code">./scripts/test-opencpi.sh</span> script is the final test of a development software platform. It also tests aspects of OpenCPI that are not all related to software platforms, but if it succeeds completely, it is a good indication of success. This script includes <span class="T496">some </span>asset unit tests in the built-in projects.</p><p class="Body">For embedded platforms, this script is executed on the embedded platform after it has been prepared for OpenCPI, which normally includes preparing a bootable media (e.g. SD card) for the platform. <span class="T457">[This is unstable at the moment].</span></p><h3 class="P382"><a id="a_4_1_2_Software_Platform_Files_in_the_Platform's_Directory"><span class="heading_numbering">4.1.2</span></a><a id="__RefHeading___Toc290928_943807761"/>Software Platform Files <span class="T459">in the Platform's Directory</span></h3><p class="Body">Defining a software platform for OpenCPI involves 4 types of files in its directory, <span class="Code">rcc/platforms/</span><span class="Code"><span class="T5">&lt;platform</span></span> ,in a project:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>The platform definition file <span class="Code"><span class="T5">&lt;platform</span></span><span class="Code"><span class="T52">&gt;</span></span><span class="Code">.mk</span><span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>The platform self identification file for development systems only: <span class="Code"><span class="T5">&lt;platform&gt;</span></span><span class="Code">check.sh</span><span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>The optional package installation file: <span class="Code"><span class="T5">&lt;platform&gt;</span></span><span class="Code">-packages.sh</span><span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Optional platform-specific prerequisite installation scripts: <span class="Code">install</span><span class="Code"><span class="T5">&lt;prerequisite</span></span><span class="Code">&gt;.sh</span><span class="odfLiEnd"/></p></li></ul><p class="Body">Each type of file is described in the following sections.</p><h4 class="P411"><a id="a_4_1_2_1_Platform_Definition_File___platform__mk"><span class="heading_numbering">4.1.2.1</span></a>P<span class="T458">latform Definition File: </span><span class="Code">&lt;platform&gt;</span><span class="Code"><span class="T188">.mk</span></span></h4><p class="Body">These required files are processed by <span class="Code">make</span>, and thus use <span class="Code">make</span> syntax. They contain a set of variable assignments to override default values as required by the platform. The list of valid variables, their default values, and the descriptions, are in the file:</p><p class="Code">tools/[cdk/]include/platform-defaults.mk</p><p class="P273">Three variables are required, and the rest are only used to override default values. All variables are in camel case, with the prefix <span class="Code">Ocpi</span>. The required variables are:</p><p class="IndentHang"><span class="Code"><span class="T61">OcpiPlatformOs</span></span>  the operating system name in lower case, e.g. <span class="Code">linux</span> or <span class="Code">macos</span>.</p><p class="IndentHang"><span class="Code"><span class="T61">OcpiPlatformOsVersion</span></span>  the major version, usually a short name with a numeric major version. For Linux, <span class="T497">it is </span>a prefix before the major version, indicating the distribution, e.g. <span class="Code">c</span> for CentOS, <span class="Code">u</span> for Ubunto, <span class="Code">m</span> for Miint etc. For macos, the major/minor version, e.g. <span class="Code">10_13</span>.</p><p class="P343"><span class="Code"><span class="T60">OcpiPlatformArch</span></span>  the CPU architecture, usually as returned by the<br/><span class="Code">uname -m</span> command, e.g. x86_64.</p><p class="P273">Two other important variables are:</p><p class="IndentHang"><span class="Code"><span class="T60">OcpiPlatformPrerequisites</span></span>  a list of required software prerequisite names for platform-specific prerequisite packages for which the platform will supply installation scripts.</p><p class="IndentHang"><span class="Code"><span class="T60">OcpiCrossCompile</span></span>  an absolute pathname and prefix of the compilation toolchain tools for the platform, <span class="T497">assuming packages and prerequisites are installed.</span></p><p class="Body">The presence of the <span class="Code">OcpiCrossCompile</span> variable setting indicates a cross-compiled platform.</p><p class="P156">When this file is processed, it is checked for variable assignments that are not in the list of valid variables, which results in an error if a variables assigned are not in the list of valid variables. All the default values are <span class="T497">as needed</span> for CentOS6 <span class="T497">L</span>inux, <span class="T497">and </span>thus all assignments (except for the three required ones) are only needed to override those defaults. <span class="T460">All variables are initially defined with a default value as simply expanded or immediately expanded </span><span class="Code">make</span><span class="T460"> variables using the := assignment syntax.</span></p><p class="P157">A simple example of this file is the current definition for CentOS7. Since the defaults defined in the <span class="Code">platform-defaults.mk</span> are basically for CentOS6, there are not many variables:</p><p class="Code">OcpiPlatformOs=linux<br/>OcpiPlatformOsVersion=c7<br/>OcpiPlatformArch=x86_64</p><p class="P155"><span class="T461">For the cross-compiled Xilinx Zynq Linux platform (</span><span class="Code">xilinx13_4</span><span class="T461">), from the version </span><span class="Code">13_</span><span class="Code"><span class="T463">3</span></span><span class="T461"> (2013, the 3</span><span class="T462">rd</span><span class="T461"> quarter) the platform has a different compiler, and relies on the compiler that is embedded in the Xilinx tools package already installed separately. Its definition file looks like this (with some abbreviations):</span></p><p class="Code">include $(OCPI_CDK_DIR)/include/hdl/xilinx.mk<br/>f:=$(OcpiXilinxEdkDir)/gnu/arm/lin/bin<br/>OcpiCrossCompile=$f/arm-xilinx-linux-gnueabi-<br/>OcpiCFlags+=-mfpu=neon-fp16 -mfloat-abi=softfp -march=armv7-a<br/>cpiCxxFlags+=-mfpu=neon-fp16 -mfloat-abi=softfp -march=armv7-a<br/>OcpiStaticProgramFlags=-rdynamic<br/>OcpiKernelDir=release/kernel-headers<br/>OcpiPlatformOs=linux<br/>OcpiPlatformOsVersion=x13_3<br/>OcpiPlatformArch=arm</p><p class="P282">There is no package or prerequisite installation scripts for this platform since its tool chain is available as a side efffect of a separate, global, installation of Xilinx FPGA tools.</p><h4 class="P412"><a id="a_4_1_2_2_Platform_Self-Identification_Check_Script_for_Development_Platforms"><span class="heading_numbering">4.1.2.2</span></a>Platform Self-Identification/<span class="T464">Check</span> Script for Development Platforms</h4><p class="P158">This script <span class="T467">is </span>named <span class="Code"><span class="T5">&lt;platform&gt;</span></span><span class="Code">-check.sh</span> and <span class="T467">is </span>required only for development platforms, and is executed with the <span class="Code">bash</span> shell. It returns success (an exit status of zero) if the running system is indeed this platform. I<span class="T467">f it</span> is does not determine that the running system is this platform, it should return a non-zero exit status.</p><p class="P158">Normally each Linux distribution or other operating system has some files that indicate its native distribution or release type, as well as which major version is running. So the task of this script is to check for those files as well as the major version number.</p><p class="P158">These scripts are usually quite simple, and so several are listed here verbatim as examples:</p><p class="P159">For CentOS <span class="T467">Linux </span>platforms, <span class="T465">where the </span><span class="Code">/etc/centos-release</span><span class="T465"> file contains something like:</span></p><p class="Code">CentOS release 6.9 (Final)</p><p class="P159"><span class="T465">the entire script file can be</span>:</p><p class="Code">f=/etc/centos-release<br/>[ -r $f ] &amp;&amp; read c r v x &lt; $f &amp;&amp;<br/> [[ $c == CentOS &amp;&amp; $v == 6.* ]]</p><p class="P274">For Mint Linux (e.g. version 18), the file is:</p><p class="Code">grep -sq RELEASE=18 /etc/linuxmint/info</p><p class="P169">For MacOS (any recent version), the file is:</p><p class="Code">[ "$(uname -s)" = Darwin ] &amp;&amp; which -s sw_vers &amp;&amp;<br/> vers=`sw_vers -productVersion |<br/>    sed 's/^\([0-9][0-9]*\.[0-9][0-9]*\).*/\1/' | tr . _` &amp;&amp;<br/>    [ macos$vers = $(basename $(dirname $0)) ]</p><p class="P275">For Red Hat 5 Linux (not currently supported due to old C++ compilers) the following script works, which is careful to avoid the symbolic links to <span class="Code">/etc/redhat-release</span> that exist on CentOS systems:</p><p class="Code">f=/etc/redhat-release<br/>[ -r $f -a ! -L $f ] &amp;&amp; read r x v y &lt; $f &amp;&amp;<br/> [[ "$c" == R* &amp;&amp; "$v" == 5.* ]]</p><p class="P275">Since all scripts are invoked explicitly using the <span class="Code">bash</span> shell, no execute permission or initial <span class="Code">#!/bin/bash</span> line is necessary. <span class="T466">OpenCPI has an explicit requirement for the </span><span class="Code">bash</span><span class="T466"> shell on all development platforms.</span></p><h4 class="P413"><a id="a_4_1_2_3_Platform_Package_Installation_Script"><span class="heading_numbering">4.1.2.3</span></a>Platform Package Installation Script</h4><p class="P160">The <span class="Code"><span class="T5">&lt;platform&gt;</span></span><span class="Code">-packages.sh</span> script, invoked using <span class="Code">bash</span>, is required for platforms that use or require <span class="T476">standard packaged software, prebuilt and </span>globally installed from a (usually network-based) software package repository. It has two functions:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>install the required software packages from the repository<br/><span style="margin-left:0cm"/><span class="T5"></span><span class="T56">or</span><span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>list the required software packages on standard output<span class="odfLiEnd"/></p></li></ul><p class="P162">If the single argument to this script is <span class="Code">list</span>, then the second, listing function is requested, otherwise the installation of packages is requested. <span class="T504">The listing output can have multiple lines, which implies that the packges on each line must be installed before those on following lines.</span></p><p class="P162"><span class="T468">Since these packages are installed globally, the installation commands usually require administrative permissions (e.g. using </span><span class="Code">sudo</span><span class="T468">).</span></p><p class="P160">The existing scripts for CentOS, Ubuntu, Mint or MacOS platforms are good examples. In general the script is roughly:</p><p class="Code">PKGS=a b c d # these are the required packages<br/>[ $1 = list ] &amp;&amp; echo $PKGS &amp;&amp; exit 0<br/><span class="Code"><span class="T5">&lt;install-command&gt;</span></span> $PKGS</p><p class="P161">For CentOS and RedHat systems, the &lt;install-command&gt; is:</p><p class="Code"><span class="T468">sudo </span>yum -<span class="T468">y </span>install</p><p class="P163">On Debian or Ubuntu or Mint Linux systems, the &lt;install-command&gt; is:</p><p class="Code">sudo apt install -y</p><p class="P277">On MacOS using the macports package management system, the command would be:</p><p class="Code">sudo port install</p><p class="P277">Any platform-specific software required for OpenCPI must either be installed by this script (for globally installed prebuilt packages from a repository), or using what OpenCPI calls <span class="FirstEmphasis">prerequisite installations</span>, which are described next.</p><p class="P276">Since <span class="T468">these</span> scripts are invoked explicitly using the <span class="Code">bash</span> shell, no execute permission or initial <span class="Code">#!/bin/bash</span> line is necessary <span class="T468">(but not precluded)</span>. <span class="T466">OpenCPI has an explicit requirement for the </span><span class="Code">bash</span><span class="T466"> shell on all development platforms.</span></p><h4 class="P413"><a id="a_4_1_2_4_Prerequisite_Installation_Script"><span class="heading_numbering">4.1.2.4</span></a>Prerequisite Installation Script</h4><p class="P164">If the <span class="Code">OcpiPlatformPrerequisites</span> variable is set (not empty) in the platform definition file, an installation script for each prerequisite is required to be present in the platform's directory, with the name <span class="Code">install-</span><span class="Code"><span class="T5">&lt;prerequisite&gt;</span></span><span class="Code">.sh</span>. E.g., if the variable assignment is:</p><p class="Code">OcpiPlatformPrerequisites=preqx preqy preqz</p><p class="P164">then scripts named:</p><p class="Code">install-preqx.sh install-preqy.sh install-preqz.sh</p><p class="P164">must all be present.</p><p class="P478">Prerequisites are installed in an OpenCPI directory so that they do not interfere with other global software installations and are thus considered part of the OpenCPI installation (or sand box). Both runtime library prerequisites (for any platform) and tool prerequisites (for executing on development platforms) are installed there.</p><ul><li><p class="P441" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>This directory's default location in the <span class="Code">prerequisites/</span> subdirectory of the source tree. This may be overriden by setting the <span class="Code">OCPI_PREREQUISITES_INSTALL_DIR</span> if the default is unacceptable.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T225">In an RPM OpenCPI distribution (prebuilt, installed globally) it is /</span><span class="Code">opt/opencpi/prerequisites</span><span class="T477">.</span><span class="odfLiEnd"/></p></li></ul><p class="P21"><span class="T477">In a source code installation, prerequisites are built and installed in the source tree itself, in the respective </span><span class="Code">prerequisites-build/</span><span class="T477"> and </span><span class="Code">prerequisites/</span><span class="T225"> subdirectories. Thus these packages do not interfere with other global software installations or other OpenCPI installations/versions. Both runtime library prerequisites and tool prerequisites are typically installed here.</span></p><p class="P281">This script should<span class="T479"> </span>follow the pattern of other install scripts in the <span class="Code">scripts</span> directory <span class="T479">of the OpenCPI framework (e.g. </span><span class="Code">install-gmp.sh</span><span class="T479">)</span>, in particular:</p><ul><li><p class="P442" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Ensure that the <span class="Code">OCPI_CDK_DIR</span> environment variable is set.<span class="odfLiEnd"/></p></li><li><p class="P443" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Sourc<span class="T480">e</span> the <span class="Code">$OCPI_CDK_DIR/scripts/setup-</span><span class="Code"><span class="T505">prerequisite</span></span><span class="Code">.sh</span> script <span class="T499">with appropriate arguments.</span><span class="odfLiEnd"/></p></li><li><p class="P444" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T481">Install</span> the <span class="T498">resulting files of the </span>package in <span class="Code">$OCPI_PREREQUISITES_INSTALL_DIR</span><span class="Code"><span class="T5">/&lt;</span></span><span class="Code"><span class="T57">prerequisite</span></span><span class="Code"><span class="T5">&gt;</span></span><span class="T482">.</span><span class="odfLiEnd"/></p></li><li><p class="P445" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Install any resulting platform-independent header files in <span class="Code">$OCPI_PREREQUISITES_INSTALL_DIR</span><span class="Code"><span class="T5">/&lt;</span></span><span class="Code"><span class="T57">prerequisite</span></span><span class="Code"><span class="T5">&gt;</span></span><span class="Code"><span class="T188">/</span></span><span class="Code"><span class="T189">include</span></span><span class="T482">.</span><span class="odfLiEnd"/></p></li><li><p class="P444" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T483">Install platform-specific files in the </span><span class="Code">include</span><span class="T498">, </span><span class="Code">lib</span><span class="T498"> and </span><span class="Code">bin</span><span class="T498"> subdirectories of:<br/></span><span class="Code">$OCPI_PREREQUISITES_INSTALL_DIR/</span><span class="Code"><span class="T5">&lt;name&gt;</span></span><span class="Code">/</span><span class="Code"><span class="T498">$OCPI_TARGET_DIR</span></span><span class="T499">.</span><span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Build both dynamic and static versions of runtime libraries, and build the static libraries with PIC options enabled. <span class="T507">[A more optimal solution would be to support both PIC and non-PIC static libraries.]</span><span class="odfLiEnd"/></p></li></ul><p class="P170">The <span class="Code">$OCPI_CDK_DIR/setup-</span><span class="Code"><span class="T506">prerequisite</span></span><span class="Code">.sh</span> script, <span class="T500">supplied by OpenCPI, </span>which is <span class="T5">sourced,</span> takes these arguments:</p><ol><li><p class="P401" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">1.</span>The target platform (the platform on which execution takes place). This is passed in from the first argument of the install script, e.g. <span class="T358">"</span><span class="Code">$1</span><span class="Code"><span class="T484">"</span></span> (quoted <span class="T506">to allow empty</span>).<span class="odfLiEnd"/></p></li><li><p class="P403" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">2.</span>The name of the prerequisite, e.g. <span class="Code">gmp</span>.<span class="odfLiEnd"/></p></li><li><p class="P403" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">3.</span>A short pretty description string, e.g. <span class="T358">"</span><span class="Code">Extended Precision Library</span><span class="Code"><span class="T484">"</span></span>.<span class="odfLiEnd"/></p></li><li><p class="P402" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">4.</span><span class="T478">The URL (or absolute pathname) to download the file from, without the filename, e.g.: </span><span class="Code">https://ftp.gnu.org/gnu/gmp<br/></span><span class="T485">If the URL ends in </span><span class="Code">.git</span><span class="T485">, it will be cloned rather than downloaded and unpacked.</span><span class="odfLiEnd"/></p></li><li><p class="P399" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">5.</span><span class="T480">The downloaded file name (if a downloaded file), e.g. </span><span class="Code">gmp-6.1.2.tar.x</span><span class="Code"><span class="T506">z</span></span><span class="Default_20_Paragraph_20_Font"><span class="T506">, or, if cloning a git repository, the tag or branch to check out.</span></span><span class="odfLiEnd"/></p></li><li><p class="P400" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">6.</span><span class="T478">The top-level directory created when the download file is unpacked, e.g.:<br/> </span><span class="Code">gmp-6.1.2</span> <span class="T509">or the git repository top level directory. Use a single period (</span><span class="Code">.</span><span class="T509">) if the download is only files, with no directory.</span><span class="odfLiEnd"/></p></li><li><p class="P404" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">7.</span>Whether the prerequisite should be cross-compiled, or only used on development hosts. A value of <span class="Code">1</span> indicates runtime and cross compiled for non-development platforms. <span class="Code">0</span> means only build for development platforms.<span class="odfLiEnd"/></p></li></ol><p class="P284">This <span class="T509">setup </span>script performs downloading (or git cloning), caching downloads, creating the necessary directories, accessing the tool chain for the platform, and defining convenience function<span class="T510">s and variables</span> for use later in the script.</p><p class="P283">After th<span class="T508">e</span> setup script is sourced <span class="T510">the environment is:</span></p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T510">t</span>he current working directory is a platform-specific build <span class="T507">sub</span>directory created <span class="T512">underxoxo</span> the <span class="T507">directory created by the download/unpack, or git clone</span><span class="odfLiEnd"/></p></li><li><p class="P446" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>the <span class="Code">install_dir</span> and <span class="Code">install_exec_dir</span> variables are set to where the results of the build shoulld be installed<span class="odfLiEnd"/></p></li><li><p class="P446" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>the <span class="Code">relative_link</span> function is defined for optional use to create appropriate relative symbolic links from this build directory and the installation directory.<span class="odfLiEnd"/></p></li><li><p class="P447" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>the shell option to terminate on any error (<span class="Code">set -e</span>) is set.<span class="odfLiEnd"/></p></li><li><p class="P448" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>variables for explicit (non-autotools) compilation are set compatibly for cross compilation: <span class="Code">CC</span>, <span class="Code">CXX</span>, <span class="Code">LD</span>, <span class="Code">AR</span>.<span class="odfLiEnd"/></p></li><li><p class="P448" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>the <span class="Code">cross_host</span> variable is set appropriately for the autotools <span class="Code">--host</span> option.<span class="odfLiEnd"/></p></li><li><p class="P448" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>the cross-compilation tools are in the execution <span class="Code">PATH</span> environment variable.<span class="odfLiEnd"/></p></li></ul><p class="P287"><span class="T507">At this point the prerequisite installation script can perform an appropriate build in this directory. When the build is complete, the results are installed in the directory: </span><span class="Code">$install_dir</span> <span class="T510">and </span><span class="Code">$install_exec_dir</span><span class="T510">.</span></p><p class="P285"><span class="T509">This installation happens one of two ways. If the build uses the typical </span><span class="FirstEmphasis">autotools</span><span class="T509"> paradigm of:</span></p><p class="Code"><span class="Code">../configure; make; make install</span></p><p class="P285"><span class="T509">then the </span><span class="Code">--prefix</span><span class="T509"> and </span><span class="Code">--exec-prefix</span><span class="T509"> arguments are provided to the </span><span class="Code">configure</span><span class="T509"> script as. e.g.</span></p><p class="Code">../<span class="T509">configure<br/> --prefix=$install_dir<br/> --exec-prefix=$install_exec_dir</span></p><p class="P286">This will cause the resulting files to be installed in the correct locations (e.g. <span class="Code">$install_dir/include</span> for portable headers, and<br/><span class="Code">$install_exec_dir/(lib|bin)</span> for platform-specific files).</p><p class="P280">An example script for a prerequisite needed only on <span class="T501">most </span>development platforms, is the <span class="Code">patchelf</span> tool. The entire install script is:</p><p class="P374">version=0.9<br/>dir=patchelf-$version<br/>[ -z "$OCPI_CDK_DIR" ] &amp;&amp; <br/> echo Environment variable OCPI_CDK_DIR not set &amp;&amp; exit 1<br/>source $OCPI_CDK_DIR/scripts/setup-install.sh \<br/>    "$1" \<br/>    patchelf \<br/>    "ELF file patching utility" \<br/>    http://nixos.org/releases/patchelf/$dir \<br/>    $dir.tar.gz \<br/>    $dir \<br/>    0<br/>../configure --prefix=$<span class="T510">install_dir</span> --exec-prefix=$<span class="T510">install_exec_dir</span> \<br/> CFLAGS=-g CXXFLAGS=-g<br/><span class="T463">make &amp;&amp; make install</span></p><p class="P288">For prerequisite packages that are not set up for autotools building, the results of the build can be simply installed using the <span class="Code">relative_link</span> function which operates as a smart<span class="T511">er</span> symbolic link command analogous to the <span class="Code">ln -s</span> command. <span class="T511">Here is an excerpt from a prerequisite installation where the software package</span><span class="T511"> being installed consists of a single source file:</span></p><p class="Code">[ -z "$OCPI_CDK_DIR" ] &amp;&amp; echo Environment variable OCPI_CDK_DIR not set &amp;&amp; exit 1<br/>source $OCPI_CDK_DIR/scripts/setup-prerequisite.sh \<br/>    "$1" \<br/>    inode64 \<br/>    "fix for 32 bit binaries running on 64-bit file systems" \<br/>    https://www.tcm.phy.cam.ac.uk/sw \<br/>    inode64.c \<br/>    . \<br/>    0<br/>...<br/>gcc -c -fPIC -m32 ../inode64.c<br/>ld -shared -melf_i386 -o inode64.so inode64.o<br/>relative_link inode64.so $install_exec_dir/lib</p><p class="P289">For runtime prerequisite packages that need to be cross compiled, the <span class="Code">cross_host</span> variable is used in the <span class="Code">../configure</span> command, e.g.:</p><p class="P375">../configure --prefix=$<span class="T510">install_dir</span> --exec-prefix=$<span class="T510">install_exec_dir</span>\<br/>       ${cross-host+--host=$cross_host}\</p><p class="P289">With prerequisites <span class="T512">that are </span>not set up for autotools, the compilation commands can be used directly, e.g.:</p><p class="P317">$CXX -c *.c; $AR -rs foo.a *.o</p><p class="P289">[ Here we can open up the platform-definition variables universe for more advanced cases. And also evolve from environment variables to platform variables.]</p><h3 class="P383"><a id="a_4_1_3_Summary_for_Enabling_Development_for_a_New_GPP_Platform"><span class="heading_numbering">4.1.3</span></a><a id="__RefHeading__17656_2116501284"/>Summary for Enabling Development for a <span class="T117">N</span>ew GPP <span class="T117">P</span>latform</h3><ul><li><p class="P449" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T160">Create </span><span class="T160">the platform's directory in a project.</span><span class="odfLiEnd"/></p></li><li><p class="P450" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Create the platform definition file.<span class="odfLiEnd"/></p></li><li><p class="P449" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T502">For development </span><span class="T502">hosts, create the &lt;platform&gt;-check.sh script.</span><span class="odfLiEnd"/></p></li><li><p class="P450" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>If needed, create the &lt;platform&gt;-packages.sh script.<span class="odfLiEnd"/></p></li><li><p class="P450" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>If needed, create the package-specific prerequisite installation scripts.<span class="odfLiEnd"/></p></li><li><p class="P451" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Build the OpenCPI prerequisites to ensure all the scripts are functional.<span class="odfLiEnd"/></p></li><li><p class="P449" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Build the OpenCPI <span class="T502">framework</span> and make adjustments to the code for issues that arise.<span class="odfLiEnd"/></p></li><li><p class="P449" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T502">Successfully run </span><span class="Code">./install-</span><span class="Code">opencpi.sh</span><span class="T502"> on the development host.</span><span class="odfLiEnd"/></p></li><li><p class="P449" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T502">Successfully run </span><span class="Code">./install-opencpi.sh </span><span class="Code"><span class="T5">&lt;platform&gt;</span></span><span class="T502"> for cross-developed hosts.</span><span class="odfLiEnd"/></p></li><li><p class="P449" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T502">Successfullt run .</span><span class="Code">/scripts/test-opencpi.sh</span><span class="T502"> on embedded hosts</span><span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Build the OpenCPI core and make adjustments to the code for issues that arise.<span class="odfLiEnd"/></p></li></ul><h2 class="Heading_20_2"><a id="a_4_2_Enabling_Execution_for_GPP_Platforms"><span class="heading_numbering">4.2</span></a><a id="__RefHeading__1029_1060509377"/>Enabling Execution for GPP <span class="T117">P</span>latforms</h2><p class="P17">Execution on GPP platforms requires some command line tools, libraries, a<span class="T226">nd</span> device drivers. The OpenCPI <span class="T503">framework </span>libraries and command-line tools are built using the appropriate compiler <span class="T235">as installed above. Once the development host has been enabled, and the OpenCPI core and example components have been built, a few additional steps are required to enable </span><span class="T25">execution</span><span class="T235"> on the platform.</span></p><p class="P120">Several <span class="T227">OpenCPI </span>runtime libraries have aspects that use conditional compilation depending on the system or CPU being target<span class="T228">ed</span>. The current OpenCPI core libraries have significant Linux dependencies and in several files there is conditional code between Linux and MacOS (such as low level networking details). There are a few areas that have conditional code depending on the CPU being used, such as realtime high resolution timing registers in the CPU<span class="T236">. These customizations are not well defined. For new CPU architectures and new operating systems not based on Linux, the code must be examined for these issues, which will typically cause compilation errors.</span></p><p class="P121">Setting up a development system for execution is nearly automatic once the build environment is set up and any required code changes in the OpenCPI runtime libraries. For execution on development systems, loading the kernel driver (using <span class="T395">the </span><span class="Code">ocpidriver</span> command), and setting the PATH environment variable correctly, and setting the OCPI_CDK_DIR environment variable is usually sufficient. These are normal installation steps.</p><p class="P153">The kernel driver is in fact only necessary when accessing other platforms via the system bus. If the GPP platform has no such bus/fabric, the kernel driver is not necessary.</p><p class="P121">For embedded systems, the setup is more customized.</p><h3 class="P384"><a id="a_4_2_1_Creating_a_Bootable_Image_or_SD_card_for_an_Embedded_Platform"><span class="heading_numbering">4.2.1</span></a><a id="__RefHeading___Toc38776_1517956095"/>Creating a Bootable Image or SD card for an Embedded Platform</h3><p class="P150">[This section is incomplete. An example for Zynq platforms are the scripts in the platforms/zynq directory].</p><h1 class="Heading_20_1"><a id="a_5_Enabling_FPGA_Platforms"><span class="heading_numbering">5</span></a><a id="__RefHeading__1033_1060509377"/>Enabling FPGA Platforms</h1><p class="P186">Whereas <span class="T113">GPP platforms have operating systems that OpenCPI uses to interface with the hardware surrounding the processor, FPGA platforms do not. OpenCPI provides an infrastructure on FPGAs, which requires FPGA logic that is specific to the platform, analogous to a board support package that adapts an embedded operating system to a given hardware board and associated devices.</span></p><p class="P191"><span class="T305">Consistent with the definition of </span><span class="FirstEmphasis">platform</span><span class="T305"> given earlier, here w</span>e <span class="T305">more narrowly </span>define an FPGA <span class="T61">platform</span> as a particular, single FPGA on some hardware (board). If a board has multiple OpenCPI-usable FPGA<span class="T229">s</span>, each is a platform and each may host a container in which <span class="T237">components (actually: </span><span class="T26">worker instances</span><span class="T237">) </span>execute. <span class="T396">An OpenCPI-usable FPGA is one that can host user-written workers executing in an OpenCPI HDL container.</span></p><p class="P187">An FPGA <span class="T264">simulator may also be an FPGA platform</span>, which is also a place where OpenCPI HDL <span class="T396">workers</span> may execute, with the same infrastructure as physical FPGA platforms. </p><p class="P252">When an SoC, like the Xilinx Zynq chip, contains a section of FPGA logic as well as processor cores, the FPGA part is an FPGA platform and the GPP processor core(s) are a GPP software platform. Thus the SoC is indeed a system on chip: a system with two platforms and an interconnect between them.</p><p class="P219">Analogous to preparing the support for a GPP platform, enabling an FPGA platform involves steps <span class="T114">to enable the development environment, and steps to enable the run-time/execution environment.</span></p><p class="P219"><span class="T114">Enabling development for a platform involves</span>:</p><ul><li><p class="P452" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Installing and integrating a development tool chain that can target the FPGA <span class="T267">device </span>on the platform <span class="T305">(when one is not already installed that applies to the new platform).</span><span class="odfLiEnd"/></p></li><li><p class="P452" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Verifying that the integrated tool chain can process and build all the core OpenCPI FPGA code and portable components when targeting the FPGA platform's part and part family.<span class="odfLiEnd"/></p></li></ul><p class="P111">Enabling runtime execution for a <span class="T397">non-simulation </span>platform involves:</p><ul><li><p class="P452" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Writing specific new VHDL code that supports the particulars of the hardware attached to the FPGA on the platform.<span class="odfLiEnd"/></p></li><li><p class="P453" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Updating software drivers to load/unload configuration bitstreams.<span class="odfLiEnd"/></p></li><li><p class="P452" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Verifying that the various <span class="T397">platform-independent</span> FPGA test applications execute on the platform.<span class="odfLiEnd"/></p></li></ul><p class="P189"></p><h2 class="P428"><a id="a_5_1_Physical_FPGA_Platforms"><span class="heading_numbering">5.1</span></a><a id="__RefHeading___Toc17468_1235158909"/>Physical FPGA Platforms</h2><p class="P191">Platforms are specific FPGAs <span class="T115">on a board </span>connected locally to:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Local I/O devices: ADC, DAC, DRAM, Flash, G<span class="T200">b</span>E, etc. <span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Interconnects: PCI<span class="T200">e</span>, Ethernet, etc. <span class="T115">used </span>to talk to other <span class="T114">OpenCPI platforms</span> <span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Slots: FMC, HSMC, mezzanine card slots. <span class="odfLiEnd"/></p></li></ul><p class="Body"><span class="T229">For example, </span>a Xilinx ML605 has PCI Express <span class="T229">interconnect</span>, DRAM, and 2 FMC slots <span class="T229">(and other minor devices).</span></p><p class="P189">For each device on a platform, specific development may be required (described in the Device Development section below). <span class="T115">In</span> many cases existing device support may be reused, since OpenCPI FPGA device support is typically done in a way that is sharable across platforms.</p><p class="P253">Ideally, <span class="T115">new </span>device support is developed such that it can be reused across platforms.</p><p class="P190">Physical FPGA platforms are based on a particular type of FPGA chip: e.g., a Xilinx ML605 development board has a Virtex6 FPGA (xc6vlx240t), with a speed grade and a package.</p><p class="P220">Examples of physical FPGA platforms are:</p><p class="Table_20_Caption_20__28_before_29_"><span class="T398">Table </span><span class="T398"><a href="#refTable1">6</a></span><span class="T398">: Example FPGA/HDL Platforms</span></p><table border="0" cellspacing="0" cellpadding="0" class="Table4"><colgroup><col width="97"/><col width="77"/><col width="138"/><col width="410"/></colgroup><tr><td style="text-align:left;width:0.8729in; " class="Table4_A1"><p class="P369">Board</p></td><td style="text-align:left;width:0.691in; " class="Table4_A1"><p class="P369">Part</p></td><td style="text-align:left;width:1.2451in; " class="Table4_A1"><p class="P369">Interconnect(s)</p></td><td style="text-align:left;width:3.691in; " class="Table4_D1"><p class="P367">Description</p></td></tr><tr><td style="text-align:left;width:0.8729in; " class="Table4_A2"><p class="P334"><span class="Code"><span class="T94">ML605</span></span></p></td><td style="text-align:left;width:0.691in; " class="Table4_A2"><p class="P331">Virtex6</p></td><td style="text-align:left;width:1.2451in; " class="Table4_A2"><p class="P331">PCIe</p></td><td style="text-align:left;width:3.691in; " class="Table4_D2"><p class="P331">Xilinx PCIe-based Virtex6 development board, with 2 FMC slots</p></td></tr><tr><td style="text-align:left;width:0.8729in; " class="Table4_A2"><p class="P334"><span class="Code"><span class="T94">ZedBoard</span></span></p></td><td style="text-align:left;width:0.691in; " class="Table4_A2"><p class="P331">Zynq/PL</p></td><td style="text-align:left;width:1.2451in; " class="Table4_A2"><p class="P331">AXI internal</p></td><td style="text-align:left;width:3.691in; " class="Table4_D2"><p class="P336"><span class="T95">Digilent Zynq Development Board<br/></span><span class="T83">HDL Platform is the </span><span class="T101">PL side of the Zynq SoC</span><span class="T83">, with the PL-attached devices and one FMC slot</span></p></td></tr><tr><td style="text-align:left;width:0.8729in; " class="Table4_A2"><p class="P321"><span class="Code"><span class="T94">ALST4</span></span></p></td><td style="text-align:left;width:0.691in; " class="Table4_A2"><p class="P331">Stratix4</p></td><td style="text-align:left;width:1.2451in; " class="Table4_A2"><p class="P331">PCIe</p></td><td style="text-align:left;width:3.691in; " class="Table4_D2"><p class="P321"><span class="T97">Intel/</span><span class="T94">Altera PCIe-based Stratix4 development board with 2 HSMC slots.</span></p></td></tr><tr><td style="text-align:left;width:0.8729in; " class="Table4_A2"><p class="P321"><span class="Code"><span class="T94">ZC706</span></span></p></td><td style="text-align:left;width:0.691in; " class="Table4_A2"><p class="P331">Zynq/PL</p></td><td style="text-align:left;width:1.2451in; " class="Table4_A2"><p class="P331">AXI Internal<br/>PCIe external</p></td><td style="text-align:left;width:3.691in; " class="Table4_D2"><p class="P321"><span class="T94">Xilinx PCIe-based Zynq development board with </span><span class="T95">2 FMC slots.</span></p><p class="P337"><span class="T83">HDL Platform is the </span><span class="T101">PL side of the Zynq SoC</span><span class="T83">, with the PL-attached devices, </span><span class="T96">two</span><span class="T83"> FMC slot</span><span class="T96">s</span><span class="T83">, </span><span class="T95">and a</span><span class="T96">n</span><span class="T95"> attachment to </span><span class="T96">the </span><span class="T95">PCIe </span><span class="T96">interconnect.</span></p></td></tr></table><ul><li><p class="P454" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="odfLiEnd"/></p></li></ul><h2 class="P428"><a id="a_5_2_Simulator_FPGA_Platforms"><span class="heading_numbering">5.2</span></a><a id="__RefHeading___Toc17470_1235158909"/>Simulator FPGA Platforms</h2><p class="P188">OpenCPI provides a software <span class="T378">runtime</span> infrastructure to make execution on simulators as similar as possible to execution on phy<span class="T114">si</span>cal FPGAs, without simulating any external device-related logic. <span class="T116">The simulation execution environment makes execution on different simulators also similar to each other. Multiple simulator instances may execute simultaneously subject to any license restrictions allowing only a certain number of simulator instances to run at the same time.</span></p><p class="P220">At the time of this writing, only mixed-language simulators (VHDL and Verilog) may be enabled and used with OpenCPI.</p><p class="P220">Examples of supported FPGA simulators include:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Xilinx Isim <span class="T399">from ISE 14.7</span><span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Mentor Modelsim <span class="T399">DE 10.2</span><span class="odfLiEnd"/></p></li><li><p class="P455" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Xilinx Vivado Xsim 2016.4<span class="odfLiEnd"/></p></li></ul><p class="P293">Other simulators that may be supported include:</p><ul><li><p class="P456" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Aldec<span class="odfLiEnd"/></p></li></ul><h2 class="P429"><a id="a_5_3_Enabling_Development_for_FPGA_Platforms"><span class="heading_numbering">5.3</span></a><a id="__RefHeading__1035_1060509377"/>Enabling Development for FPGA <span class="T117">P</span>latforms</h2><h3 class="Heading_20_3"><a id="a_5_3_1_Installing_the_Tool_Chain"><span class="heading_numbering">5.3.1</span></a><a id="__RefHeading__17658_2116501284"/>Installing the <span class="T117">T</span>ool <span class="T117">C</span>hain</h3><p class="P208"><span class="T306">For tools not currently supported by OpenCPI, d</span>ocument the basic process of obtaining and installing the tools, highlighting any options or configurations that must be specialized, customized, or simply required for using OpenCPI. Licensing is also an issue for many FPGA tools.</p><p class="P210">Note that OpenCPI execute<span class="T268">s</span> FPGA tools in wrapper scripts that perform any necessary initialization or setup, including license setup. Thus, for OpenCPI, there is no need for login-time startup scripts. In fact, such scripts can actually cause problems in many cases since OpenCPI frequently invokes multiple alternative tool sets under a single build command. <span class="T268">P</span>olluting your environment with settings from multiple tools and vendors is frequently a source of problems.</p><p class="P254">For OpenCPI development it is recommended to remove any such automatic setup at login items that the tools installation process inserts into your login script(s), and put them in an a separate script that is used as needed.</p><p class="P255">Some FPGA tool chain installations include a software tool chain for embedded cores on SoCs. This means that one tool installation supports both the FPGA platform and the GPP platform. E.g. a Xilinx ISE installation may include the EDK sub-package that supports cross-compilation for the ARM cores on the Zynq SoC.</p><h3 class="Heading_20_3"><a id="a_5_3_2_Integrating_the_Tool_Chain_into_the_OpenCPI_HDL_Build_Process"><span class="heading_numbering">5.3.2</span></a><a id="__RefHeading__17660_2116501284"/>Integrating the <span class="T117">T</span>ool <span class="T117">C</span>hain into the OpenCPI <span class="T161">HDL B</span>uild <span class="T117">P</span>rocess</h3><p class="P209">[This is a large topic that is not <span class="T161">fully </span>documented].</p><p class="P192">This process includes enabling the OpenCPI FPGA build process to use the right tools to target the part family of the FPGA device on the platform. For example, on the <span class="T400">z</span>ed platform, the family of the FPGA part is zynq. On the <span class="T400">ml</span>605 platform, the family of the FPGA part is virtex6. The required tools for a platform's FPGA may already be installed and integrated, and may already support the particular part family of the platform's FPGA. If not, that support must be added to the integration of those tools.</p><p class="P192">So the integration process is:</p><ol><li><p class="List_20_Number" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">8.</span>If the required tools are not <span class="T400">currently</span> integrated with OpenCPI, they must be <span class="T271">integrated (not a small job)</span>.<span class="odfLiEnd"/></p></li><li><p class="List_20_Number" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">9.</span>If the required tools are <span class="T400">currently</span> integrated with OpenCPI, but do not yet support the part family, that support must be added.<span class="odfLiEnd"/></p></li></ol><p class="P192">The database of part families, and their relationships to tools and <span class="T400">vendors</span>, is in the file:</p><p class="Code">tools/cdk/include/hdl/hdl-targets.mk</p><p class="P211">The scripts that wrap and execute FPGA tools are found in <span class="T269">the directory:</span></p><p class="Code">tools/cdk/include/hdl</p><h3 class="Heading_20_3"><a id="a_5_3_3_Building_All_the_Existing_Vendor-independent_HDL_Code"><span class="heading_numbering">5.3.3</span></a><a id="__RefHeading__17662_2116501284"/>Building <span class="T117">A</span>ll the <span class="T117">E</span>xisting <span class="T401">Vendor-independent</span> HDL <span class="T117">C</span>ode</h3><p class="P221">Nearly all HDL code (mostly VHDL) in OpenCPI is portable and can be built (compiled and synthesized) for all part families and vendors and simulators. This portable HDL code can be built using the make hdlportable command in the top level directory of OpenCPI, supplying the targets (part families) <span class="T401">is </span>required.</p><p class="P168">Here is a command that builds all the portable code in OpenCPI <span class="T161">for currently supported part families (known as </span><span class="Code">HdlTargets</span><span class="T161"> in the OpenCPI FPGA build process):</span></p><p class="Code">make hdlportable <span class="T270">\<br/> </span>HdlTargets='isim modelsim virtex6 virtex5 <span class="T270">\<br/>       </span>stratix4 stratix5 zynq spartan3adsp'</p><p class="P256">This build command builds all primitive libraries and cores as well as all HDL workers in the OpenCPI core tree. It stops short of building anything specific to an HDL platform.</p><p class="P193">Some of the code built using the above command is explicitly labeled to <span class="T61">only build</span> for certain targets or to <span class="T61">not build</span> for some targets, but most is truly portable and will build for all targets. Once this build command succeeds for the target (part family) <span class="T401">of</span> the platform, you can proceed with the steps below to write the HDL code necessary to enable execution on the platform.</p><h3 class="Heading_20_3"><a id="a_5_3_4_Scripts_for_HDL_Platforms"><span class="heading_numbering">5.3.4</span></a><a id="__RefHeading___Toc22146_1235158909"/>Scripts for HDL Platforms</h3><p class="P222">For physical platforms (not simulation), there are two scripts that must be also placed in the platform's directory, <span class="T42">if they apply to the platform</span>:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>A JTAG support script to enable JTAG-based bitstream loading, <span class="T162">whose name is:<br/></span><span class="Code">jtagSupport_</span><span class="Code"><span class="T5">&lt;platform&gt;</span></span> <span class="T307">(only for platforms with JTAG bitstream loading)</span><span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>A boot-flash loading script to enable scripted loading of bitstreams to the boot flash, whose name is: <span class="Code">loadFlash_&lt;platform&gt;</span> (for platforms with boot-flash loading capabilities)<span class="odfLiEnd"/></p></li></ul><p class="P222">In some cases the appropriate script might be already be written for a different platform, in which case one platform's script can be a symbolic link to the other. In other cases there might be a vendor script (e.g. for all Xilinx or all <span class="T406">Intel/</span>Altera) which may live in the <span class="Code">hdl/vendors/</span><span class="Code"><span class="T5">&lt;vendor&gt;</span></span> directory.</p><p class="P212"><span class="T163">For simulation platforms there must be a script to invoke the simulator from the OpenCPI runtime framework. This script must be called: </span><span class="Code">runSimExec.</span><span class="Code"><span class="T5">&lt;platform&gt;</span></span> <span class="T377">and live in the platform's </span><span class="Code">hdl/platforms/</span><span class="Code"><span class="T5">&lt;platform&gt;</span></span><span class="T377"> directory.</span></p><h2 class="P430"><a id="a_5_4_Enabling_Execution_for_FPGA_platforms"><span class="heading_numbering">5.4</span></a><a id="__RefHeading__1037_1060509377"/>Enabling Execution for <span class="T197">FPGA</span> platforms</h2><p class="P27">This section assumes the reader is familiar with component and application development with OpenCPI, including developing HDL <span class="T122">application </span>workers and assemblies <span class="T118">as described in the </span><span class="FirstEmphasis">OpenCPI HDL Development Guide</span><span class="T118">.</span></p><p class="P27">An OpenCPI HDL hardware platform is an FPGA with associated devices and slots attached to its pins. <span class="T402">Supporting a platform requires </span>determin<span class="T402">ing </span>whether the types of devices and slots attached to the FPGA are already supported by OpenCPI.</p><p class="P27"><span class="T402">I</span>f the devices <span class="T164">attached to the FPGA </span>are not yet supported in OpenCPI, that support must also be added. <span class="T164">Device support in OpenCPI is generally portable (i.e. the device support code can be used to support the same device on different platforms and cards). This type of device support is done separate from a platform or card so it is naturally reused on other platforms or cards. Some device support is very platform-specific and is associated with a particular platform. The device support process is described in the </span><a href="#a_Device_Support_for_FPGA_Platforms" class="Internet_20_link"><span class="T164">Device Support for FPGA Platforms</span></a><span class="T164"> section below.</span></p><p class="P28">If a platform has slot types that are not yet supported, that support must be added. Slot types are defined by specific physical connectors, electrical signaling and direction, and pin and signal name assignments. <span class="T118">See the section </span><a href="#a_Slots__How_Cards_Plug_into_Platforms" class="Internet_20_link"><span class="T118">Slots  How Cards Plug into Platforms</span></a><span class="T118"> below.</span></p><p class="P148"><span class="T164">The term </span><span class="FirstEmphasis">card</span><span class="T164"> is used in OpenCPI to mean a card with additional devices that may be plugged into a compatible </span><span class="FirstEmphasis">slot</span><span class="T164"> on various </span><span class="FirstEmphasis">platform</span><span class="FirstEmphasis"><span class="T164">s</span></span><span class="T313">. Thus devices may be directly attached to the pins of the platform FPGA, or they may exist on a plug-in card that, when plugged into a slot, become attached to the platform FPGA. In this latter case such devices are not considered part of the platform, but part of the </span><span class="FirstEmphasis">card</span><span class="T164">, which might be plugged into a certain type of slot on any platform. See the section </span><a href="#a_Defining_Cards_Containing_Devices_that_Plug_into_Slots_of_Platforms|outline" class="Internet_20_link"><span class="T164">Defining Cards Containing Devices that Plug into Slots of Platforms|outline</span></a></p><p class="P126">The asset types in a project that support HDL platforms are:</p><p class="IndentHang"><span class="FirstEmphasis">HDL Device Worker</span>  <span class="FirstEmphasis"><span class="T181">a</span></span><span class="FirstEmphasis"><span class="T182"> specific type of HDL worker </span></span><span class="FirstEmphasis"><span class="T183">that </span></span><span class="FirstEmphasis"><span class="T184">support</span></span><span class="FirstEmphasis"><span class="T183">s</span></span><span class="FirstEmphasis"><span class="T184"> external devices attached to FPGAs</span></span></p><p class="IndentHang"><span class="FirstEmphasis">HDL Platform Worker</span>  <span class="FirstEmphasis"><span class="T181">a</span></span><span class="FirstEmphasis"><span class="T182"> specific type of HDL worker </span></span><span class="FirstEmphasis"><span class="T181">providing</span></span><span class="FirstEmphasis"><span class="T182"> infrastructure for implementing control/data interfaces to devices </span></span><span class="FirstEmphasis"><span class="T181">and interconnects </span></span><span class="FirstEmphasis"><span class="T182">external to the FPGA </span></span><span class="FirstEmphasis"><span class="T185">or simulator</span></span><span class="FirstEmphasis"><span class="T182"> </span></span><span class="FirstEmphasis"><span class="T181">(e.g. PCI Express, Clocks)</span></span></p><p class="IndentHang"><span class="FirstEmphasis">HDL Slot Type Definition</span>  a specification of the pins and signals that are present in a type of slot that may be present on platforms, into which compatible cards may be plugged.</p><p class="IndentHang"><span class="FirstEmphasis">HDL Card Definition</span>  a specification that includes the slot type of a card, the devices present, and how they are wired to the slot.</p><p class="IndentHang"><span class="FirstEmphasis">HDL Platform Configuration</span>  <span class="T315">a prebuilt (presynthesized) assembly of device-level HDL workers that represent a particular configuration of device support modules for a given HDL platform.</span><span class="FirstEmphasis"><span class="T182"> </span></span><span class="FirstEmphasis"><span class="T186">The HDL code is </span></span><span class="FirstEmphasis"><span class="T69">automatically generated</span></span><span class="FirstEmphasis"><span class="T186"> from a brief description in XML</span></span></p><p class="P126">All these asset types are initially created using the <span class="Code">ocpidev</span> tool.</p><p class="P125">The directories (in any project) where platform support files are placed <span class="T314">(by </span><span class="Code">ocpidev</span><span class="T314">) </span>are:</p><p class="IndentHang"><span class="Code">hdl/devices</span>  a component library for portable device workers and proxies</p><p class="IndentHang"><span class="Code">hdl/cards</span>  a component library for card-specific device workers</p><p class="IndentHang"><span class="Code">hdl/cards/specs</span>  a directory where cards and slot types are defined</p><p class="IndentHang"><span class="Code">hdl/platforms</span>  a directory where platform workers <span class="T314">and associated platform configurations </span>are placed</p><p class="P338"><span class="Code">hdl/platforms/</span><span class="Code"><span class="T5">&lt;platform&gt;</span></span>  a platform worker's directory that also contains its platform configuration</p><p class="IndentHang">h<span class="Code">dl/platforms/</span><span class="Code"><span class="T5">&lt;platform&gt;</span></span><span class="Code">/devices</span>  a component library for platform-specific device workers and proxies for <span class="Code"><span class="T5">&lt;platform&gt;</span></span></p><p class="P29">HDL <span class="T313">p</span>latform support starts with deciding on a name for the platform (usually a lower-cased version of the name used by the vendor of the platform), and <span class="T316">using </span><span class="Code">ocpidev create </span><span class="Code"><span class="T425">hdl </span></span><span class="Code">platform</span><span class="T316"> to </span>creat<span class="T316">e</span> a directory <span class="T316">and associated files using the ocpidev tool</span>. In that directory there <span class="T316">will</span> be a<span class="T316">n initial </span><span class="Code">Makefile,</span><span class="T316"> an initial platform description XML file and an initial source code skeleton for the platform worker.</span></p><p class="P31">In summary, the steps to enabling an HDL platform for execution are, (assuming the development tools are enabled):</p><ul><li><p class="P457" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Take inventory of the platform by identifying its interconnects, method of reprogramming, device, and slots<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Define the platform worker, with associated hardware-related metadata <span class="T272">and files</span>.<span class="odfLiEnd"/></p><ul><li><ul><li><ul><li><ul><li><ul><li><p class="P458" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Address/configure interconnect issues of the platform worker<span class="odfLiEnd"/></p></li></ul></li></ul></li></ul></li><li><p class="P460" style="margin-left:cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Build the platform worker (perhaps a skeleton) and a simple complete bitstream<span class="odfLiEnd"/></p></li></ul></li></ul></li><li><p class="P459" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Implement reprogramming (a.k.a. bitstream loading) of the FPGA<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Implement the platform worker and perform basic tests, with <span class="T5">no</span> devices enabled.<span class="odfLiEnd"/></p></li><li><p class="P461" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Define any new slot types and add them to OpenCPI.<span class="odfLiEnd"/></p></li><li><p class="P461" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Define and establish skeletons for all new devices on the platform.<span class="odfLiEnd"/></p></li><li><p class="P460" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Define the platform with all devices and slots, build and <span class="T403">do </span>basic tests.<span class="odfLiEnd"/></p></li><li><p class="P462" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Implement any new devices for the platform, and test the platform <span class="T5">with</span> devices <span class="T119">(both pre-existing and new)</span>.<span class="odfLiEnd"/></p></li><li><p class="P463" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Test slots using supported cards.<span class="odfLiEnd"/></p></li></ul><p class="P257">The next two sections (signals and slots), define XML elements required by platforms. Following that, the specifics of platform worker XML files are detailed.</p><h3 class="P385"><a id="a_5_4_1_Signal_Declaration_XML_Elements_for_Devices__Platforms__Slots_and_Cards"><span class="heading_numbering">5.4.1</span></a><a id="__RefHeading___Toc18275_4003722483"/>Signal Declaration <span class="T121">XML Element</span>s for Devices, Platforms, Slots and Cards</h3><p class="P77">Signal <span class="T320">declaration XML </span>elements are <span class="T320">used in a number of contexts in supporting HDL platforms, cards and devices. They declare name, direction, width and other </span><span class="T320">characteristics. Any specific rules or constraints for each context are specified in the respective sections, but the common aspects of signal declarations are described here.</span></p><p class="P127">An example of a signal declaration element is:</p><p class="Code">&lt;signal output='data' width='16'/</p><p class="P78"><span class="T321">which defines an output signal array 16 wide named </span><span class="Code">data</span><span class="T321">. The attributes to a </span><span class="Code">signal</span><span class="T321"> element are: </span><span class="Code">input</span><span class="T321">, </span><span class="Code">output</span><span class="T321">, </span><span class="Code">inout</span><span class="T321">, </span><span class="Code">bidirectional</span><span class="T321">, </span><span class="Code">differential</span><span class="T321">, and </span><span class="Code">width</span><span class="T321">. Depending on the direction of the signal, there are other attributes that determine the actual signal names.</span></p><h4 class="P414"><a id="a_5_4_1_1_Signal_Direction_Attributes"><span class="heading_numbering">5.4.1.1</span></a>Signal Direction Attributes</h4><p class="P128">The signal name and direction are defined in a single attribute:</p><p class="IndentHang"><span class="Code"><span class="T190">Input='</span></span><span class="Code"><span class="T59">&lt;</span></span><span class="Code"><span class="T58">name</span></span><span class="Code"><span class="T59">&gt;</span></span><span class="Code"><span class="T190">'</span></span>  identifies a signal as an input and provides its name.</p><p class="IndentHang"><span class="Code">Output='</span><span class="Code"><span class="T34">&lt;</span></span><span class="Code"><span class="T5">name</span></span><span class="Code"><span class="T34">&gt;</span></span><span class="Code">'</span>  identifies a signal as an output from and provides its name.</p><p class="IndentHang"><span class="Code">Inout='</span><span class="Code"><span class="T34">&lt;</span></span><span class="Code"><span class="T5">name</span></span><span class="Code"><span class="T34">&gt;</span></span><span class="Code">'</span>  identifies a signal as a tristate signal and provides its name.</p><p class="IndentHang"><span class="Code">Bidirectional='</span><span class="Code"><span class="T34">&lt;</span></span><span class="Code"><span class="T5">name</span></span><span class="Code"><span class="T34">&gt;</span></span><span class="Code">'</span>  identifies a signal as usable in either direction and provides its name</p><p class="P194">The direction is relative to the asset being defined in the XML file <span class="T120">(device, platform or card)</span>. <span class="T120">When defining slot types, the direction is relative to the platform FPGA. </span><span class="T121">In a platform definition, </span><span class="Code">input</span><span class="T121"> means input to the platform worker. For a device, it is input to the device.</span></p><p class="P194"><span class="T121">For a </span><span class="T50">slot</span><span class="T121"> signal, declaring </span><span class="Code">bidirectional</span><span class="T121"> means that its direction is determined by the direction of the card's device worker signal which uses it. Consequently, different cards may implement unique directionality for a bidirectional slot signal. Note that slot signal directions </span><span class="Code">input</span><span class="T121">, </span><span class="Code">output</span><span class="T121">, or </span><span class="Code">inout</span><span class="T121"> impose a requirement for all possible cards/device workers which use that signal.</span></p><p class="P195"><span class="T121">For a </span><span class="T50">device</span><span class="T121"> signal, declaring the direction to be </span><span class="Code">bidirectional</span><span class="T121"> merely defines an HDL </span><span class="T50">inout</span><span class="T121"> port on the device worker, and it is expected that the device worker will instance an I/O buffer itself, from which the tools will determine the direction.</span></p><p class="P195"><span class="T444">Declaring the direction of a device signal to be </span><span class="Code">inout</span><span class="T121"> defines the 3 tristate signal ports on the device worker. An </span><span class="Code">inout</span><span class="T121"> signal inside an FPGA implies a bundle of three signals (in, out, output-enable) which, when attached to a pin/pad of the FPGA may result in a single tristate signal external to the FPGA. The names of the three associated signals is determined by adding the suffixes: </span><span class="Code">_i</span><span class="T322">, </span><span class="Code">_o</span><span class="T322">, </span><span class="Code">_oe</span><span class="T322"> respectively.  These default suffixes can be overridden for a signal using the </span><span class="Code">in</span><span class="T322">, </span><span class="Code">out</span><span class="T322">, </span><span class="Code">oe</span><span class="T322"> attributes, where </span><span class="Code">%s</span><span class="T322"> in these attributes represents the name in the </span><span class="Code">inout</span><span class="T322"> attribute. For example, this declaration:</span></p><p class="Code">&lt;signal inout='mySig' oe='The%sEnable' in='%s_in' out='%<span class="T404">sD</span>riven'/&gt;</p><p class="P228">would imply the three signal names: <span class="Code">mySig_in</span>, <span class="Code">mySigDriven</span>, and <span class="Code">ThemySigEnable</span>, rather than the default: <span class="Code">mySig_i</span>, <span class="Code">mySig_o</span>, and <span class="Code">mySig_oe</span>. <span class="T325">These suffixes will be converted to upper case when the signal name is entirely upper case.</span></p><p class="P228">Whether this bundle of three signals is implied for <span class="Code">inout</span> signals depends on the context of the <span class="Code">signal</span> element. <span class="T326">When HDL containers are generated by OpenCPI, a tristate I/O pin is generated with the single external signal and the three internal signals.</span></p><p class="P248">These direction and signal type attributes allow OpenCPI to perform error checking for connections and implement the correct tie-offs and I/O primitives for top-level signals in a design.</p><h4 class="Heading_20_4"><a id="a_5_4_1_2_Width_Attribute_of_Signal_Elements"><span class="heading_numbering">5.4.1.2</span></a>Width Attribute of Signal Elements</h4><p class="Body"><span class="T323">This attribute </span>specifies that the signal is an array of signals with the width specified <span class="T323">in the value of the attribute.  Each element of the array is an individual signal with a zero-origin index enclosed in parentheses. When VHDL or Verilog code is being generated, the array is defined and used appropriate for the language. This if the signal is defined as:</span></p><p class="Code">&lt;signal input='data' width='3'/&gt;</p><p class="P230">The signals are <span class="Code">data(0)</span>, <span class="Code">data(1)</span>, <span class="Code">data(2)</span>.</p><h4 class="Heading_20_4"><a id="a_5_4_1_3_Differential_Attribute_of_Signal_Elements"><span class="heading_numbering">5.4.1.3</span></a>Differential Attribute of Signal Elements</h4><p class="P230">This boolean attribute specifies, when true, that the signal is differential and represents a pair of signals with the suffixes <span class="Code">p</span> and <span class="Code">n</span> representing the positive and negative of the pair respectively. These default suffixes can be overridden using the <span class="Code">pos</span> and <span class="Code">neg</span> attributes, where <span class="Code">%s</span> in the value of those attributes represent the name defined in the direction attribute.</p><p class="P140"> For example, this declaration:</p><p class="P304">&lt;signal in<span class="T324">p</span>ut='mySig' <span class="T324">differential='1' pos='P_%s' neg='%sN'/&gt;</span></p><p class="P229">would imply the <span class="T324">two</span> signal names: <span class="Code">P_mySig</span> and <span class="Code">mySigN</span> rather than the default: <span class="Code">mySig</span><span class="Code"><span class="T324">p</span></span>, and <span class="Code">mySig</span><span class="Code"><span class="T324">n</span></span>.</p><p class="P231">These suffixes will be converted to upper case when the signal name is entirely upper case. It is invalid to specify an <span class="Code">inout</span> signal as <span class="Code">differential</span>.</p><h3 class="P386"><a id="a_5_4_2_Slots__How_Cards_Plug_into_Platforms"><span class="heading_numbering">5.4.2</span></a><a id="__RefHeading___Toc18277_4003722483"/>Slots  How Cards Plug into Platforms</h3><p class="P224">As mentioned earlier, <span class="T102">platforms can have </span><span class="T64">slots</span><span class="T102">, which are an intrinsic part of the platform, and enable cards to be plugged in that add devices to the platform. Such cards may be plugged in to any platform that has compatible slots. S</span>lot types <span class="T317">are defined independently and</span> <span class="T317">then </span>used when describing platforms and cards. A platform has slots of defined types, and cards which are designed for the same slot type may be plugged into the defined slots on that platform. <span class="T309">A common slot type is the FMC (FPGA Mezzanine Card), which is defined by the VITA standards organization as VITA-57.1. In fact this standard defines two slot types: FMC-LPC (Low Pin Count using a connector with 160 pins), and FMC-HPC (High Pin Count using a connector with 400 pins). These slot types are already defined in OpenCPI.</span></p><p class="P225">So before platforms or cards are defined, slot types must be defined. <span class="T309">Then a platform or card definition refers to slot types of known predefined types. Defining new slot types generally does not involve writing HDL code, just writing descriptive metadata in XML.</span></p><p class="P226">A slot type is defined in an XML file placed in the <span class="Code">hdl/cards/specs</span> directory of an OpenCPI project <span class="T318">by </span><span class="Code">ocpidev</span>. The name of the file is <span class="Code"><span class="T5">&lt;slot-type&gt;</span></span><span class="Code">.xml</span>, where the <span class="Code"><span class="T5">&lt;slot-type&gt;</span></span> must be a name that can be used is programming languages (i.e. use underscores rather than hyphens), <span class="T310">but is otherwise case insensitive. The name should normally be the exact name used in whatever standard document defines the slot type.</span></p><p class="P227"><span class="T310">The slot definition file contains a top-level XML element </span><span class="Code">SlotType</span><span class="T310">, with an optional </span><span class="Code">name</span><span class="T310"> attribute that must match the name of the file without the </span><span class="Code">.xml</span><span class="T310"> suffix. This top-level element contains </span><span class="Code">signal</span><span class="T310"> child elements as defined above in </span><a href="#a_Signal_Declaration_XML_Elements_for_Devices__Platforms__Slots_and_Cards" class="Internet_20_link"><span class="T310">Signal Declaration XML Elements for Devices, Platforms, Slots and Cards</span></a><span class="T310">. When a pin in a slot is defined to be used in either direction, it should be declared </span><span class="Code">bidirectional</span><span class="T310">.</span></p><p class="P123">A slot type is associated with one or more connectors, and the pins of the connectors are numbered. When a slot type is standardized, each pin of each connector is given both a physical pin identifier as well as a signal name. OpenCPI uses only the signal names, <span class="T311">although it is useful to put the pin identifiers in a comment next to each signal definition.</span></p><p class="P124">The direction of signals in a slot are specified relative to the platform side of the slot <span class="T319">(sometimes called the </span><span class="T35">carrier</span><span class="T319"> side or the </span><span class="T35">motherboard</span><span class="T319"> side). </span>Thus if the signal is sourced on the card (<span class="T5">output</span> from the card), it is <span class="T5">input</span> to the platform. Thus such a slot signal is defined as an <span class="T5">input</span> signal for the slot type.</p><p class="P129">Signals defined as <span class="Code">inout</span> in a slot type do not imply the three signals that are implied for such signals when <span class="T5">inside</span> an FPGA. The signal is singular and associated with a single pin.</p><p class="P132">An example small slot type XML file would contain:</p><p class="P305">&lt;SlotType name='myslottype'&gt;<br/> &lt;signal input='present'/&gt;       &lt;!-- Pin K1 --&gt;<br/> &lt;signal bidirectional='util0'/&gt;    &lt;!-- Pin K4 --&gt;<br/> &lt;signal output='data' width='4'/&gt;   &lt;!-- Pin K5 --&gt;<br/>&lt;/SlotType&gt;</p><p class="P130">The name of a slot type is used in the XML description files of platforms (that have slots) and cards.</p><h3 class="P387"><a id="a_5_4_3_Creating_the_XML_Metadata_Definition_for_the_Platform"><span class="heading_numbering">5.4.3</span></a><a id="__RefHeading__17664_2116501284"/>Creating the <span class="T164">XML M</span>etadata <span class="T164">D</span>efinition <span class="T379">for </span>the <span class="T164">P</span>latform</h3><p class="P131">A platform is created using the <span class="Code">ocpidev create platform</span> command, which establishes the platform's directory under <span class="Code">hdl/platforms</span> and creates an initial <span class="Code">Makefile</span>, the XML file <span class="Code"><span class="T5">&lt;platform&gt;</span></span><span class="Code">.xml</span> describing the platform, and an initial VHDL source file <span class="Code"><span class="T5">&lt;platform&gt;</span></span><span class="Code">.vhd</span> for the platform worker.</p><p class="P30">The XML file that defines an HDL platform <span class="T273">is named the same as the platform name with an </span><span class="Code">.xml</span><span class="T273"> suffix. It describes</span> both the hardware aspects of the platform as well as the OWD <span class="T122">for the </span>HDL worker that <span class="T405">controls</span> the platform, which is called the platform worker. Thus the platform XML is an OWD for the platform worker, with additional information. <span class="T122">The platform worker is a special type of device worker, with extra requirements for the platform. Developing device workers in general is the subject of the next major section below, but information specific to platform workers is described here.</span></p><p class="P114">The platform XML is an OWD with these special aspects, <span class="T405">all described in detail below</span>:</p><ul><li><p class="P464" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>The top level XML element is <span class="Code">HdlPlatform</span><span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>The spec being implemented is <span class="Code">platform-spec</span>.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>The slots present on the platform <span class="T165">are indicated by </span><span class="Code">slot</span><span class="T165"> elements</span><span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>The devices <span class="T405">physically </span>present on the platform <span class="T165">are indicated by </span><span class="Code">device</span><span class="T165"> elements.</span><span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>The external signals (to pins) required by the platform worker (as for any device worker) <span class="T165">are indicated by </span><span class="Code">signal</span><span class="T165"> elements.</span><span class="odfLiEnd"/></p></li><li><p class="P465" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Special platform port types for <span class="T327">platform workers: </span><span class="Code">metadata</span><span class="T327">, </span><span class="Code">timebase</span><span class="T327">, </span><span class="Code">cpmaster</span><span class="T327">, </span><span class="Code">sdp</span><span class="T327">, and </span><span class="Code">unoc</span><span class="T327">.</span><span class="odfLiEnd"/></p></li></ul><p class="P232">So as a minimum, an example <span class="T405">of the XML </span>for <span class="Code">myplat</span> would be:</p><p class="P306">&lt;HdlPlatform Language='vhdl' spec='platform-spec'&gt;<br/> &lt;specproperty name='platform' value='myplat'/&gt;</p><p class="P306">&lt;/HdlPlatform&gt;</p><p class="P232">Other requirements are described below.</p><h4 class="P415"><a id="a_5_4_3_1_Properties_of_Platform_Workers"><span class="heading_numbering">5.4.3.1</span></a>Properties of Platform Workers</h4><p class="P154">Several platform properties are parameters (constants) that must be set in the platform worker <span class="T411">OWD </span>using the <span class="Code">specproperty</span> element with a <span class="Code">value</span> attribute:</p><p class="IndentHang"><span class="Code">platform</span>  <span class="T329">required </span>string attribute must be set to the name of the platform</p><p class="IndentHang"><span class="Code">sdp_width</span>  <span class="Code">uchar</span> attribute, must be set in platforms using the SDP (see Interconnect Support below)</p><p class="IndentHang"><span class="Code">nSwitches</span>  attribute is set the number of general purpose switches available, <span class="T329">default is zero</span></p><p class="IndentHang"><span class="Code">nLEDs</span>  set to the num<span class="T328">b</span>er of general purpose LEDs available, <span class="T329">default is zero</span></p><p class="P340"><span class="Code">n</span><span class="Code"><span class="T428">Slot</span></span><span class="Code">s</span>  set to the num<span class="T328">b</span>er of <span class="T428">slots on the platform</span>, <span class="T329">default is zero</span></p><p class="P372">An example setting these constants is:</p><p class="P307">&lt;HdlPlatform Language='vhdl' spec='platform-spec'&gt;<br/> &lt;specproperty name='platform' value='myplat'/&gt;<br/> <span class="T329">&lt;specproperty name='nLEDS' value='4'/&gt;</span><br/>&lt;/HdlPlatform&gt;</p><p class="P133">Some properties must be supported by the HDL code in the platform worker:</p><p class="P339"><span class="Code"><span class="T329">switches</span></span>  <span class="T329">volatile </span><span class="Code">ulong</span><span class="T329"> property returning the state of the switches; switch 0 is the LSB, driven by the platform worker as </span><span class="Code">props_out.switches</span><span class="T329">.</span></p><p class="IndentHang"><span class="Code"><span class="T329">LEDs</span></span><span class="T171">  a writable </span><span class="Code">ulong</span><span class="T171"> property to control the LEDs of the platform; LED 0 is the LSB, driven into the platform worker's </span><span class="Code">props_in.LEDs</span><span class="T171">.</span></p><p class="P340"><span class="Code"><span class="T428">slotCardIsPresent</span></span><span class="T171">  a volatile </span><span class="Code">bool</span><span class="T171"> array indicating whether a card is present is each slot.</span></p><p class="P33">Since the platform worker is like any other worker, it can define any of its own properties using the <span class="Code">property</span> element in its OWD.</p><p class="P32">There are several properties defined in <span class="Code">platform-spec.xml</span> that must be connected to specific platform ports <span class="T428">in the platform worker code </span>as described next.</p><h4 class="Heading_20_4"><a id="a_5_4_3_2_Platform_Ports_in_a_Platform_XML_File"><span class="heading_numbering">5.4.3.2</span></a>Platform Ports in a Platform XML File</h4><p class="P34"><span class="T123">Platform workers have ports that are different than ports of application and normal device workers. They allow the platform worker to provide required services to the rest of the HDL infrastructure. How they are used or referenced in the platform worker's source code is described in </span><a href="#a_Writing_the_Platform_Worker_Source_Code" class="Internet_20_link"><span class="T123">Writing the Platform Worker Source Code</span></a><span class="T123">.</span></p><p class="P134">A <span class="FirstEmphasis">metadata access port</span> must be present in all platform workers. The following line must be present and enables access to bitstream metadata via the platform worker's properties.</p><p class="Code">&lt;metadata master='true'/&gt;</p><p class="P135">A <span class="FirstEmphasis">timebase output port</span> must be present in all platform workers. The following line must be present and enables the platform worker to provide timekeeping signals to the rest of the infrastructure.</p><p class="Code">&lt;timebase master='true'/&gt;</p><p class="P136"><span class="T331">The platform worker must arrange for c</span>ontrol plan<span class="T172">e</span> access <span class="T331">which</span> provid<span class="T331">es</span> off-chip access to the on-chip control plane. <span class="T331">This can be accomplished in two ways, direct and indirect.</span></p><p class="P136"><span class="T308">To </span><span class="T36">directly</span><span class="T308"> support a </span><span class="FirstEmphasis">control plane master port</span><span class="T308">, the platform XML declares:</span></p><p class="Code">&lt;cpmaster <span class="T332">master='true'/&gt;</span></p><p class="P138"><span class="T332">This indicates that the platform worker will provide an addressable path from the controlling processors's software into the FPGA, using the </span><span class="Code">cpmaster</span><span class="T332"> port signal protocol. This usually involves adapting an address window on a software addressable bus that the FPGA is connected to, to the protocol and signals of the </span><span class="Code">cpmaster</span><span class="T308"> port. This implies that the external pathways (interconnects) for control and data are separate.</span></p><p class="P137">A platform can <span class="T5">indirectly</span> support a control plane by providing an <span class="T5">interconnect</span> port that serves both as a control and data plane access path. This is common when there is a single connection between the system bus and this FPGA and the FPGA is both a slave on this bus (for control and possibly data) as well as a master (for DMA <span class="T334">data</span>). <span class="T334">The absence of a</span> <span class="Code">cpmaster</span> element in the platform XML implies that the interconnect port will support both control and data and no XML elements<span class="T333"> </span>are required in the platform XML <span class="T333">and no source code in the platform worker is required for the control plane</span>.</p><p class="P35"><span class="T412">T</span>he platform worker must declare a <span class="FirstEmphasis">system interconnect port</span> to support data flow between workers in this HDL platform and workers in other platforms connected to this platform via the system's interconnect, such as PCI Express. As just mentioned, if this interconnect port will <span class="T5">also</span> serve as the path for the control plane, then no <span class="Code">cpmaster</span> port need be declared.</p><p class="P35">There is a legacy interconnect port type which is found in some existing HDL platforms, called <span class="Code">unoc</span>. It is no longer recommended and not described further here. For new platforms, the interconnect port type is <span class="Code">sdp</span> (for Scalable Data Plane). When this line is included in the platform XML:</p><p class="Code">&lt;sdp name=mybus master='true'/&gt;</p><p class="P36"><span class="T124">it indicates that the platform worker will adapt and connect the system's bus to the protocol defined for on-chip </span><span class="Code">sdp</span><span class="T124"> ports. This </span><span class="Code">sdp</span><span class="T124"> element has an optional </span><span class="Code">count</span><span class="T124"> attribute which can specify that this port supplies multiple concurrent channels between the system's bus/memory and the on-chip infrastructure. Data flow connections between the platform's on-chip HDL application workers and off-chip workers (on other platforms) will be allocated to the channels in round robin fashion. When the </span><span class="Code">sdp</span><span class="T124"> is declared, the </span><span class="Code">sdp_width</span><span class="T124"> parameter of the platform worker indicates the width of the </span><span class="Code">sdp</span><span class="T124"> port, in DWORDS (32 bit words).</span></p><h4 class="P416"><a id="a_5_4_3_3_Device_Elements_in_a_Platform_XML_File"><span class="heading_numbering">5.4.3.3</span></a>Device Elements in a Platform XML File</h4><p class="P196">Device elements <span class="T423">here </span>indicate devices that are part of the platform and are directly attached to the platform FPGA's pins. <span class="T410">These device elements </span><span class="T43">declare</span><span class="T410"> which devices are </span><span class="T43">physically present</span><span class="T410"> and </span><span class="T43">may</span><span class="T410"> be used (and thus instanced) in platform configurations and containers. These declarations here, by themselves, </span><span class="T43">do not</span><span class="T410"> cause the device workers to be instanced in any bitstreams. Devices are used and instanced by being referenced in platform configurations, containers and assemblies.</span></p><p class="P196">Device elements indicate:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T125">The</span> HDL device worker support<span class="T125">ing</span> this device (like a device driver) <span class="T43">(required </span><span class="Code"><span class="T188">worker</span></span><span class="T44"> attribute</span><span class="T43">)</span><span class="odfLiEnd"/></p></li><li><p class="P466" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>The name of the device <span class="T43">(optional </span><span class="Code"><span class="T188">name</span></span><span class="T44"> attribute</span><span class="T43">)</span>. <span class="T126">If no </span><span class="Code">nam</span><span class="Code"><span class="T126">e</span></span><span class="T126"> is provided, the worker name is used, and if there are multiple devices using the same worker, a zero-based ordinal is appended.</span><span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Which parameter settings should be used for the device worker for this device <span class="T43">(optional </span><span class="Code"><span class="T188">property</span></span><span class="T43"> elements)</span><span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>A<span class="T125">ny</span> mapping between the device worker's external signals and the names that the platform uses for those same device signals <span class="T127">(e.g. in its constraints file) </span><span class="T45">(optional </span><span class="Code"><span class="T188">signal</span></span><span class="T45"> child elements)</span><span class="odfLiEnd"/></p></li></ul><p class="P197">In most cases a device element simply indicates that a device exists and which device worker should be used to support it. E.g.: if a platform had a flash device that was supported by the device worker named flash.hdl, this might be the device element:</p><p class="P295">&lt;device worker='flash'/&gt;</p><p class="P197">Like normal application workers, device workers can have parameter or initial property settings. To make device workers reusable on multiple platforms, different values may be needed for different platforms. E.g., if a device worker has several clocking modes depending on how its hardware is configured, these property values indicate to the device worker how it should operate on this particular platform. Such property values are supplied using property elements (with name= and value= attributes), much like the property values for application components in an OpenCPI application.</p><p class="P197">In the following example, the device element <span class="T170">says</span> there is a <span class="Code">lime_adc</span> device present, and on this platform, its <span class="Code">use_ctl_clk</span> property should be set to <span class="Code"><span class="T126">true</span></span>.:</p><p class="P295">&lt;device worker='lime_adc'&gt;<br/> &lt;property name='use_ctl_clk' value='<span class="T126">true</span>'/&gt;<br/>&lt;/device&gt;</p><p class="P171">There is one <span class="T5">required</span> device on every platform: the <span class="FirstEmphasis">time server</span>.  It must be specified including the lines:</p><p class="P308">&lt;device worker='time_server'&gt;<br/>  &lt;property name='frequency' value='100e6'/&gt;<br/>&lt;/device&gt;</p><p class="P234">The frequency of the clock supplied on the <span class="Code">timebase</span> port must be specified as the <span class="Code">frequency</span> parameter to this device worker.</p><p class="P233"><span class="T126">D</span>evices can have <span class="Code">signal</span> elements to indicate that the standard signal naming should be overridden to match up with the constraints file of the platform (so that the constraints file can remain untouched). These <span class="Code">signal</span> elements use the <span class="Code">name </span>attribute to indicate the signal name as declared by the device worker, and the <span class="Code">platform</span> attribute to indicate the name used for the platform. If not mapped, the platform signal for this device's signal is the device's name, followed by underscore, followed by the device worker's declared external signal name.</p><p class="P167"><span class="T126">I</span>f the <span class="Code">platform</span> attribute is the empty string, it indicates that this device signal is not connected to the device on this platform. The following example indicates the presence of a <span class="Code">lime_dac</span> device, but that on this platform the <span class="Code">tx_clk</span> signal is not connected:</p><p class="P298">&lt;device worker='lime_dac'&gt;<br/> &lt;signal name='tx_clk' platform=''/&gt;<br/>&lt;/device&gt;</p><p class="P235">These <span class="Code">signal</span> elements for signal name <span class="T5">mapping</span> under the <span class="Code">device</span> elements here do <span class="T5">not</span> use the same syntax as the <span class="Code">signal</span> elements used to <span class="T5">declare</span> signals under the top-level elements of platform workers, device workers or slot type definition XML files.</p><h4 class="P417"><a id="a_5_4_3_4_Signal_Elements_in_a_Platform_XML_File"><span class="heading_numbering">5.4.3.4</span></a>Signal Elements in a Platform XML File</h4><p class="P236">In order to provide the required services at its declared <span class="Code">cpmaster</span>, <span class="Code">sdp</span>, or <span class="Code">timebase</span> platform ports, the platform worker normally requires direct access to some external signals that are not associated with any other device. These are signals such as clocks, interconnects, LEDs, and switches. These ad-hoc signals are declared using the signal elements defined in <a href="#a_Signal_Declaration_XML_Elements" class="Internet_20_link">Signal Declaration XML Elements</a>. The signal names should generally match those in the platform's constraints file, including case.</p><p class="P236">Signals implied by the presence of devices do not need to be specified.</p><p class="P259">If a platform worker wants access to slot signals, it must declare those signals using the <span class="Code">signal</span> element, even though the signal's existence is already implied by the existence of the <span class="Code">slot</span> element.  An example of this is the presence signal in FMC slots. They are not related to any device on a card, but are used by the platform worker to know when a card is plugged in (<span class="T427">is </span>present). So, in the <span class="Code">ml605</span> platform worker th<span class="T426">e</span>s<span class="T426">e</span> signal element<span class="T426">s are</span> present:</p><p class="P314">&lt;!-- These "card-is-present-in-slot" signals are from each slot--&gt;<br/>&lt;signal input='fmc_lpc_prsnt_m2c_l'/&gt;<br/>&lt;signal input='fmc_hpc_prsnt_m2c_l'/&gt;</p><p class="P260">The slot names are <span class="Code">fmc_lpc</span> and <span class="Code">fmc_hpc</span>, and the standard name for this signal is <span class="Code">prsnt_m2c_l</span>. <span class="T427">When the signal is an output (from the FPGA to the slot), the signal must not be used as an output by any device worker for a device on a plugged-in card. </span></p><h4 class="P418"><a id="a_5_4_3_5_Slot_Elements_in_a_Platform_XML_File"><span class="heading_numbering">5.4.3.5</span></a>Slot Element<span class="T169">s</span> <span class="T169">in</span> a Platform XML <span class="T169">Fi</span>le</h4><p class="Body"><span class="T166">When a platform has slots, it includes a </span><span class="Code">slot</span> element <span class="T166">to</span> declare the existence of a slot. The required <span class="Code">type</span> attribute must match the name of a defined slot type. The slot type <span class="T275">definition files</span> are normally in the <span class="Code">hdl/cards/specs</span> directory in the <span class="T290">CDK</span>, which is automatically searched whenever <span class="T275">a platform XML</span> file is processed. Examples of slot types are:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="Code"><span class="T274">fmc_lpc</span></span>: low pin count variant of the FPGA Mezzanine Card from VITA57<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="Code"><span class="T274">fmc_hpc</span></span>: high pin count variant of the FMC cards from VITA57<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="Code"><span class="T274">hsmc</span></span>: High Speed Mezzanine Card from <span class="T406">Intel/</span>Altera<span class="odfLiEnd"/></p></li></ul><p class="Body">The optional <span class="Code">name</span> attribute of the slot element may assign a name to the slot. If it is not present, the slot's name becomes the slot type. <span class="T167">If </span><span class="Code">name</span><span class="T167"> is </span><span class="T31">unspecified</span><span class="T167"> and i</span>f more than one slot of the same type is present, a zero-origin ordinal is appended to the slot-type as the name. <span class="T167">E</span>.g. if there were two slots of type <span class="Code">hsmc</span> and the<span class="T167">y</span> were not given names, their names would be <span class="Code">hsmc0</span> and <span class="Code">hsmc1</span>. <span class="T128">Slot names are needed for two purposes:</span></p><ol><li><p class="List_20_Number" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">1.</span>When a card is plugged into a slot, that slot is identified by its name. <span class="T128">Slot names are case </span><span class="T28">insensitive</span><span class="T128"> for this purpose (when mentioning slot names in HDL container XML).</span><span class="odfLiEnd"/></p></li><li><p class="P405" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">2.</span>The default name for signals between the platform FPGA and a slot is the slot name as a prefix, followed by underscore, followed by the signal name as defined in the slot type definition file.<span class="odfLiEnd"/></p></li></ol><p class="Body">These fully prefixed slot signal names do not appear in <span class="T128">source </span>code or XML, but they do <span class="T407">usually </span>correspond to the names found in a platform's constraint<span class="T407">s</span> file, <span class="T128">which is typically supplied separately by the board vendor and only modified for OpenCPI for other reasons (e.g. not for signal name changes). I.e., the signal names associated with pins of the FPGA attached to slot pins are predetermined by the vendor or board designer and not changed or redefined by the platform worker.</span></p><p class="P213">E.g. <span class="T168">for a slot signal named </span><span class="Code">PRSNT_M2C_L</span><span class="T168">, </span>the name of the signal from the platform FPGA to the slot, for the second of two <span class="Code">fmc_lpc</span> slots <span class="T128">that did not have assigned names</span>, would be <span class="Code">fmc_lpc1_PRSNT_M2C_L</span>. <span class="T128">Slot names (and slot type signals) </span><span class="T28">are case sensitive</span><span class="T128"> for this purpose (prefixing global net names) since there are some tools and systems where the case of such signals matters in the constraints file.</span></p><p class="Body">There is one other aspect to slot elements in the platform XML file: <span class="T129">slot </span>signal mapping. <span class="T407">Most</span> slot signal names are based on the specification of the slot types. <span class="T129">E.g., t</span>he FMC slot signal names are defined by VITA57. <span class="T129">If a platform's constraints file (and documentation) do not use the standard names from the slot type specification, then extra child elements are added to the platform worker's </span><span class="Code">slot</span><span class="T129"> XML element, to map the standard (e.g. VITA57) signal names to the signal names used by this platform's constraints file and documentation.</span></p><p class="P198"><span class="T129">As an example, the ZedBoard platform has a single FMC LPC slot. It uses the VITA57 signal names for </span><span class="T39">almost</span><span class="T129"> all these signals. However, it changes signal names when they are differential and use the </span><span class="Code">CC</span><span class="T129"> suffix. Whereas VITA57 always puts the </span><span class="Code">CC</span><span class="T129"> suffix last, the ZedBoard puts the differential suffix last (i.e. </span><span class="Code">_N</span><span class="T129"> and </span><span class="Code">_P</span>). <span class="T408">H</span><span class="T131">ere is the </span><span class="Code"><span class="T130">slot</span></span><span class="T131"> element for the ZedBoard platform XML that forces the slot name to be upper case </span><span class="Code"><span class="T130">FMC</span></span><span class="T131">, and remaps the offending signals so OpenCPI knows how to route signals </span><span class="T139">to</span><span class="T131"> the slot's connector </span><span class="T139">on this platform</span><span class="T132"> that </span><span class="T65">do</span><span class="T67">es</span><span class="T65"> </span><span class="T66">not</span><span class="T132"> follow the VITA57 conventions</span><span class="T131">:</span></p><p class="P301">&lt;slot name='FMC' type='fmc_lpc'&gt;<br/> &lt;!-- <span class="T129">These</span> signals don't <span class="T129">use</span> <span class="T129">VITA57</span> signal name<span class="T129">s--&gt;</span><br/> &lt;signal <span class="T144">slot=</span>'LA00_P_CC' platform='LA00_CC_P'/&gt;<br/> &lt;signal <span class="T144">slot=</span>'LA00_N_CC' platform='LA00_CC_N'/&gt;<br/> &lt;signal <span class="T144">slot=</span>'LA01_P_CC' platform='LA01_CC_P'/&gt;<br/> &lt;signal <span class="T144">slot=</span>'LA01_N_CC' platform='LA01_CC_N'/&gt;<br/> &lt;signal <span class="T144">slot=</span>'LA17_P_CC' platform='LA17_CC_P'/&gt;<br/> &lt;signal <span class="T144">slot=</span>'LA17_N_CC' platform='LA17_CC_N'/&gt;<br/> &lt;signal <span class="T144">slot=</span>'LA18_P_CC' platform='LA18_CC_P'/&gt;<br/> &lt;signal <span class="T144">slot=</span>'LA18_N_CC' platform='LA18_CC_N'/&gt;<br/> &lt;signal <span class="T144">slot=</span>'CLK0_M2C_N' platform='CLK0_N'/&gt;<br/> &lt;signal <span class="T144">slot=</span>'CLK0_M2C_P' platform='CLK0_P'/&gt;<br/> &lt;signal <span class="T144">slot=</span>'CLK1_M2C_N' platform='CLK1_N'/&gt;<br/> &lt;signal <span class="T144">slot=</span>'CLK1_M2C_P' platform='CLK1_P'/&gt;<br/> &lt;!-- <span class="T129">These</span> signals <span class="T409">do not have connections to the platform --&gt;<br/> </span>&lt;signal <span class="T144">slot=</span>'DP0_C2M_P' platform=''/&gt;<br/> &lt;signal <span class="T144">slot=</span>'DP0_C2M_N' platform=''/&gt;<br/>&lt;/slot&gt;</p><p class="P200"><span class="T138">S</span><span class="T130">ome platforms do not connect all possible slot signals to the FPGA. In this case the slot element maps them to an empty signal name on the platform, indicating that these slot signals cannot be used on this platform. In the above example, the last two slot signals mentioned (</span><span class="Code"><span class="T130">DP0_C2M_P/N</span></span><span class="T130">) are not connected to the </span><span class="T134">(Zynq) </span><span class="T130">FPGA on the ZedBoard platform.</span></p><p class="P199"><span class="T130">Finally, when a platform does not use the slot name prefix in its signal names, a leading slash can be given in the </span><span class="Code"><span class="T130">platform</span></span><span class="T130"> attribute to indicate that no such prefix should be applied. E.g. a signal mapping of:</span></p><p class="Code">&lt;signal slot='DP0_C2M_P' platform='/DP0_SLOT2_P'/&gt;</p><p class="P199"><span class="T130">would imply that the signal name in the constraints file would be </span><span class="Code"><span class="T130">DP0_SLOT2_P</span></span><span class="T130"> rather than </span><span class="Code"><span class="T130">FMC_DP0_C2M_P</span></span><span class="T130">.</span></p><h4 class="P424"><a id="a_5_4_3_6_Examples_of_Platform_XML_Files"><span class="heading_numbering">5.4.3.6</span></a><span class="T133">E</span><span class="T130">xamples of Platform XML Files</span></h4><p class="P237"><span class="T130">An example of a complete XML file for a Zynq-based HDL platform is below. The platform worker directly supports a control plane (using </span><span class="Code"><span class="T130">cpmaster</span></span><span class="T130">), and sets the time server's clock frequency to </span><span class="Code"><span class="T130">100e6</span></span><span class="T130">, and declares an SDP data plane (via </span><span class="Code"><span class="T130">sdp</span></span><span class="T130">) </span><span class="T135">with 2 channels</span><span class="T130">. </span><span class="T135">It has one </span><span class="Code"><span class="T130">fmc_lpc</span></span><span class="T135"> slot and </span><span class="T136">4</span><span class="T135"> LEDs. No switches are declared. </span><span class="T136">One signal (to drive external LEDs) is declared. No clock signals are declared since this platform worker uses on-chip clock-generator resources in the Zynq chip.</span></p><p class="Code">&lt;HdlPlatform Language="VHDL" spec='platform-spec'&gt;<br/> &lt;specproperty name='platform' value='<span class="T335">myzynq</span>'/&gt;<br/> <span class="T336">&lt;specproperty name='nLEDs' value='4'/&gt;</span><br/> &lt;metadata master='true'/&gt;<br/> &lt;timebase master='true'/&gt;<br/> &lt;cpmaster master='true'/&gt;<br/> &lt;device worker='time_server'&gt;<br/>  &lt;property name='frequency' value='100e6'/&gt;<br/> &lt;/device&gt;<br/> &lt;sdp name="zynq" master='true' count='<span class="T336">2</span>'/&gt;<br/> <span class="T336">&lt;slot name='FMC' type-'fmc_lpc'/&gt;<br/> &lt;signal name='led' width=4'/&gt;</span><br/><span class="T336">&lt;/HdlPlatform&gt;</span></p><p class="P238"><span class="T130">A second example uses an interconnect that indirectly supports a control plane so no </span><span class="Code"><span class="T130">cpmaster</span></span><span class="T130"> is necessary, but signals to get clocks and raw interconnect signals are declared. </span><span class="T137">Notice that three different clocks are taken from external inputs, and the PPS inputs and outputs are used to support the time server.</span><span class="T130">:</span></p><p class="P309">&lt;HdlPlatform Language="VHDL" spec='platform-spec'&gt;<br/> &lt;specproperty name='platform' value='mypci'/&gt;<br/> &lt;metadata master='true'/&gt;<br/> &lt;timebase master='true'/&gt;<br/> &lt;device worker='time_server'&gt;<br/>  &lt;property name='frequency' value='200e6'/&gt;<br/> &lt;/device&gt;<br/> &lt;sdp name="pcie" master='true'/&gt;<br/> &lt;signal input="sys0_clk" differential='true'/&gt;<br/> &lt;signal input='sys1_clk' differential='true'/&gt;<br/> &lt;signal input='pci0_clk' differential='true'/&gt;<br/> &lt;signal input='pci0_reset_n'/&gt;<br/> &lt;signal input='pcie_rx' differential='true' width='4'/&gt;<br/> &lt;signal output='pcie_tx' differential='true' width='4'/&gt;<br/> &lt;signal output='led' width='13'/&gt;<br/> &lt;signal input='ppsExtIn'/&gt;<br/> &lt;signal output='ppsOut'/&gt;<br/>&lt;/HdlPlatform&gt;</p><h3 class="P388"><a id="a_5_4_4_Writing_the_Platform_Worker_Source_Code"><span class="heading_numbering">5.4.4</span></a><a id="__RefHeading___Toc13565_2939887359"/><span class="T330">Writing</span> the <span class="T117">P</span>latform <span class="T117">W</span>orker <span class="T330">Source Code</span></h3><p class="P37"><span class="T171">While</span> a platform worker's XML (OWD) has extra elements to describe the platform's hardware (devices, slots), it is still an OWD, and thus it describes any implementation-specific properties and ports of the <span class="T171">platform </span>worker. Being a device worker, it can also define external signals that are connected externally to pins.</p><p class="P37">Thus to complete the OWD, any such ports and properties must be defined. The spec (OCS) for all platform workers defines certain ports and properties that all platform workers must support and implement, but platform workers can and typically do have other ports and properties that are platform-specific.</p><h4 class="P419"><a id="a_5_4_4_1_Platform_Worker_Properties"><span class="heading_numbering">5.4.4.1</span></a>Platform Worker Properties</h4><p class="P214">Some required platform worker properties are dealt with entirely in the platform XML file since they just require parameter values which can be specified in the OWD.</p><p class="P243">Several OCS properties are readable characteristics of the platform that may be defined as parameters with a constant value <span class="T342">in the OWD, </span>or <span class="T342">be declared </span>as volatile with a runtime-determined value. These include the <span class="Code">nSwitches</span>, <span class="Code">nLEDs</span> properties. If they are volatile, the worker must drive them by assigning values, e.g.:</p><p class="Code">props_out.nSwitches &lt;= to_ulong(3);<br/>props_out.nLEDs &lt;= to_ulong(7);</p><p class="P245">Otherwise, the OWD can simply <span class="T201">specify the value, e.g.:</span></p><p class="P310">&lt;specproperty name='nSwitches' parameter='true' value='3'/&gt;</p><p class="P243"><span class="T342">Some platform properties</span> are always volatile such as <span class="Code">switches</span> <span class="T429">and </span><span class="Code">slotCardIsPresent</span>, <span class="T341">so the platform worker drives them with:</span></p><p class="Code"><span class="Code"><span class="T83">props_out.switches &lt;= switch_input_</span></span><span class="Code"><span class="T87">pins</span></span><span class="Code"><span class="T83">;<br/></span></span><span class="Code"><span class="T98">props_out.slotCardIsPresent &lt;= (others =&gt; '0');</span></span></p><p class="P244"><span class="T342">Some are writable such as </span><span class="Code">LEDs</span>, <span class="T342">and are input to the worker:</span></p><p class="Code">my_led_<span class="T342">pins</span> &lt;= props_in.leds(3 downto 0);</p><p class="P201">Finally, some properties are associated with platform ports and are described below in the sections about <span class="T413">each </span>platform port <span class="T413">type</span>.</p><p class="P201">Here is a typical example of VHDL code in a platform worker for its properties:</p><p class="P311">props_out.switches     &lt;= (others =&gt; '0');<br/>props_out.slotCardIsPresent &lt;= (0 =&gt; not fmc_prsnt,<br/>                others =&gt; '0'<span class="T347">);<br/></span>props_out.UUID       &lt;= metadata_in.UUID;<br/>props_out.romData      &lt;= metadata_in.romData;<br/><span class="T347">metadata_out.clk      &lt;= ctl_in.clk;<br/>metadata_out.romAddr    &lt;= props_in.romAddr;<br/>metadata_out.romEn     &lt;= props_in.romData_read;<br/>led(0)           &lt;= props_in.leds(0);</span></p><p class="P215"><span class="T201">Below</span> is a <span class="T201">summary </span>table with the <span class="T201">OCS </span>properties and their <span class="T346">accessibility</span>.</p><p class="Table_20_Caption_20__28_before_29_">Table <a id="refTable2"/>2: Platform Worker <span class="T201">OCS</span> Properties</p><table border="0" cellspacing="0" cellpadding="0" class="Table6"><colgroup><col width="111"/><col width="77"/><col width="104"/><col width="430"/></colgroup><tr><td style="text-align:left;width:1in; " class="Table6_A1"><p class="P366">Name</p></td><td style="text-align:left;width:0.691in; " class="Table6_A1"><p class="P366">Type</p></td><td style="text-align:left;width:0.9361in; " class="Table6_A1"><p class="P366">Access</p></td><td style="text-align:left;width:3.8729in; " class="Table6_D1"><p class="P366">Description</p></td></tr><tr><td style="text-align:left;width:1in; " class="Table6_A2"><p class="P332"><span class="Code"><span class="T88">p</span></span><span class="Code"><span class="T83">latform</span></span></p></td><td style="text-align:left;width:0.691in; " class="Table6_A2"><p class="P327">String</p></td><td style="text-align:left;width:0.9361in; " class="Table6_A2"><p class="P327">Parameter</p></td><td style="text-align:left;width:3.8729in; " class="Table6_D2"><p class="P327"><span class="T345">Platform name<br/></span>Set in OWD &lt;specproperty&gt;</p></td></tr><tr><td style="text-align:left;width:1in; " class="Table6_A2"><p class="P332"><span class="Code"><span class="T83">sdp_width</span></span></p></td><td style="text-align:left;width:0.691in; " class="Table6_A2"><p class="P327">U<span class="T344">C</span>har</p></td><td style="text-align:left;width:0.9361in; " class="Table6_A2"><p class="P327">Parameter</p></td><td style="text-align:left;width:3.8729in; " class="Table6_D2"><p class="P332"><span class="T89">Width in DWORDS of SDP.<br/></span><span class="T83">Set in OWD for </span><span class="Code"><span class="T83">sdp</span></span><span class="T83"> platform port</span></p></td></tr><tr><td style="text-align:left;width:1in; " class="Table6_A2"><p class="P319"><span class="Code"><span class="T83">UUID</span></span></p></td><td style="text-align:left;width:0.691in; " class="Table6_A2"><p class="P322">U<span class="T344">L</span>ong<br/>*16</p></td><td style="text-align:left;width:0.9361in; " class="Table6_A2"><p class="P322">Readable</p></td><td style="text-align:left;width:3.8729in; " class="Table6_D2"><p class="P318"><span class="T83">Unique ID of bitstream file.<br/></span><span class="T89">Connected in source code for </span><span class="Code"><span class="T83">metadata</span></span><span class="T89"> platform port.</span></p></td></tr><tr><td style="text-align:left;width:1in; " class="Table6_A2"><p class="P319"><span class="Code"><span class="T83">romAddr</span></span></p></td><td style="text-align:left;width:0.691in; " class="Table6_A2"><p class="P322">U<span class="T344">S</span>hort</p></td><td style="text-align:left;width:0.9361in; " class="Table6_A2"><p class="P322">Writable</p></td><td style="text-align:left;width:3.8729in; " class="Table6_D2"><p class="P320"><span class="T83">Address for reading bitstream metadata.<br/></span><span class="T89">Connected in source code for </span><span class="Code"><span class="T83">metadata</span></span><span class="T89"> platform port.</span></p></td></tr><tr><td style="text-align:left;width:1in; " class="Table6_A2"><p class="P319"><span class="Code"><span class="T83">romData</span></span></p></td><td style="text-align:left;width:0.691in; " class="Table6_A2"><p class="P322">ULong</p></td><td style="text-align:left;width:0.9361in; " class="Table6_A2"><p class="P325">Volatile</p></td><td style="text-align:left;width:3.8729in; " class="Table6_D2"><p class="P320"><span class="T83">Data when reading bitstream metadata<br/></span><span class="T89">Connected in source code for </span><span class="Code"><span class="T83">metadata</span></span><span class="T89"> platform port.</span></p></td></tr><tr><td style="text-align:left;width:1in; " class="Table6_A2"><p class="P319"><span class="Code"><span class="T83">nLEDs</span></span></p></td><td style="text-align:left;width:0.691in; " class="Table6_A2"><p class="P322">Ulong</p></td><td style="text-align:left;width:0.9361in; " class="Table6_A2"><p class="P322"><span class="T343">Parameter/<br/></span>Readable</p></td><td style="text-align:left;width:3.8729in; " class="Table6_D2"><p class="P322">How many LED indicators are present?<br/><span class="T344">Can be parameter </span><span class="T38">or</span><span class="T344"> readable.</span></p></td></tr><tr><td style="text-align:left;width:1in; " class="Table6_A2"><p class="P332"><span class="Code"><span class="T83">LEDs</span></span></p></td><td style="text-align:left;width:0.691in; " class="Table6_A2"><p class="P322">ULong</p></td><td style="text-align:left;width:0.9361in; " class="Table6_A2"><p class="P322">Readable+Writable</p></td><td style="text-align:left;width:3.8729in; " class="Table6_D2"><p class="P322">Actual LED settings, up to 32, LSB is LED 0</p></td></tr><tr><td style="text-align:left;width:1in; " class="Table6_A2"><p class="P319"><span class="Code"><span class="T83">n</span></span><span class="Code"><span class="T90">Switche</span></span><span class="Code"><span class="T83">s</span></span></p></td><td style="text-align:left;width:0.691in; " class="Table6_A2"><p class="P322">Ulong</p></td><td style="text-align:left;width:0.9361in; " class="Table6_A2"><p class="P322"><span class="T343">Parameter/<br/></span>Readable</p></td><td style="text-align:left;width:3.8729in; " class="Table6_D2"><p class="P323">How many <span class="T344">switches</span> are present?<br/><span class="T344">Can be parameter </span><span class="T38">or</span><span class="T344"> readable.</span></p></td></tr><tr><td style="text-align:left;width:1in; " class="Table6_A2"><p class="P332"><span class="Code"><span class="T90">switche</span></span><span class="Code"><span class="T83">s</span></span></p></td><td style="text-align:left;width:0.691in; " class="Table6_A2"><p class="P322">ULong</p></td><td style="text-align:left;width:0.9361in; " class="Table6_A2"><p class="P328">Volatile</p></td><td style="text-align:left;width:3.8729in; " class="Table6_D2"><p class="P322">Actual <span class="T344">switch</span> settings, up to 32, LSB is <span class="T344">switch</span> 0</p></td></tr><tr><td style="text-align:left;width:1in; " class="Table6_A2"><p class="P319"><span class="Code"><span class="T83">n</span></span><span class="Code"><span class="T90">S</span></span><span class="Code"><span class="T91">lots</span></span></p></td><td style="text-align:left;width:0.691in; " class="Table6_A2"><p class="P322">Ulong</p></td><td style="text-align:left;width:0.9361in; " class="Table6_A2"><p class="P326">Parameter</p></td><td style="text-align:left;width:3.8729in; " class="Table6_D2"><p class="P324">How many <span class="T345">slots</span> are present?<br/><span class="T201">Set in OWD &lt;specproperty&gt;<br/>Must match number </span><span class="Code">slot</span><span class="T201"> elements in OWD</span></p></td></tr><tr><td style="text-align:left;width:1in; " class="Table6_A2"><p class="P333"><span class="Code"><span class="T91">slotCardIsPresent</span></span></p></td><td style="text-align:left;width:0.691in; " class="Table6_A2"><p class="P329">Bool<br/>array</p></td><td style="text-align:left;width:0.9361in; " class="Table6_A2"><p class="P328">Volatile</p></td><td style="text-align:left;width:3.8729in; " class="Table6_D2"><p class="P330">Indicate whether card is plugged into slot</p></td></tr><tr><td style="text-align:left;width:1in; " class="Table6_A2"><p class="P335"><span class="Code"><span class="T92">s</span></span><span class="Code"><span class="T83">lotNames</span></span></p></td><td style="text-align:left;width:0.691in; " class="Table6_A2"><p class="P330">String</p></td><td style="text-align:left;width:0.9361in; " class="Table6_A2"><p class="P330">Parameter</p></td><td style="text-align:left;width:3.8729in; " class="Table6_D2"><p class="P330">Comma-separated list of slot names<br/>Set in OWD &lt;specproperty&gt;</p></td></tr></table><h4 class="Heading_20_4"><a id="a_5_4_4_2_Ports_of_Platform_Workers"><span class="heading_numbering">5.4.4.2</span></a>Ports of Platform Workers</h4><p class="P84">Platform workers have ports that are different than ports of application workers. They are not used for moving data to and from other workers. They allow the platform worker to provide required services to the rest of the HDL infrastructure. <span class="T348">The platform ports were introduced in </span><a href="#a_Platform_Ports_in_a_Platform_XML_File" class="Internet_20_link"><span class="T348">Platform Ports in a Platform XML File</span></a><span class="T348">.  Each has implications in the platform worker source code.</span></p><p class="P139">The simplest platform port is the <span class="FirstEmphasis">metadata port</span>, which simply requires that the platform worker connect the signals at the <span class="T349">metadata </span>port to the properties associated with the port using this exact VHDL code:</p><p class="P312">props_out.UUID       &lt;= metadata_in.UUID;<br/>props_out.romData      &lt;= metadata_in.romData;<br/><span class="T347">metadata_out.clk      &lt;= ctl_in.clk;<br/>metadata_out.romAddr    &lt;= props_in.romAddr;<br/>metadata_out.romEn     &lt;= props_in.romData_read;</span></p><p class="P63">For the <span class="FirstEmphasis">timebase port</span>, the worker is required to provide three output signals to that port, and take one output signal from that port, e.g.:</p><p class="Code">timebase_out.clk  &lt;= clk;<br/>timebase_out.reset &lt;= reset;<br/>timebase_out.ppsIn &lt;= '0';<br/><span class="T349">my_pps_out_pin   &lt;= timebase_in.pps</span></p><p class="P63">These signals are the basis for timekeeping on the platform. They are a clock and associated reset, a PPS input signal and an optionally connected PPS output signal. The platform worker should provide the <span class="T414">timebase </span>clock that is best suited for timekeeping, which usually means the one with the least jitter and drift over the short term. On some platforms this is simply the same as the control clock, but on others there may be a clock with better performance for this purpose and the platform worker should use it.</p><p class="P202"><span class="T140">If a platform worker is </span><span class="T22">direct</span><span class="T46">ly</span><span class="T140"> supporting a </span><span class="FirstEmphasis">control plane master port</span><span class="T140"> (indicated by the </span><span class="Code">cpmaster</span><span class="T140"> element in the OWD), t</span>he platform worker must provide an addressable path from the controlling processors's software into the FPGA. This usually involves adapting a <span class="T414">address </span>window on an addressable bus that the FPGA is connected to, to the protocol and signals of the <span class="Code">cpmaster</span> port. The adaptation is normally put into its own module and then instanced in the platform worker. <span class="T173">The platform worker must choose an appropriate clock and (asserted high) reset signal to serve as the platform's control clock/reset.</span></p><p class="P246">Remember that the platform worker may provide for a control plane <span class="T5">indirectly</span> by providing an <span class="FirstEmphasis">interconnect port</span> that can serve the same purpose. In that case no platform worker support of a <span class="Code">cpmaster</span> port is necessary.</p><p class="P202"><span class="T140">A</span> <span class="Code">cpmaster</span> example from the ZedBoard platform is where an addressable bus port in the Zynq chip, which connects the processor to the FPGA, is called the <span class="Code">M_AXI_GP0</span><span class="T173">. The Zynq </span><span class="T47">CPU</span><span class="T173"> is the master, and generates read and write accesses to the FPGA acting as a slave. In this case an adapter module was written (called </span><span class="Code">axi2cp</span><span class="T173">) to convert the protocol used by the </span><span class="Code">M_AXI_GP0</span><span class="T173"> port in the SoC hardware, to the OpenCPI control plane protocol. This module is instanced in the Zed platform worker and connected to the Zynq CPU on one side, and the platform worker's </span><span class="Code">cpmaster</span><span class="T173"> port on the other. In the Zed platform worker this adapter and its connection is shown by this code:</span></p><p class="Code"><span class="T83">cp : axi2cp port map(clk   =&gt; clk,<br/>           reset  =&gt; reset,<br/>           axi_in =&gt; ps_</span><span class="T93">m_</span><span class="T83">axi_gp_out</span><span class="T93">(0)</span><span class="T83">,<br/>           axi_out =&gt; ps_</span><span class="T93">m_</span><span class="T83">axi_gp_in</span><span class="T93">(0)</span><span class="T83">,<br/>           cp_in  =&gt; cp_in,<br/>           cp_out =&gt; cp_out);</span></p><p class="P39">The signaling protocol of a <span class="Code">cpmaster</span> port is described in the <a href="#a_Control_Plane_Master_Port_Protocol" class="Internet_20_link"><span class="T141">Control Plane Master Port Protocol</span></a> section.</p><p class="P38">The last platform port type, <span class="FirstEmphasis">system interconnect,</span><span class="T350"> is specified using the </span><span class="Code">sdp</span><span class="T141"> element in the OWD. The platform worker must provide a path from the platform's bus/interconnect to the </span><span class="Code">sdp</span><span class="T141"> port. When the interconnect used for data flow can also be used to provide control plane access, then the </span><span class="Code">cpmaster</span><span class="T141"> port described above is unnecessary. The key attribute needed of the system interconnect to indirectly support control plane access is that the processor on the other side of the interconnect can read and write into the FPGA with the FPGA acting as an addressable slave. This is common when there is only one external bus connected to the FPGA, such as PCI Express.</span></p><p class="P64"><span class="T173">In the case of the Xilinx Zynq platform, there are multiple interfaces between the on-chip system interconnect and the FPGA (called PL on Zynq). In this case the platform worker reserves one such interface exclusively for control access (the </span><span class="Code">M_AXI_GP0</span><span class="T173"> connected to a </span><span class="Code">cpmaster</span><span class="T173"> port), and uses different interfaces for the data plane.</span></p><p class="P41">The <span class="Code">sdp</span> ports act as bus masters, generating addressed DMA requests to the platform worker which should adapt and present those requests to the system interconnect. The <span class="Code">sdp</span><span class="T414"> ports</span> can <span class="T5">also</span> act as bus slaves, allowing <span class="T351">their use for control plane purposes. The platform worker decides whether to support the </span><span class="Code">sdp</span><span class="T351"> port as only a bus master (e.g. as it does on Zynq), or as both master or slave (as it does on PCI Express systems).</span></p><p class="P42">The sdp ports can be multichannel, meaning that the platform worker can provide multiple simultaneous paths between the system interconnect and the <span class="T414">FPGA</span> data plane infrastructure to support simultaneous data flows between workers in the FPGA and workers outside the FPGA.</p><p class="P40">The signaling protocol of a<span class="T351">n</span> <span class="Code"><span class="T351">sdp</span></span> port is described in the <a href="#a_SDP_Port_Protoco" class="Internet_20_link"><span class="T351">SDP Port Protoco</span></a> section.</p><h4 class="P420"><a id="a_5_4_4_3_Platform_Worker_Clocks"><span class="heading_numbering">5.4.4.3</span></a>Platform Worker Clocks</h4><p class="P112"><span class="T173">As seen above in the discussion of the control plane adaptation (the </span><span class="Code">cpmaster</span><span class="T173"> port), the platform worker sources the clock (and reset) used for the OpenCPI control plane on the platform. It also sources any clocks associated with the data plane where data/messages are flowing to other workers in other FPGAs or software platforms. In both these cases the clock and reset signals are part of the interface at these ports.</span></p><p class="P43">A platform worker usually also sources another clock for timekeeping on the platform <span class="T174">(in the </span><span class="Code">timebase</span><span class="T174"> port), u</span>nless there will never be any need for timekeeping on the platform.</p><p class="P44">In general these clocks already exist on the platform and are simply assigned to these additional purposes. I.e. the control clock may be the clock already associated with the bus between the CPU and FPGA. In some cases the platform worker may synthesize/generate new clocks for these purposes.</p><h3 class="Heading_20_3"><a id="a_5_4_5_The_Makefile_for_the_Platform_Worker"><span class="heading_numbering">5.4.5</span></a><a id="__RefHeading___Toc13567_2939887359"/>The Makefile for the Platform Worker</h3><p class="P45">Like any other worker, a platform worker has a worker <span class="Code">Makefile</span> that is used for various purposes, <span class="T415">normally created by the </span><span class="Code">ocpidev</span><span class="T415"> command.</span> Since the <span class="Code">HdlTarget</span><span class="T380">(</span><span class="Code">s</span><span class="T380">)</span> and <span class="Code">HdlPlatform</span><span class="T380">(</span><span class="Code">s</span><span class="T380">)</span> are implicit for a platform worker <span class="T415">(its name)</span>, there is no need to specify either (in the file or on the command line).</p><p class="P65">As with other HDL workers, the <span class="Code">Makefile</span> may reference other local source files or primitive cores and libraries from elsewhere. The basic contents for a platform worker's Makefile, <span class="T416">as created by </span><span class="Code">ocpidev</span><span class="T416">,</span> is simply:</p><p class="Code">include $(OCPI_CDK_DIR)/include/hdl/hdl-platform.mk</p><p class="P46"><span class="T416">The platform worker is built in its directory (in one or more target subdirectories). Pl</span>atform configurations <span class="T416">are also built</span> in the platform worker directory. In fact, when nothing else is specified, a base platform configuration (with no device workers) is built whenever the platform worker is built. To specify more platform configurations to build, specify them in the <span class="Code">Configurations</span> make variable in this <span class="Code">Makefile</span>, and for each one, write an XML file describing which devices (and any parameters for them) that should be included in the platform configuration. <span class="T416">See the next section for a complete description of platform configurations.</span></p><p class="P48">Running <span class="Code">make</span> in a platform worker directory builds the platform worker, the <span class="Code">base</span> configuration, and any other platform configurations as specified in the <span class="Code">Configurations</span> make variable.</p><p class="P66"><span class="T381">Each</span> platform worker must have a make file fragment called <span class="Code"><span class="T5">&lt;platform&gt;</span></span><span class="Code">.mk</span> which defines <span class="Code">make</span> variables required for users of the platform. There is one variable required to be set in this file: <span class="Code">HdlPart_</span><span class="Code"><span class="T5">&lt;platform&gt;</span></span>. This variable must be set to the part name of this platform. <span class="T381">Also, if there is an association between this HDL platform and an associated software platform (typically for FPGA SoCs with embedded processors), the HdlRccPlatform_&lt;platform&gt; variable can be set to name the RCC software platform associated with this HDL platform. An example file is for the Xilinx Zynq part on the ZedBoard platform:</span></p><p class="Code">HdlPart_zed=xc7z020-1-clg484<br/>HdlRccPlatform_zed=xilinx13_4</p><p class="P47">This indicates the actual part for the platform, and also indicates that the associated software platform is the 2013.4 release of Xilinx <span class="T416">L</span>inux.</p><p class="P66">The <span class="Code">ExportFiles</span> make variable is specific to platform workers and specifies which local files in this directory must be made available to users of the platform. Files in this list include the jtag and flash support scripts for the platform, as well as constraints files required to build container bitstreams for the platform.</p><h3 class="Heading_20_3"><a id="a_5_4_6_Specifying_Platform_Configurations_in_XML_Files_"><span class="heading_numbering">5.4.6</span></a><a id="__RefHeading___Toc38643_1517956095"/>Specifying Platform Configurations in XML <span class="T117">F</span>iles.</h3><p class="P48">For each platform configuration mentioned in the Configurations variable in the platform worker <span class="Code">Makefile</span>, there must be a corresponding <span class="T142">XML file</span>. This XML file has these <span class="T142">aspects</span>:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>The top level element <span class="T142">is</span> <span class="Code">HdlConfig</span>.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>A <span class="Code">device</span> child element <span class="T142">is present </span>for each device <span class="T142">in the configuration</span>.<span class="odfLiEnd"/></p></li></ul><p class="P203">For devices <span class="T142">previously </span>defined<span class="T142"> </span>as being part of the platform (and thus mentioned in the platform worker's OWD), the device element simply has a <span class="Code">name=</span> attribute indicating which of the platform's devices should be included in the platform configuration.</p><p class="P203">Platform configurations can also specify devices that are on cards plugged into one of the platform's slots. Specifying the <span class="Code"><span class="T376">card</span></span> attribute indicates which card the device is on, and implies that the card is plugged into one of the platform's slots. If there are multiple slots of the type that the indicated card is defined for, then a <span class="Code"><span class="T143">slot</span></span> attribute must be used to unambiguously indicate which slot the card is plugged into.</p><p class="P203">Thus platform configurations can indicate a mix of devices: those that are part of the platform, and others that should be made available assuming a certain type of card is plugged into one of the platform's slots. <span class="T147">T</span>he following example, <span class="T147">(for the ZedBoard platform), indicates that a configuration should be built that assumes a </span><span class="Code">lime-zipper-fmc</span><span class="T147"> card should be plugged into a slot on the platform, and thus device workers to support the </span><span class="Code">lime_adc</span><span class="T147"> device on that card should be included. There is no </span><span class="Code"><span class="T143">slot</span></span><span class="T147"> attribute included or required since the platform has only one slot.</span></p><p class="P296">&lt;HdlConfig&gt;<br/> &lt;device name='lime_adc' <span class="T148">card</span><span class="T144">=</span>'lime-zipper-fmc'/&gt;<br/>&lt;/HdlConfig&gt;</p><p class="P204">Device elements in this file can also set values for parameter properties of the device worker for the device, but <span class="T5">only those that are not already specified in the board definition</span> (either platform <span class="T417">worker</span> XML file or card definition XML). I.e. the board definition file specifies fixed aspects of the device as it exists on that board, but any other parameter properties not mentioned for the board can be configured as required in the platform configuration (or in the container). E.g.:</p><p class="P297">&lt;HdlConfig&gt;<br/> &lt;device name='lime_adc' <span class="T148">card</span><span class="T144">=</span>'lime-zipper-fmc'&gt;<br/>  <span class="T149">&lt;property name='use_control_clock' value='true'/&gt;<br/> &lt;/device&gt;</span><br/>&lt;/HdlConfig&gt;</p><p class="P204">The same capability exists for the platform worker itself. Parameter property values for the platform worker can be specified by top level property elements in this file, e.g.:</p><p class="P302"><span class="T83">&lt;HdlConfig&gt;<br/> </span><span class="T84">&lt;property name='ocpi_debug' value='true'/&gt;</span><span class="T83"><br/> &lt;device name='lime_adc' </span><span class="T145">slot=</span><span class="T83">'lime-zipper-fmc'/</span><span class="T84">&gt;</span><span class="T83"><br/>&lt;/HdlConfig&gt;</span></p><h3 class="P389"><a id="a_5_4_7_Control_Plane_Master_Port_Protocol"><span class="heading_numbering">5.4.7</span></a><a id="__RefHeading___Toc18281_4003722483"/>Control Plane Master Port Protocol</h3><p class="P247">This protocol is undocumented at thi<span class="T352">s</span> time.</p><h3 class="Heading_20_3"><a id="a_5_4_8_SDP_Port_Protocol"><span class="heading_numbering">5.4.8</span></a><a id="__RefHeading___Toc18283_4003722483"/>SDP Port Protocol</h3><p class="P247">This protocol is undocumented at this time.</p><h3 class="Heading_20_3"><a id="a_5_4_9_Testing_the_Basic_Platform_without_Devices"><span class="heading_numbering">5.4.9</span></a><a id="__RefHeading__17668_2116501284"/>Testing the <span class="T117">B</span>asic <span class="T117">P</span>latform <span class="T117">w</span>ithout <span class="T117">D</span>evices</h3><p class="P113"><span class="T142">Y</span>ou can build and run various tests <span class="T142">w</span>ithout supporting any of the devices on the platform. <span class="T230">This can be the first chance to test the full bitstream build flow.</span></p><p class="P115">In particular, to test the control plane support, you can test the platform with no interconnect/dataplane support by using applications like tb_bias which do not require interconnect support for the data plane.</p><p class="P115">Data plane support can then be tested one direction at a time, using simple applications like patternbias or biascapture that only flow data in one direction between the FPGA platform and the processor.</p><p class="P149">The biascapture assembly (in h<span class="Code">dl/assemblies/biascapture/biascapture.xml</span>) contains the following XML, which takes external input and captures it:</p><p class="Code">&lt;HdlAssembly&gt;<br/> &lt;Instance Worker="bias_vhdl" connect='capture' external='in'/&gt;<br/> &lt;Instance Worker='capture'/&gt;<br/>&lt;/HdlAssembly&gt;</p><p class="P149">The file-bias-capture application (in <span class="Code">examples/xml/file-bias-capture.xml</span>) reads from a file and then uses the above assembly. The XML is:</p><p class="Code">&lt;application package='ocpi' done='file_read'&gt;<br/> &lt;instance component="file_read" connect="bias"/&gt;<br/> &lt;instance component='bias' connect="capture"/&gt;<br/> &lt;instance component="capture"/&gt;<br/>&lt;/applica<span class="T418">tion&gt;</span></p><p class="P258">Testing in one direction greatly simplifies initial debugging of platform workers that are using new interconnect adapters for SDP.</p><h2 class="P430"><a id="a_5_5_Device_Support_for_FPGA_Platforms"><span class="heading_numbering">5.5</span></a><a id="__RefHeading__1039_1060509377"/>Device Support for <span class="T197">FPGA</span> <span class="T117">P</span>latforms</h2><p class="P49"><span class="T150">Device support development involves the creation of workers that enable OpenCPI to use the devices attached to an HDL platform or card. </span><span class="T29">Device workers</span><span class="T150"> are</span> like "device drivers" for specific FPGA-attached hardware devices  workers that <span class="T150">interface with</span> devices using device-specific signals and I/O pins.</p><p class="P50"><span class="T419">In addition to a control interface and data interface(s) that an application worker would have, device workers also </span>have signal connections with hardware attached to pins of the FPGA.  <span class="T276">For example,</span> a device worker <span class="T276">for an output device (like a DAC or a printer) </span>would have some signals attached to FPGA pins that are connected to the <span class="T151">output</span> device, and would also have a normal <span class="T276">worker input</span> data port that would be connected to some application worker <span class="T151">producing</span> the data.</p><p class="P116">[Diagram showin<span class="T192">g</span> app worker  device worker  device.]</p><p class="P52">When the device is attached to the FPGA via dedicated pins, the device is considered part of the platform. When the device is on an optional card plugged into a slot (which has pins connected to the FPGA), the device is considered part of the card, not the platform. In both case<span class="T276">s</span> the same device worker is used to access <span class="T151">and control </span>the device. <span class="T312">An OpenCPI HDL device worker can be reused across platforms and cards.</span></p><p class="P52">A simple <span class="T151">DA</span>C device worker <span class="T291">might</span> have an <span class="T151">X</span>ML descriptor <span class="T276">(OWD) </span>like this:</p><p class="P303">&lt;HdlDevice Language='vhdl' spec='<span class="T151">dac</span>-spec'&gt;<br/> &lt;<span class="T420">streaminterface</span> name='<span class="T252">in</span>' datawidth='<span class="T151">8'</span>/&gt;<br/> <span class="T151">&lt;signal output='valid'/&gt;<br/> &lt;signal output='data' width='8'/&gt;<br/> &lt;signal output='dataclk'/&gt;</span><br/>&lt;/HdlDevice&gt;</p><p class="P85">The <span class="Code">HdlDevice</span> element is similar to the <span class="Code">HdlWorker</span> element except that i<span class="T291">t</span> allows some extra features like the <span class="Code">signal</span> child elements.</p><p class="P51"><span class="T151">The </span><span class="Code">spec='dac-spec'</span><span class="T151"> attribute indicates that this device worker implements the component spec common to all DAC devices (properties and ports). It can add its own properties as required.</span></p><p class="P51"><span class="T151">The </span><span class="Code"><span class="T420">streaminterface</span></span><span class="T151"> element simply sets the physical data width of the input port to 8.</span></p><p class="P51"><span class="T151">The </span><span class="Code">signal</span><span class="T151"> elements specify the names of device signals (HDL language ports) connected to the FPGA pins that are connected to a device supported by this device worker.</span></p><p class="P85">All the details of an HdlDevice XML are mentioned below. An example of the device worker source code for this (simplistic, single clock domain) device worker would be:</p><p class="Code">in_out.take &lt;= in_in.ready and (ready or not in_in.valid);<br/>valid    &lt;= in_in.ready and in_in.valid;<br/>data    &lt;= in_in.data;</p><h3 class="P390"><a id="a_5_5_1_A_Device_Worker_Implements_the_Data_Sheet"><span class="heading_numbering">5.5.1</span></a><a id="__RefHeading___Toc38645_1517956095"/>A Device Worker Implements the Data Sheet</h3><p class="P57"><span class="T154">It is recommended</span> to <span class="T155">use</span> the <span class="T155">data sheet's </span>signal names and register names in the device worker code <span class="T154">(</span>and <span class="T156">its OWD)</span> <span class="T155">so they </span>are easily correlated to the names in the data sheet. This allows for easier code maintenance and system level debugging. <span class="T155">E.g., a system engineer may find it especially valuable to probe and examine device-level settings when referring to the data sheet, even though they might not be HDL coders. When the naming conventions in the data sheet are at odds with better naming conventions, it may still be preferable to use them for these reasons.</span></p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T23">Implementing all the functionality in a device may not be desirable when it is initially written for a given platform, since that platform may not use all the device's capabilities. W</span><span class="T5">hen a device worker</span><span class="T23"> </span><span class="T5">is insufficient </span><span class="T23">in this way for a new platform or project</span><span class="T5">, it should be enhanced in such a way that any existing uses of it will still work (backward compatibility) so that the community in fact gets the benefit of a newer more complete device worker implementation.</span><span class="odfLiEnd"/></p></li></ul><p class="P58">As mentioned above, multi-function <span class="T157">chips</span> should generally be supported by multiple device workers. But <span class="T5">within</span> any device worker <span class="T157">for a function</span>, if there are features or modes that carry significant overhead, they should be controlled by parameter properties <span class="T157">(thus generics in VHDL) </span>so that the resources are not wasted when the feature/mode is not being used. <span class="T155">This promotes re-use of the device worker.</span></p><p class="P59">When devices have internal registers, the most common approach is to define each internal register as a property in the OWD (not in the OCS), and use the raw property feature of <span class="T157">HDL </span>workers to access those registers. <span class="T420">This enables direct control and display of the internal configuration of the device with no programming since the </span><span class="Code">ocpirun</span><span class="T420"> and </span><span class="Code">ocpihdl</span><span class="T420"> commands can easily access this information. It allows a clean hardware-to-software handoff when the device worker implements what the datasheet describes.</span></p><h3 class="P391"><a id="a_5_5_2_Device_Component_Specs_and_Device_Worker_Modularity"><span class="heading_numbering">5.5.2</span></a><a id="__RefHeading___Toc4826_234407367"/>Device Component Specs and Device Worker Modularity</h3><p class="P51"><span class="T151">In order to ensure that similar devices have common application-visible behavior, OpenCPI has </span><span class="T24">device </span><span class="T30">class</span><span class="T24"> specs</span><span class="T151"> that represent commonly used classes of devices. This is a special case of the component specification (OCS) being the basis of multiple implementations (workers) of the same functionality. In this device case, the multiple implementations are for different devices of the same class. Device workers for devices in the same class implement the same OCS; a device class is represented by this device class OCS.</span></p><p class="P55">As the integration of functionality on single chips increases, it is common for a chip to implement multiple functions of different classes <span class="T277">of device (e.g. an ADC and a DAC)</span>. <span class="T277">Generally</span>, this should <span class="T5">not</span> result in a single device worker for the multi-function <span class="T277">chip. Creating such a single device worker would result in </span>the <span class="T277">functions</span> not <span class="T277">being </span>represented to the system or to users the same as <span class="T277">a similar function from a </span>non-integrated single-purpose <span class="T277">chip</span>. <span class="T277">Thus, a device worker should be developed for each class that is present on the multifunction chip.</span></p><p class="P53">This avoids exposing the multi-function integration of a single chip <span class="T278">to applications </span>and <span class="T292">thus enhances</span> the re-use of applications. Furthermore, when only one function is needed, a multi-function device worker <span class="T292">would</span> use FPGA resources for functions that <span class="T278">are</span> not being used. <span class="T152">While it is possible to develop swiss-army-knife device workers for multifunction chips that intend to avoid using resources for parts that are unused, OpenCPI recommends designs that are more modular, namely:</span></p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T152">Chips</span> that contain multiple functions should generally be treated as multiple devices using multiple device workers <span class="T152">of the appropriate classes</span>.<span class="odfLiEnd"/></p></li></ul><p class="P53">When a multi-function device has pins or hardware that must be shared among the functional device worker<span class="T253">s</span> (e.g. <span class="T152">a </span>common reset or SPI or clocks), a subdevice module can be used <span class="T152">for such shared logic</span>. This is discussed in a later section.</p><p class="P54"><span class="T279">T</span>he first step in developing support for a new device is to identify the device <span class="T279">class</span> specs that are relevant, and determine the list of device workers that must be created. <span class="T279">Each device class spec defines common properties, data ports, and implied functionality that all device workers of the class should try to implement.</span></p><p class="P106">Some examples of classes of devices currently defined are:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>ADC and DACs which convert between isochronous <span class="T292">data and</span> flow-controlled data and may have scheduling and time-stamping functionality.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Upconverters and downconverters between IF/Baseband and RF.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Clock generators<span class="odfLiEnd"/></p></li><li><p class="P467" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>DRAM<span class="odfLiEnd"/></p></li></ul><h3 class="P392"><a id="a_5_5_3_Device_Proxies__Software_Workers_that_Control_HDL_Device_Workers"><span class="heading_numbering">5.5.3</span></a><a id="__RefHeading___Toc4828_234407367"/>Device Proxies  <span class="T153">Software Workers that Control HDL Device Workers</span></h3><p class="P56">A device proxy is a software <span class="T153">worker</span> <span class="T254">(RCC/C++) </span>that is specifically paired with a device worker in order to translate a higher level control interface for a class <span class="T254">of devices </span>into the lower level actions required on <span class="T153">a specific </span>device. <span class="T153">While i</span>t is possible that the <span class="T153">HDL </span>device worker itself could support the required<span class="T153"> generic interface, for many device classes, it is more productive to split the supporting code for the device into a (software) proxy and a HDL device worker. When a device worker has a proxy, it is termed the slave of that proxy. Using a proxy is not always required since the underlying (slave) device worker is always controllable directly.</span></p><p class="P117">The requirements for a class of devices may in fact be split into a low level part that HDL device workers typically implement, and a high level part that would usually be implemented in a proxy. An example might be where an ADC device worker had a low-latency gain adjustment input port that could probably not be implemented in software, as well as a high level sample rate setting that would be better implemented in a proxy.</p><p class="P107">Device proxies are simple C++ <span class="T280">(</span><span class="T32">not C</span><span class="T280">)</span> RCC workers where the XML (OWD) specifies a slave attribute, indicating which worker is the slave for that proxy. That attribute <span class="T293">enables</span> convenient access to all the <span class="T280">slave</span> worker's properties from the proxy<span class="T293">'s</span> code.</p><p class="P107">Thus there are two patterns for <span class="T255">implementing HDL device support in OpenCPI</span>:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T5">Device-worker-only</span>, where the device worker implements both the device component spec as well as any required higher level properties.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T5">Device-worker-and-proxy,</span> where the device worker implements only the device component spec, and the device proxy implements the higher level properties for the class.<span class="odfLiEnd"/></p></li></ul><p class="P57">A common example of higher level properties for a device class is the center/tuning frequency of an RF/IF up/down converter. The high level property is a convenient floating point number, which typically requires setting a variety of device registers to accomplish. The proxy code would make the necessary translations and computations before setting the correct register values <span class="T293">in the HDL device worker</span>.</p><h3 class="P393"><a id="a_5_5_4_Subdevice_Workers"><span class="heading_numbering">5.5.4</span></a><a id="__RefHeading___Toc4832_234407367"/>Subdevice Workers</h3><p class="P86">[Diagrams here, based on existing PPTs etc.]</p><p class="P108">Writing <span class="T281">a </span>device worker to be reusable across many embedded systems is made more difficult by two facts:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Multifunction devices have aspects that are shared between functions <span class="T281">(e.g. common reset)</span><span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Controlling different devices sometimes involves sharing control/configuration buses (e.g. SPI and I2C) or other hardware.<span class="odfLiEnd"/></p></li></ul><p class="P108">In order to preserve the modularity of distinct classes of devices, <span class="T256">as well as</span> the reusability of device workers, <span class="T256">OpenCPI supports a further specialization of device workers called subdevice workers.</span></p><p class="P67">A subdevice worker implements the required sharing of low level hardware between device workers. It is defined to <span class="T68">support</span> some number of device workers, and is thus instantiated whenever any of its <span class="T5">supported</span> device workers <span class="T281">are</span> instantiated in a platform configuration or container. Subdevice workers may simply support the different device workers used on a single multi-function device, or they may support a variety of different device workers that are found on a platform. Thus they <span class="T363">are usually</span> very <span class="T5">platform-specific</span> or <span class="T5">card-specific</span>.</p><p class="P69">New subdevice workers may be required when a device with an existing device worker is used on a new platform or card, since the sharing of hardware (e.g. an I2C bus) may <span class="T368">require</span> different <span class="T368">logic</span>. That may result in the existing device worker being refactored to share functions that it did not share before.</p><p class="P145">There are cases where a subdevice is required to support a single device worker when some low level logic must be different for different platforms. This allows the device worker itself to remain portable, letting <span class="T369">alternative </span>subdevices to do platfor<span class="T369">m</span>/card-specific dirty work.</p><p class="P68">Subdevice workers <span class="T282">typically </span>have no control <span class="T282">interface</span>. Like device workers they have signals that are attached to FPGA pins. <span class="T175">These pins are usually what is shared between the device workers that the subdevice supports. It is possible that subdevices have no external signals and only exist to coordinate between several optionally present device workers.</span></p><p class="P70">Subdevice workers also have connections to the device workers they support. The XML <span class="T282">(a minimal OWD) </span>for a subdevice defines:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>The hardware FPGA pins i<span class="T282">t is</span> attached to <span class="T257">(via the signals element like all device workers)</span><span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>The device workers it supports<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>How it is connected to each of the device workers it supports.<span class="odfLiEnd"/></p></li></ul><p class="P146">Since platforms and cards declare which devices the<span class="T430">y</span> <span class="T285">have</span>, including subdevices, they can specify which subdevices are present. This allows different subdevices to be used for different platforms while leaving the device workers untouched and reused.</p><p class="P152">For help in understanding these aspects of OpenCPI, look closely at the <span class="Code">lime_zipper_fmc_lpc</span> card (<span class="Code">hdl/cards/specs/lime_zipper_fmc_lpc.</span><span class="Code"><span class="T431">xml</span></span>), and the devices that it includes. This card is <span class="T431">used</span> in the <span class="Code">zed</span> platform for certain configurations based on the <span class="Code">hdl/platforms/zed/zed_zipper_fmc</span><span class="Code"><span class="T432">*</span></span> <span class="T431">fi</span>les. To learn more about raw properties, take a look at the <span class="Code">si5351</span> device <span class="T432">at</span> <span class="Code">hdl/devices/si5351.hdl</span>. The many raw properties declared in the xml <span class="T432">fi</span>le correspond to hardware registers on the si5351 chip.  <span class="T432">See</span> chapter 7/page 23 (Register Map Summary") at <span class="Code">https://cdnshop.adafruit.com/datasheets/Si5351.pdf</span>. Each raw property in the OpenCPI <span class="Code">si5351.xml</span> corresponds to a line in the datasheet table there.</p><p class="P151">Finally, for a further understanding of subdevices, take a look at <span class="Code">lime_spi</span> <span class="T432">(in </span><span class="Code">hdl/devices/lime_spi.hdl</span><span class="T432">)</span>, which is a subdevice that handles raw property accesses and low level SPI functionality. It supports the lime tx/rx devices, which means that the lime tx/rx devices can delegate their raw property accesses to the <span class="Code">lime_spi</span> subdevice.</p><h4 class="Heading_20_4"><a id="a_5_5_4_1_Using_RawProp_Ports_with_SubDevices"><span class="heading_numbering">5.5.4.1</span></a>Using RawProp <span class="T356">Ports</span> with SubDevices</h4><p class="P60">The example below defines a subdevice with no control interface (no properties or control operations), driving two signals that are an I2C interface, and supporting a si5351 clock generator device worker via a <span class="Code">rawprop</span> worker port (defined <span class="T283">below</span>). It is declaring that if that device is present, it should also be present and be connected to that device worker via the <span class="Code">rawprop</span> port. By including this subdevice <span class="T421">in a board description file (</span>in the platform<span class="T421">'s</span> OWD<span class="T421"> a card's spec file)</span>, it will be associated <span class="T5">on this </span><span class="T48">board</span> with the <span class="Code">si5351</span> device worker.</p><p class="P299">&lt;HdlDevice language="vhdl"&gt;<br/> &lt;componentspec nocontrol='true'&gt;<br/> &lt;rawprop/&gt;<br/> &lt;supports worker='si5351'&gt;<br/>  &lt;connect port="rawprops" to="r<span class="T284">aw</span>props"/&gt;<br/> &lt;/supports&gt;<br/> &lt;Signal Inout='sda'/&gt;<br/> &lt;Signal Inout='scl'/&gt;<br/>&lt;/HdlDevice&gt;</p><p class="P71">The most common connection between a device worker and a subdevice that supports it is the <span class="Code">rawprop</span> connection that enables a device worker to delegate some or all of its raw property accesses to the subdevice. The device worker declares a <span class="Code">rawprop</span> master port for this delegation, and the subdevice declares an array of one or more a <span class="Code">rawprop</span> slave ports to support device workers this way. <span class="T258">This type of connection is common when there is a shared control path like SPI or I2C to access the registers of several devices' properties.</span></p><p class="P71"><span class="T258">The </span><span class="Code">rawprop</span><span class="T258"> port has a bundle (VHDL record) of signals that is identical to the raw signals defined in the </span><span class="Internet_20_link"><span class="T258">Raw Access to Properties</span></span><span class="T258"> section of the </span><span class="FirstEmphasis">OpenCPI HDL Development Guide</span><span class="T258">. This record is called raw in both the control interface signals (</span><span class="Code">props_in.raw</span><span class="T258">, </span><span class="Code">props_out.raw</span><span class="T258">) as well as the </span><span class="Code">rawprop</span><span class="T258"> port signals (</span><span class="Code">rawprops_in.raw</span><span class="T258"> and </span><span class="Code">raw_props_out.raw</span><span class="T258">).</span></p><p class="P72"><span class="T178">A</span> <span class="Code">rawprop</span> worker port consists of a VHDL record of signals that allow a device worker to easily delegate all of its raw property accesses to the subdevice, using this VHDL:</p><p class="P300">rawprops_out.present   &lt;= '1';<br/>rawprops_out.reset    &lt;= ctl_in.reset;<br/>rawprops_out.raw     &lt;= props_in.raw;<br/>props_out.raw      &lt;= rawprops_in.raw;</p><p class="P72">The <span class="Code">present</span> signal tells the subdevice that there is a connection to a <span class="T178">device </span>worker. The <span class="Code">reset</span> signal tells the subdevice that this <span class="T178">device </span>worker is being reset, and the <span class="Code">raw</span> subrecord is conveying the raw property signals <span class="T178">between</span> the device worker <span class="T178">and</span> the subdevice. <span class="T178">In the subdevice, the </span><span class="Code">rawprop</span><span class="T178"> port may be an array port (with </span><span class="Code">count</span><span class="T178"> attribute &gt; 1) when the subdevice worker is supporting multiple device workers.</span></p><h4 class="Heading_20_4"><a id="a_5_5_4_2_Using_DevSignal_Ports_with_SubDevices"><span class="heading_numbering">5.5.4.2</span></a>Using DevSignal Ports with SubDevices</h4><p class="P73">When the <span class="Code">rawprop</span> connection is not sufficient for all of the shared functionality in the subdevice <span class="T360">(raw properties, presence and shared control reset)</span>, another type of connection is used, which is <span class="T284">a customized</span> <span class="T284">set</span> of signals. This is called a <span class="Code">devsignal</span> <span class="T355">port. The port is declared for both the device worker (or platform worker in some cases) and the subdevice worker using </span><span class="Code">devsignal</span><span class="T355"> element.</span></p><p class="P74"><span class="T176">The </span><span class="Code">devsignal</span><span class="T176"> element declares the port and has four attributes: </span><span class="Code">name</span><span class="T356">, </span><span class="Code">master,</span><span class="T356"> </span><span class="Code">signals</span> <span class="T360">and </span><span class="Code">count</span><span class="T360">. The optional name attribute provides a port name, with the default being </span><span class="T359">"</span><span class="Code">dev</span><span class="Code"><span class="T359">"</span></span>. <span class="T357">The boolean </span><span class="Code">master</span><span class="T357"> attribute defines a master/slave role for the port, which is used relative to signal directions. The </span><span class="Code">signals</span><span class="T357"> </span><span class="T40">attribute</span><span class="T357"> is the name of a file containing a top-level </span><span class="Code">signals</span><span class="T357"> </span><span class="T40">element</span><span class="T357"> , containing signal definitions for this port. The direction of the signals declared in the file are relative to the master port. Here is an example signals file (named </span><span class="Code">mydevsignals.xml</span><span class="T357">):</span></p><p class="Code">&lt;signals&gt;<br/> &lt;signal <span class="T361">i</span>nput="DATA_CLK_P"/&gt;<br/> &lt;signal <span class="T361">i</span>nput="DATA_CLK_N"/&gt;<br/> &lt;signal output='SYNC_IN'/&gt;<br/> &lt;signal output='ENABLE'/&gt;<br/>&lt;/signals&gt;</p><p class="P142">The master port <span class="T360">(usually the device worker) </span>would drive the <span class="Code">SYNC_IN</span> and <span class="Code">ENABLE</span> signals as outputs, and <span class="T360">the slave port (usually the subdevice) would receive them as inputs. The port declaration in the OWD of the device workers would be:</span></p><p class="Code">&lt;devsignal master='true' signals='mydevsignals'/&gt;</p><p class="P143">Since the signals are common to both ports, they are in their own file, usually in the <span class="Code">specs</span> directory of the component library containing both device and subdevice workers (usually <span class="Code">hdl/devices/specs</span>). Since the purpose of the subdevice is normally to share/multiplex output signals among more than one device worker, the subdevice<span class="T361">'s</span> port declaration normally includes a count to indicate that the port is actually an array of identical ports. So the subdevice port declaration would be something like:</p><p class="P313">&lt;devsignal signals='mydevsignals' <span class="T360">count='2'</span>/&gt;</p><p class="P144">As with the rawprops examples above, the connection of these ports is indicated by the <span class="Code">supports</span> element <span class="T362">and its </span><span class="Code">connect</span><span class="T362"> child element.</span></p><h3 class="P394"><a id="a_5_5_5_Testing_Device_Workers_with_Emulators"><span class="heading_numbering">5.5.5</span></a><a id="__RefHeading___Toc18285_4003722483"/><span class="T434">Testing</span> Device Workers <span class="T434">with Emulators</span></h3><p class="P205">A device worker may specify that it is <span class="T434">actually </span>a device <span class="T5">emulator</span> that emulates <span class="T434">a</span> device for test purposes. <span class="T434">Thus while a normal device worker supports and controls a device by driving and receiving signals from the device (via FPGA pins), the emulator </span><span class="T71">acts like the device</span><span class="T434">. So if the device has a reset input pin, the normal device worker will drive that reset signal as an output of the device worker, into the actual device. The emulator for the device will have that reset signal as an </span><span class="T49">input</span><span class="T434"> signal.</span></p><p class="P262">We discuss this relationship such that:</p><ul><li><p class="P468" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>We use emulator to mean emulator worker, which is a special type of device worker (much like a platform worker is a special type of device worker).<span class="odfLiEnd"/></p></li><li><p class="P468" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>The device worker supports a device, and may have an associated emulator, which is <span class="T70">its</span> emulator.<span class="odfLiEnd"/></p></li><li><p class="P468" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>The emulator emulates a device which has a device worker, which is <span class="T70">its</span> device worker.<span class="odfLiEnd"/></p></li></ul><p class="P268">There is nothing about emulators that restricts them to running only in simulators, so when it is useful, they can be written to be synthesizable and executed in hardware.</p><h4 class="P421"><a id="a_5_5_5_1_Emulator_Signals__Ports_and_Properties"><span class="heading_numbering">5.5.5.1</span></a>Emulator Signals, Ports and Properties</h4><p class="P205"><span class="T435">Emulators establish this relationship</span> <span class="T435">with</span> a top level <span class="Code">emulate</span> attribute whose value is the name of the device worker for the device it emulates. An emulator automatically inherits the signals from <span class="T435">its</span> device worker, with the directions reversed. Thus no <span class="Code">signal</span> elements need be defined <span class="T436">in an emulator's OWD.</span></p><p class="P261">Similarly, for non-data, <span class="T435">non-control</span> ports (usually <span class="Code">rawprop</span> or <span class="Code">devsignals</span> ports), the emulator has the same ports defined, <span class="T436">with the same name,</span> with the opposite master attribute value. I.e. when the device worker is a master of such a port, the emulator is a slave. <span class="T436">The emulator has its own control port, and may have its own data ports. </span></p><p class="P262">Finally, the emulator <span class="T436">also </span>inherits all the parameter and writable properties of <span class="T436">its </span>device worker <span class="T436">so that when used, it sees the same parameter and property values that its device worker sees. It can then emulate accordingly. It can have its own additional properties of course, but it cannot have parameters with multiple values. its build configurations are the same as its device worker's build configurations.</span></p><p class="P206">When testing <span class="T437">a device worker </span>with <span class="T437">its</span> emulator both the emulator and the device worker <span class="T437">are </span>instantiated, <span class="T437">their signals are connected, and the non-control, non-data ports are connected between them. Thus they form a test unit (UUT) where each has its own control port, and each may have its own data ports.</span></p><h4 class="Heading_20_4"><a id="a_5_5_5_2_Emulator_Worker_OWD_XML_Files"><span class="heading_numbering">5.5.5.2</span></a>Emulator Worker OWD XML Files</h4><p class="P263">An emulator's OWD references the OCS for all emulators, <span class="Code">emulator-spec</span>, using its <span class="Code">spec</span> attribute. It identifies its device worker using the <span class="Code">emulate</span> attribute, whose value must include the <span class="Code">.hdl</span> model suffix. <span class="T438">An emulator must have a control interface so it cannot set the </span><span class="Code">nocontrol</span><span class="T438"> attribute to </span><span class="Code">true</span><span class="T438">.</span></p><p class="P265">An example emulator OWD is:</p><p class="Code">&lt;HdlDevice emulator='mydevice.hdl' spec='emulator-spec'&gt;<br/> &lt;property name='errorcount' volatile='true'/&gt;<br/> &lt;streaminterface name='tracedata' <span class="T439">producer='1'/&gt;<br/>&lt;/HdlDevice&gt;</span></p><p class="P266">This OWD says that the emulator will have a volatile property <span class="Code">errorcount</span><span class="T440"> </span>to report the number of errors encountered while observing its device worker's behavior. This property is in addition to all its device worker's parameters and writable properties <span class="T440">that are automatically inherited.</span></p><p class="P264"><span class="T440">The </span><span class="Code">streaminterface</span><span class="T439"> element is directly introducing a data output port even though there is no such port in the OCS, since emulators are not required to have such ports. </span></p><p class="P267"><span class="T441">T</span>he results of running the emulator <span class="T441">would be</span> the <span class="Code">errorcount</span> property<span class="T441">'s value</span> and the data produced at its <span class="Code">tracedata</span> output port.</p><p class="P268">An emulator OWD has these restrictions when compared to a normal device worker:</p><ul><li><p class="P469" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>It must implement/reference the <span class="Code">emulator-spec</span> (via <span class="Code">spec</span> attribute)<span class="odfLiEnd"/></p></li><li><p class="P469" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>It must reference its device worker via the <span class="Code">emulate</span> attribute<span class="odfLiEnd"/></p></li><li><p class="P469" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>It cannot have any property whose name conflicts with any parameter or writable property of its device worker.<span class="odfLiEnd"/></p></li><li><p class="P470" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>It cannot have any data port whose name conflicts with any of its device worker's ports.<span class="odfLiEnd"/></p></li><li><p class="P469" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>It cannot have any signals (it will inherit its device worker's signals)<span class="odfLiEnd"/></p></li></ul><h4 class="P422"><a id="a_5_5_5_3_Using_an_Emulator_for_Device_Worker_Unit_Testing"><span class="heading_numbering">5.5.5.3</span></a>Using an Emulator for Device Worker Unit Testing</h4><p class="P268">The OpenCPI unit test framework described in the <span class="FirstEmphasis">OpenCPI Component Development</span> document also applies to testing device workers. When a test directory is defined for a device worker (using the <span class="Code">ocpidev create test</span> command), OpenCPI expects to find an emulator worker in the same component library and will instan<span class="T442">tiate</span> <span class="T442">and connect </span>it next to the device worker in all test assemblies.</p><p class="P269">All the testing then proceeds the same as testing application workers with these additions:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>The final values for the emulator's own properties is also available to verification scripts.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Data input ports o<span class="T443">f</span> the emulator must be supplied with data with input files or generator scripts.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Data output ports on the emulator will captured and available to verification scripts.<span class="odfLiEnd"/></p></li></ul><p class="P269">Essentially the UUT becomes the combination of a device worker and its emulator.</p><p class="P269">If the emulator is written to be synthesizable, <span class="T443">test execution</span> can include hardware platforms as well as simulator platforms.</p><p class="P207">n the container as floating devices <span class="T353">(devices which have not been declared as existing on the platform).</span></p><h4 class="Heading_20_4"><a id="a_5_5_5_4_Using_an_Emulator_in_Containers_without_the_Unit_Test_Framework_"><span class="heading_numbering">5.5.5.4</span></a>Using an <span class="T443">E</span>mulator in <span class="T443">C</span>ontainers without the <span class="T443">U</span>nit <span class="T443">T</span>est <span class="T443">F</span>ramework.</h4><p class="P270">When a more complex testing configuration is needed beyond the one device worker with its emulator scenario describe above, it can be done by instantiating device workers and emulators directly in a container using the floating device feature.</p><p class="P270">Floating devices are simply those that are not really part of the platform being targeted (usually simulators in this case), but are devices instantiated and connected directly to their emulators. This allows for test configurations that combine device workers, subdevice workers, and emulators in various ways.</p><p class="P249">An example container XML file that uses emulators is:</p><p class="Code">&lt;HdlContainer platform='isim'&gt;<br/>  &lt;device worker='lime_spi_em' floating='1'/&gt;<br/>  &lt;device worker='lime_spi' floating='1'/&gt;<br/>  &lt;device worker='lime_tx' floating='1'/&gt;<br/>  &lt;device worker='lime_tx_em' floating='1'/&gt;<br/>&lt;/HdlContainer&gt;</p><p class="P249">This example instantiates two device workers (lime_spi and lime_tx) as well as their emulators. The emulators are automatically wired up with the device workers then are emulating. They all use the <span class="Code">floating</span> attribute since they are not defined as existing on the <span class="Code">isim</span> platform.</p><p class="P250">[Preliminary feature with limited support]</p><h3 class="Heading_20_3"><a id="a_5_5_6_Higher-level_Endpoint_Proxies_Suitable_for_Applications"><span class="heading_numbering">5.5.6</span></a><a id="__RefHeading___Toc4834_234407367"/>Higher-level <span class="T260">Endpoint Proxies</span> <span class="T117">Suitable for Applications</span></h3><p class="P122">[Preliminary feature with no specific support]</p><p class="P109">As discussed above, we use <span class="T61">device proxies </span>to normalize the behavior of a class of devices. The granularity of such classes is sometimes below the level appropriate for applications, <span class="T260">but is optimal for sharing, reuse, and rapid enablement of new platforms.</span></p><p class="P110">An example <span class="T260">of fine granularity </span>is a clock generator chip. There are many such chips, and device workers <span class="T286">are</span> written for them. <span class="T286">T</span>hey should all act the same, in terms of how they are set up and programmed, <span class="T286">usually using a device proxy</span>. When users or applications want access to a clock generator device, they should be able to use it the same way as any other clock generator device.</p><p class="P110">However, clock generator chips are also frequently used to drive other devices to a specific clock (e.g. sampling) frequency, and there may be some specific relationship on a given platform or card between specific clock generator chips and the devices they provide clocking too.</p><p class="P110">So, in addition to device proxies that are defined for the granularity of individual devices, that have device workers, OpenCPI <span class="T259">also defines specifications for some higher level proxies called </span><span class="T63">Endpoint Proxies,</span><span class="T259"> for presenting a collection of devices to applications as something to connect and configure within the application. The purpose of higher level Endpoint Proxies is to remove all device specifics from applications, rather than simply normalize the behavior of a device to its class. Applications and users want to see standard, portable interfaces for endpoints (e.g. sources and sinks of radio data). Endpoint proxies make that possible.</span></p><p class="P61">Endpoint proxies are simply proxies that typically have multiple slaves, which themselves are probably device proxies, or in some cases device workers.</p><p class="P62">As with subdevices at the bottom of the OpenCPI device support stack, endpoint proxies are at the top of the device support stack, appropriate for use by applications. But both may <span class="T286">internally </span>be somewhat platform specific. Both exist to leave the device workers alone so that they are reusable across platforms <span class="T261">and cards.</span></p><p class="P118">[Insert diagram for stack]</p><p class="P61">Applications use endpoint proxies by instantiating a component of an endpoint proxy spec. A good example of a class of endpoint proxies is a radio front end (as defined by the RedHawk system <span class="T158">or GNU Radio</span>), or a transceiver subsystem as defined in the Wireless Innovation Forum, or the RF Chain as defined in the JTRS MHAL specification. <span class="T158">Since OpenCPI is not a software radio framework as such, an endpoint proxy can represent any application-level subsystem or source or sink of data.</span></p><h3 class="P395"><a id="a_5_5_7_XML_Metadata_for_Device_Workers_Subdevices_DeviceProxies_EndpointProxies"><span class="heading_numbering">5.5.7</span></a><a id="__RefHeading__17670_2116501284"/>XML Metadata for Device Workers/Subdevices/DeviceProxies/EndpointProxies</h3><p class="P75">The <span class="T363">three</span> types of workers that relate to device support in OpenCPI <span class="T177">are</span>:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Device Workers<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Device Proxies<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Subdevices<span class="odfLiEnd"/></p></li></ul><p class="P75">All these are workers <span class="T195">and </span>share the XML structure of workers via the OWD for ports and properties.</p><p class="P75">Device workers use the normal <span class="T262">top-level </span><span class="Code">spec</span> attribute to identify the class of the device. Device workers and subdevice workers use the <span class="Code">HdlDevice</span> top level XML tag, have <span class="Code">signal</span> elements for hardware signals, and may have <span class="Code">rawprop</span> and <span class="Code">devsignal</span> ports to connect device <span class="T363">workers</span> <span class="T177">to</span> subdevice <span class="T363">workers</span>. <span class="T177">If a device worker uses a subdevice worker, it may in fact have no </span><span class="Code">signal</span><span class="T177"> elements.</span></p><p class="P75">Subdevice workers have <span class="Code">supports</span> child elements describing which device workers they support and how they are connected to them.</p><p class="P76">Device proxies have a top-level <span class="Code">slave</span> attribute identifying which worker they are a proxy for. The name should include the authoring model suffix, such as:</p><p class="Code"><span class="T177">slave='</span>adc-chip123.hdl<span class="T177">'</span></p><p class="P75"><span class="T362">The </span><span class="Code">signal</span><span class="T362"> elements in the OWD for devices and subdevices are as described above for platform workers in </span><a href="#a_Signal_Declaration_XML_Elements" class="Internet_20_link"><span class="T362">Signal Declaration XML Elements</span></a><span class="T362">.</span></p><h4 class="Heading_20_4"><a id="a_5_5_7_1_RawProp_XML_Elements_for_Device_Workers_and_Subdevice_Workers"><span class="heading_numbering">5.5.7.1</span></a>RawProp XML <span class="T117">E</span>lements for <span class="T117">D</span>evice <span class="T117">W</span>orkers and <span class="T117">S</span>ubdevice <span class="T117">W</span>orkers</h4><p class="P79">The <span class="Code">rawprop</span> child element identifies a port of the worker that extends the raw property signals from a device worker to a subdevice worker. <span class="T364">It may be an array port. </span>Its attributes <span class="T178">(all optional) </span>are:</p><p class="IndentHang"><span class="T61">Name</span>  <span class="T365">The name of the port</span> (default <span class="T178">is</span> <span class="Code">rawprops</span>)</p><p class="IndentHang"><span class="FirstEmphasis"><span class="T179">Optional</span></span><span class="T180">  </span><span class="T187">I</span><span class="T180">ndicates</span> <span class="T178">if</span> a connection to this port is <span class="T178">not </span>required <span class="T178">(default </span><span class="Code">false</span><span class="T178">). Normally true on subdevices supporting multiple optional devices.</span></p><p class="IndentHang"><span class="T61">Count</span><span class="T180">  </span><span class="T365">I</span>ndicates <span class="T365">if &gt; 1 that </span>this is an array of raw property ports <span class="T178">(default is </span><span class="Code">1</span><span class="T178">). Normally only specified on a subdevice supporting multiple devices.</span></p><p class="IndentHang"><span class="T61">Master</span><span class="T191"> </span> <span class="T366">Boolean I</span>ndicat<span class="T366">ing</span> who generates addresses for raw accesses <span class="T365">(usually the device worker sets it </span><span class="Code">true</span><span class="T365">).</span></p><p class="P373_borderStart">The port is an array port if <span class="Code">count</span> is specified greater than 1 or if the <span class="Code">count</span> attribute value is an expression based on parameter values.</p><p class="Table_20_Caption_20__28_before_29__borderEnd"/><h4 class="Heading_20_4"><a id="a_5_5_7_2_DevSignal_XML_Elements_for_Device_Workers_and_Subdevice_Workers"><span class="heading_numbering">5.5.7.2</span></a>DevSignal XML <span class="T117">E</span>lements for <span class="T117">D</span>evice <span class="T117">W</span>orkers and <span class="T117">S</span>ubdevice <span class="T117">W</span>orkers</h4><p class="P80">This XML element represents a custom signal bundle that is connected between device workers and subdevices. It has <span class="T367">these</span> attributes:</p><p class="IndentHang"><span class="T61">Name</span><span class="T180">  </span>the name of the port (the default is <span class="Code">dev</span><span class="T367">)</span>.</p><p class="IndentHang"><span class="T61">Optional</span><span class="T180">  </span>whether this port must be connected or not.</p><p class="IndentHang"><span class="FirstEmphasis"><span class="T179">Count</span></span><span class="T180">  indicates</span> an array of similar ports with the same signals <span class="T367">(when &gt; 1)</span></p><p class="IndentHang"><span class="T61">Signals</span><span class="T180">  </span>indicates a file containing a top level <span class="Code">signals</span> element consisting of <span class="Code">signal</span> child elements. <span class="T367">The .xml suffix is not required in the attribute.</span></p><p class="P80">The file indicated by the <span class="Code">signals</span> attribute enumerates the signals in the bundle, <span class="T193">similar to the </span><span class="Code">signal</span><span class="T193"> elements in a device worker's OWD.</span></p><h4 class="P423"><a id="a_5_5_7_3_The_Supports_XML_Element_for_Subdevices_"><span class="heading_numbering">5.5.7.3</span></a>The Supports XML <span class="T117">E</span>lement for <span class="T194">S</span>ubdevices.</h4><p class="P81">Subdevices indicate which device workers they support by using <span class="Code">supports</span> XML elements. <span class="T370">T</span>o indicate how they are connected to a device worker they support, they specify <span class="Code">connect</span> child elements within the <span class="Code">supports</span> elements, e.g.:</p><p class="Code"> &lt;supports worker='lime_dac'&gt;<br/>  &lt;connect port=<span class="T370">'</span>rawprops<span class="T370">'</span> to=<span class="T370">'</span>r<span class="T370">aw</span>props<span class="T370">'</span> index='1'/&gt;<br/>  &lt;connect port=<span class="T370">'</span>dev<span class="T370">'</span> to='dev' index='1'/&gt;<br/> &lt;/supports&gt;<br/> &lt;supports worker='lime_adc'&gt;<br/>  &lt;connect port=<span class="T370">'</span>rawprops<span class="T370">'</span> to=<span class="T370">'</span>r<span class="T370">aw</span>props<span class="T370">'</span> index='0'/&gt;<br/>  &lt;connect port=<span class="T370">'</span>dev<span class="T370">'</span> to='dev' index='0'/&gt;<br/> &lt;/supports&gt;</p><p class="P82">The <span class="T196">attributes of</span> the <span class="Code">supports</span> element <span class="T196">are:</span></p><p class="IndentHang"><span class="T61">worker</span><span class="T180">  </span><span class="T371">the</span> name <span class="T371">of </span>the device worker it supports</p><p class="IndentHang"><span class="T61">index</span><span class="T180"> </span><span class="T61"> </span>identifies which device of that type <span class="T372">(on the platform or card) </span>is being supported <span class="T196">by the subdevice via this </span><span class="Code">supports</span><span class="T196"> element</span></p><p class="Body">The attributes of the connect child element of the supports element are:</p><p class="IndentHang"><span class="T61">port</span><span class="T180">  </span>the port on th<span class="T372">is</span> subdevice that should be connected</p><p class="IndentHang"><span class="T61">to</span><span class="T180">  </span>the port on the supported device worker that should be connected</p><p class="IndentHang"><span class="T61">index</span><span class="T180">  </span>index into the subdevice's port array (when its count attribute is &gt; 1).</p><p class="P83">It is possible that different instances of the same device on a platform or card are supported by entirely different subdevices <span class="T372">or by a single subdevice.</span></p><h3 class="P396"><a id="a_5_5_8_Associating_Device_Workers_and_Subdevice_Workers_with_Platforms_and_Cards_"><span class="heading_numbering">5.5.8</span></a><a id="__RefHeading___Toc4836_234407367"/>Associating Device Workers and Subdevice <span class="T194">W</span>orkers with Platform<span class="T194">s </span>and Cards.</h3><p class="P83">Both device workers and subdevice workers are enumerated in the XML description of a platform or card using the <span class="Code">device</span> child element and the <span class="Code">worker</span> attribute. This declares the existence of the device on the platform or card <span class="T193">as well as</span> the device worker that is used. <span class="T263">The order of these elements defines the ordinals of the devices when multiple instances of the same device are present.</span></p><p class="P83">The presence of subdevice workers in this declared list makes them available to support any devices that are used in a platform configuration or container. When a device is used (instantiated based on the platform configuration XML or the container XML), any subdevices that exist on the platform that support the device will <span class="T263">also </span>be <span class="T263">instanced and connected</span>.</p><h3 class="Heading_20_3"><a id="a_5_5_9_Summary_of_Worker_Types_for_Supporting_HDL_Devices"><span class="heading_numbering">5.5.9</span></a><a id="__RefHeading___Toc18287_4003722483"/>Summary of Worker Types for <span class="T354">Supporting HDL </span>Device<span class="T354">s</span></h3><p class="P141"><span class="FirstEmphasis">Device Workers</span> directly control and attach to physical devices, as device drivers, and generally implement the data sheet for the device, providing access and visibility to the device's native registers and capabilities.</p><p class="P141"><span class="FirstEmphasis">Subdevice Workers</span> enable multiple device workers to share some underlying hardware, like shared resets, shared SPI or I2C busses. <span class="T373">They also allow workers to stay portable when low level modules differ by platform or card.</span></p><p class="P141"><span class="FirstEmphasis">Proxy Workers</span> (for device workers) provide a higher level and more generic interface to make the device look more like others in its class, providing more user and software friendly access and visibility to the devices capabilities.</p><p class="P141"><span class="FirstEmphasis">Emulator workers</span> are used to test device workers by providing the mirror image of the device worker's external signals <span class="T373">s</span>o they can emulate the device in simulation.</p><p class="P141"></p><h2 class="Heading_20_2"><a id="a_5_6_Defining_Cards_Containing_Devices_that_Plug_into_Slots_of_Platforms"><span class="heading_numbering">5.6</span></a><a id="__RefHeading___Toc18289_4003722483"/>Defining Cards Containing Devices that Plug into Slots of Platforms</h2><p class="P239"><span class="T337">A card is specified in a card definition XML file initially created using the </span><span class="Code">ocpidev create card </span><span class="Code"><span class="T337">&lt;</span></span><span class="Code"><span class="T37">cardname</span></span><span class="Code"><span class="T337">&gt;</span></span> <span class="T337">command, which creates the file </span><span class="Code"><span class="T5">&lt;cardname&gt;</span></span><span class="Code">.xml</span><span class="T337"> file in the </span><span class="Code">hdl/cards/specs</span><span class="T337"> directory. This file has a top-level </span><span class="Code">card</span><span class="T337"> XML element with a required </span><span class="Code">type</span><span class="T337"> attribute, and contains </span><span class="Code">device</span><span class="T337"> elements.</span></p><p class="P240">The <span class="Code">type</span> attribute is the slot type and must match the name of a defined slot type.</p><p class="P241">The <span class="Code">device</span> elements <span class="T338">declare device instances on the card, and act the same as </span><span class="Code">device</span><span class="T338"> elements in platform XML files except for one thing. In both platform XML and card XML files the </span><span class="Code">signal</span><span class="T338"> child elements of </span><span class="Code">device</span><span class="T338"> elements indicate a mapping between device worker signals and platform or card-level signals. Whereas the signal mapping on platforms use the </span><span class="Code">platform</span><span class="T338"> attribute for the platform/card-level signal name, in card definition files, the </span><span class="Code"><span class="T339">card</span></span><span class="T338"> attribute is used. This makes it clear that in the case of cards, you are mapping a device worker's signal to a card signal.</span></p><p class="P242">Card signal names are derived from the slot type's signals. Thus each device instance is essentially wired to slot pins.</p><p class="P242">Here is example of a simple card definition file <span class="T340">with one device. It has one required parameter property setting (</span><span class="Code">use_ctl_clk</span><span class="T340">), one device signal that is not available on the card (</span><span class="Code">tx_clk</span><span class="T340">) and some other signals mapped to card signals that are derived from the slot type: </span></p><p class="P172"><span class="T85">&lt;card type='fmc_lpc'/&gt;<br/> </span><span class="T83">&lt;device worker='lime_</span><span class="T85">da</span><span class="T83">c'&gt;<br/>  &lt;property name='use_ctl_clk' value='</span><span class="T86">true</span><span class="T83">'/&gt;<br/></span><span class="T85">  &lt;Signal name="tx_clk"  </span><span class="T146">slot=</span><span class="T85">''/&gt;<br/>  &lt;Signal name='tx_clk_in' </span><span class="T146">slot=</span><span class="T85">'LA04_N'/&gt;<br/>  &lt;Signal name="tx_iq_sel" </span><span class="T146">slot=</span><span class="T85">'LA29_N'/&gt;<br/>  &lt;Signal name="txd(0)"  </span><span class="T146">slot=</span><span class="T85">'LA25_N'/&gt;<br/>  &lt;Signal name="txd(1)"  </span><span class="T146">slot=</span><span class="T85">'LA25_P'/&gt;<br/>  &lt;Signal name="txd(2)"  </span><span class="T146">slot=</span><span class="T85">'LA22_N'/&gt;<br/>  &lt;Signal name="txd(3)"  </span><span class="T146">slot=</span><span class="T85">'LA22_P'/&gt;<br/>  &lt;Signal name="txd(4)"  </span><span class="T146">slot=</span><span class="T85">'LA20_N'/&gt;<br/>  &lt;Signal name="txd(5)"  </span><span class="T146">slot=</span><span class="T85">'LA20_P'/&gt;<br/>  &lt;Signal name="txd(6)"  </span><span class="T146">slot=</span><span class="T85">'LA16_N'/&gt;<br/>  &lt;Signal name="txd(7)"  </span><span class="T146">slot=</span><span class="T85">'LA16_P'/&gt;<br/>  &lt;Signal name="txd(8)"  </span><span class="T146">slot=</span><span class="T85">'LA12_N'/&gt;<br/>  &lt;Signal name="txd(9)"  </span><span class="T146">slot=</span><span class="T85">'LA12_P'/&gt;<br/>  &lt;Signal name="txd(10)"  </span><span class="T146">slot=</span><span class="T85">'LA08_N'/&gt;<br/>  &lt;Signal name="txd(11)"  </span><span class="T146">slot=</span><span class="T85">'LA08_P'/&gt;<br/></span><span class="T83"> &lt;/device&gt;<br/></span><span class="T85">&lt;/card&gt;</span></p><h1 class="P433"><a id="a_6_Glossary"><span class="heading_numbering">6</span></a><a id="__RefHeading__1049_1060509377"/>Glossary</h1><p class="P364"><span class="T202">Application</span>  In this context of Component-Based Development (CBD), an application is a composition or assembly of components that as a whole perform some useful function. The term application can also be an adjective to distinguish functions or code from infrastructure to support the execution of component-based application. I.e. software/gateware is either application or infrastructure.</p><p class="P363"><span class="T202">Configuration Properties</span>  Named scalar values of a worker that may be read or written by control software. Their values indicate or control aspects of the workers operation. Reading and writing these property values may or may not have side effects on the operation of the worker. Configuration properties with side effects can be used for custom worker control. Each worker may have its own, possibly unique, set of configuration properties. They may include hardware resource such registers, memory, and state.</p><p class="P364"><span class="T202">Control Operations </span> A fixed set of control operations that every worker has. <span class="T198">The control aspect is a common control model that allows all workers to be managed without having to customize the management infrastructure software for each worker, while the aforementioned configuration properties are used to specialize components.</span></p><p class="P364"><span class="T202">Infrastructure</span>  Software/gateware is either application of or infrastructure.</p><p class="P364"><span class="T202">Worker</span>  <span class="T198">A concrete implementation (and possibly runtime instance) of a component, written according to an authoring model</span>.</p><p class="Body"><span class="T203">Authoring</span><span class="T205"> Model</span><span class="T374">  </span><span class="T199">A set of metadata and language rules and interfaces for writing a </span></p><p class="P251">[Incomplete]</p><p class="P376"><span class="footnodeNumber"><a class="Footnote_20_Symbol" id="ftn1" href="#body_ftn1">1</a></span>Software package repositories are sometimes captured locally when internet access is not always available. Somes standard software packages are individually captured/downloaded so they can be (re)installed offline.</p><p class="P377"><span class="footnodeNumber"><a class="Footnote_20_Symbol" id="ftn2" href="#body_ftn2">2</a></span>Similarly, prerequisite software is sometimes downloaded and stored locally/offline and the download step simply uses the locally available downloads.</p></body></html>
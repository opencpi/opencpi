<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN" "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><!--This file was converted to xhtml by LibreOffice - see http://cgit.freedesktop.org/libreoffice/core/tree/filter/source/xslt for the code.--><head profile="http://dublincore.org/documents/dcmi-terms/"><meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8"/><title xml:lang="en-US">OCPI_ODT</title><meta name="DCTERMS.title" content="OCPI_ODT" xml:lang="en-US"/><meta name="DCTERMS.language" content="en-US" scheme="DCTERMS.RFC4646"/><meta name="DCTERMS.source" content="http://xml.openoffice.org/odf2xhtml"/><meta name="DCTERMS.creator" content="James Kulp"/><meta name="DCTERMS.issued" content="2014-12-13T12:37:04.602691000" scheme="DCTERMS.W3CDTF"/><meta name="DCTERMS.contributor" content="James Kulp"/><meta name="DCTERMS.modified" content="2016-10-06T12:41:35.408817000" scheme="DCTERMS.W3CDTF"/><meta name="DCTERMS.provenance" content="" xml:lang="en-US"/><meta name="DCTERMS.subject" content="," xml:lang="en-US"/><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" hreflang="en"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" hreflang="en"/><link rel="schema.DCTYPE" href="http://purl.org/dc/dcmitype/" hreflang="en"/><link rel="schema.DCAM" href="http://purl.org/dc/dcam/" hreflang="en"/><style type="text/css">
	@page {  }
	table { border-collapse:collapse; border-spacing:0; empty-cells:show }
	td, th { vertical-align:top; font-size:12pt;}
	h1, h2, h3, h4, h5, h6 { clear:both }
	ol, ul { margin:0; padding:0;}
	li { list-style: none; margin:0; padding:0;}
	<!-- "li span.odfLiEnd" - IE 7 issue-->
	li span. { clear: both; line-height:0; width:0; height:0; margin:0; padding:0; }
	span.footnodeNumber { padding-right:1em; }
	span.annotation_style_by_filter { font-size:95%; font-family:Arial; background-color:#fff000;  margin:0; border:0; padding:0;  }
	* { margin:0;}
	.Body { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.Code { font-size:11pt; margin-bottom:0in; margin-top:0.0417in; text-align:left ! important; font-family:Courier New; writing-mode:lr-tb; margin-left:0.25in; margin-right:0in; text-indent:0in; font-weight:bold; }
	.Contents_20_1 { font-size:12pt; margin-bottom:0in; margin-top:0.0835in; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; font-weight:bold; }
	.Contents_20_2 { font-size:11pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; margin-left:0.1665in; margin-right:0in; text-indent:0in; font-weight:bold; }
	.Contents_20_3 { font-size:11pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; margin-left:0.3335in; margin-right:0in; text-indent:0in; }
	.Contents_20_4 { font-size:10pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; margin-left:0.5in; margin-right:0in; text-indent:0in; }
	.Contents_20_5 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; margin-left:0.6665in; margin-right:0in; text-indent:0in; }
	.Contents_20_6 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; margin-left:0.8335in; margin-right:0in; text-indent:0in; }
	.Contents_20_7 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; margin-left:1in; margin-right:0in; text-indent:0in; }
	.Contents_20_8 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; margin-left:1.1665in; margin-right:0in; text-indent:0in; }
	.Contents_20_9 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; margin-left:1.3335in; margin-right:0in; text-indent:0in; }
	.Contents_20_Heading { font-size:12pt; margin-bottom:0.0835in; margin-top:0.1665in; text-align:center ! important; font-family:Liberation Sans; writing-mode:lr-tb; font-weight:bold; }
	.Footer { font-size:12pt; margin-bottom:0in; margin-top:0.0555in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.Heading_20_1 { font-size:14pt; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; font-weight:bold; }
	.Heading_20_2 { font-size:12pt; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; font-style:italic; font-weight:bold; }
	.Heading_20_3 { font-size:12pt; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; font-style:italic; }
	.Heading_20_4 { font-size:12pt; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; font-style:italic; }
	.IndentHang { font-size:12pt; font-style:normal; margin-bottom:0.0598in; margin-left:0.6252in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.3752in; font-family:Arial; writing-mode:lr-tb; }
	.List_20_Bullet { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; margin-left:0.4in; margin-right:0in; text-indent:-0.2in; }
	.List_20_Number { font-size:12pt; margin-bottom:0.05in; margin-top:0.05in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; margin-left:0.4in; margin-right:0.4in; text-indent:-0.2in; }
	.Numbering_20_1 { font-size:12pt; line-height:120%; margin-bottom:0.0972in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P1 { font-size:14pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; }
	.P10 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P100 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P101 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P102 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P103 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P104 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P105 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P106 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P107 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P108 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P109 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P11 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P110 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P111 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P112 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P113 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P114 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P115 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P116 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P117 { font-size:7pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P118 { font-size:7pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P119 { font-size:7pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P12 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P120 { font-size:7pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P121 { font-size:7pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P122 { font-size:7pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P123 { font-size:7pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P124 { font-size:7pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P125 { font-size:12pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P126 { font-size:12pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P127 { font-size:12pt; margin-bottom:0in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P128 { font-size:12pt; margin-bottom:0in; margin-top:0in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; font-style:italic; }
	.P129 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; }
	.P13 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P130 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P131 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; }
	.P132 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; }
	.P133 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; }
	.P134 { font-size:12pt; margin-bottom:0.1665in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P135 { font-size:9pt; line-height:120%; margin-bottom:0.0972in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P136 { font-size:9pt; line-height:120%; margin-bottom:0.0972in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P137 { font-size:9pt; line-height:120%; margin-bottom:0.0972in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; font-weight:bold; }
	.P138 { font-size:12pt; line-height:120%; margin-bottom:0.0972in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P139 { font-size:12pt; line-height:120%; margin-bottom:0.0972in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P14 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P140 { font-size:12pt; line-height:120%; margin-bottom:0.0972in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P141 { font-size:12pt; line-height:120%; margin-bottom:0.0972in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P142 { font-size:12pt; margin-bottom:0.1665in; margin-top:0.0555in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P143 { font-size:12pt; margin-bottom:0.1665in; margin-top:0.0555in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; }
	.P144 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P145 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P146 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P147 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P148 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P149 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P15 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P150 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P151 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; color:#000000; }
	.P152 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P153 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P154 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P155 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P156 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P157 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P158 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P159 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P16 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P160 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P161 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P162 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P163 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P164 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P165 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P166 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P167 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P168 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P169 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P17 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P170 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P171 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P172 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P173 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P174 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P175 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P176 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P177 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P178 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P179 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P18 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P180 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P181 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P182 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P183 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P184 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P185 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P186 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P187 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P188 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P189 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P19 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P190 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P191 { font-size:12pt; font-weight:bold; margin-bottom:0in; margin-top:0.0835in; text-align:center ! important; font-family:Calibri; writing-mode:lr-tb; }
	.P192 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P193 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P194 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P195 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P196 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
	.P197 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
	.P198 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
	.P199 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
	.P2 { font-size:14pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P20 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P200 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
	.P201 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
	.P202 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; text-decoration:none ! important; }
	.P203 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
	.P204 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
	.P205 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.25in; margin-right:0in; margin-top:0.0417in; text-align:left ! important; text-indent:0in; font-family:Courier New; writing-mode:lr-tb; }
	.P206 { font-size:11pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P207 { font-size:11pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P208 { font-size:11pt; font-weight:bold; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P209 { font-size:11pt; font-weight:bold; margin-bottom:0.0598in; margin-top:0.0799in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; }
	.P21 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P210 { font-size:11pt; font-weight:bold; margin-bottom:0.0598in; margin-top:0.0799in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; }
	.P211 { font-size:11pt; margin-bottom:0in; margin-left:0.3335in; margin-right:0in; margin-top:0in; text-align:left ! important; text-indent:0in; font-family:Calibri; writing-mode:lr-tb; }
	.P212 { font-size:12pt; margin-bottom:0.05in; margin-top:0.05in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P213 { font-size:12pt; margin-bottom:0.05in; margin-top:0.05in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P214 { font-size:11pt; font-weight:bold; margin-bottom:0in; margin-left:0.1665in; margin-right:0in; margin-top:0in; text-align:left ! important; text-indent:0in; font-family:Calibri; writing-mode:lr-tb; }
	.P215 { font-size:12pt; font-weight:bold; margin-bottom:0in; margin-top:0.0835in; text-align:left ! important; font-family:Calibri; writing-mode:lr-tb; }
	.P216 { font-size:12pt; line-height:120%; margin-bottom:0.0972in; margin-top:0in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P217 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
	.P218 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
	.P219 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
	.P22 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P220 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
	.P221 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
	.P222 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
	.P223 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
	.P224 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
	.P225 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
	.P226 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
	.P227 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
	.P228 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
	.P229 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
	.P23 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P230 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
	.P231 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
	.P232 { font-size:12pt; margin-bottom:0.0598in; margin-left:0.4in; margin-right:0in; margin-top:0.0799in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; font-weight:normal; }
	.P233 { font-size:12pt; margin-bottom:0.05in; margin-left:0.4in; margin-right:0.4in; margin-top:0.05in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
	.P234 { font-size:12pt; margin-bottom:0.05in; margin-left:0.4in; margin-right:0.4in; margin-top:0.05in; text-align:left ! important; text-indent:-0.2in; font-family:Arial; writing-mode:lr-tb; }
	.P235 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P236 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P237 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P238 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P239 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P24 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P240 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P241 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P242 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P243 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P244 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P245 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P246 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P247 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P248 { font-size:12pt; font-style:italic; font-weight:bold; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P249 { font-size:12pt; font-style:italic; font-weight:bold; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P25 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P250 { font-size:12pt; font-style:italic; font-weight:bold; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P251 { font-size:12pt; font-style:italic; font-weight:bold; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P252 { font-size:12pt; font-style:italic; font-weight:bold; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P253 { font-size:12pt; font-style:italic; font-weight:bold; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P254 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P255 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P256 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P257 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P258 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P259 { font-size:12pt; font-style:italic; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P26 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P260 { font-size:14pt; font-weight:bold; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P261 { font-size:14pt; font-weight:bold; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P262 { font-size:14pt; font-weight:bold; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P263 { font-size:14pt; font-weight:bold; margin-bottom:0.0417in; margin-top:0.1665in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P264 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; }
	.P27 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P28 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P29 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; font-weight:normal; }
	.P3 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; color:#ff0000; font-weight:bold; }
	.P30 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P31 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P32 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P33 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P34 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P35 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P36 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P37 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P38 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P39 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P4 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; color:#ff0000; font-weight:bold; }
	.P40 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P41 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P42 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P43 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P44 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P45 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P46 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P47 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P48 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P49 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P5 { font-size:22pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; color:#ff0000; font-style:italic; font-weight:bold; }
	.P50 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P51 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P52 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P53 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P54 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P55 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P56 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P57 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P58 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P59 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P6 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P60 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P61 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P62 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P63 { font-size:11pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; font-weight:bold; }
	.P64 { font-size:11pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P65 { font-size:11pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P66 { font-size:11pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P67 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P68 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P69 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P7 { font-size:8pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; font-weight:bold; }
	.P70 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P71 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P72 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P73 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P74 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P75 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P76 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P77 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P78 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P79 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P8 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P80 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P81 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P82 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P83 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P84 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P85 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P86 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P87 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P88 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P89 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P9 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P90 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P91 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P92 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P93 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P94 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P95 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P96 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P97 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P98 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.P99 { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; }
	.Standard { font-size:12pt; font-family:Arial; writing-mode:lr-tb; margin-top:0.0799in; margin-bottom:0.0598in; text-align:left ! important; }
	.Table_20_Caption_20__28_before_29__borderStart { border-style:none; font-size:12pt; font-style:italic; margin-top:0.1in; padding:0in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; padding-bottom:0.15in;  border-bottom-style:none; }
	.Table_20_Caption_20__28_before_29_ { border-style:none; font-size:12pt; font-style:italic; padding:0in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; padding-bottom:0.15in; padding-top:0.1in;  border-top-style:none; border-bottom-style:none; }
	.Table_20_Caption_20__28_before_29__borderEnd { border-style:none; font-size:12pt; font-style:italic; margin-bottom:0.15in; padding:0in; text-align:center ! important; font-family:Arial; writing-mode:lr-tb; padding-top:0.1in;  border-top-style:none;}
	.Table_20_Heading { font-size:12pt; margin-bottom:0.0598in; margin-top:0.0799in; text-align:left ! important; font-family:Arial; writing-mode:lr-tb; font-weight:bold; }
	.Table1 { width:6.5in; margin-left:0in; margin-top:0in; margin-bottom:0in; margin-right:auto;writing-mode:lr-tb; }
	.Table2 { width:6.5in; margin-left:0in; margin-top:0in; margin-bottom:0in; margin-right:auto;writing-mode:lr-tb; }
	.Table3 { width:6.4597in; margin-left:0px; margin-right:auto;writing-mode:lr-tb; }
	.Table4 { width:6.5in; float:none; writing-mode:lr-tb; }
	.Table5 { width:6.5in; float:none; writing-mode:lr-tb; }
	.Table6 { width:6.5in; float:none; writing-mode:lr-tb; }
	.Table1_A1 { padding-left:0.0833in; padding-right:0.0799in; padding-top:0in; padding-bottom:0in; border-width:0.0176cm; border-style:solid; border-color:#00000a; }
	.Table1_A4 { padding-left:0.0833in; padding-right:0.0799in; padding-top:0in; padding-bottom:0in; border-left-width:0.0176cm; border-left-style:solid; border-left-color:#00000a; border-right-width:0.0176cm; border-right-style:solid; border-right-color:#00000a; border-top-style:none; border-bottom-width:0.0176cm; border-bottom-style:solid; border-bottom-color:#00000a; }
	.Table2_A1 { vertical-align:middle; padding-left:0.0833in; padding-right:0.0799in; padding-top:0in; padding-bottom:0in; border-width:0.0176cm; border-style:solid; border-color:#00000a; }
	.Table2_A3 { vertical-align:middle; padding-left:0.0833in; padding-right:0.0799in; padding-top:0in; padding-bottom:0in; border-left-width:0.0176cm; border-left-style:solid; border-left-color:#00000a; border-right-width:0.0176cm; border-right-style:solid; border-right-color:#00000a; border-top-style:none; border-bottom-width:0.0176cm; border-bottom-style:solid; border-bottom-color:#00000a; }
	.Table3_A1 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-width:thin; border-top-style:solid; border-top-color:#000000; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table3_A2 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-style:none; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table3_E1 { padding:0.0382in; border-width:thin; border-style:solid; border-color:#000000; }
	.Table3_E2 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-width:thin; border-right-style:solid; border-right-color:#000000; border-top-style:none; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table4_A1 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-width:thin; border-top-style:solid; border-top-color:#000000; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table4_A2 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-style:none; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table4_C1 { padding:0.0382in; border-width:thin; border-style:solid; border-color:#000000; }
	.Table4_C2 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-width:thin; border-right-style:solid; border-right-color:#000000; border-top-style:none; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table5_A1 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-width:thin; border-top-style:solid; border-top-color:#000000; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table5_A2 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-style:none; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table5_C1 { padding:0.0382in; border-width:thin; border-style:solid; border-color:#000000; }
	.Table5_C2 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-width:thin; border-right-style:solid; border-right-color:#000000; border-top-style:none; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table6_A1 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-width:thin; border-top-style:solid; border-top-color:#000000; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table6_A2 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-style:none; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table6_E1 { padding:0.0382in; border-width:thin; border-style:solid; border-color:#000000; }
	.Table6_E2 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-width:thin; border-right-style:solid; border-right-color:#000000; border-top-style:none; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table1_A { width:0.7326in; }
	.Table1_B { width:4.9583in; }
	.Table1_C { width:0.809in; }
	.Table2_A { width:2.5049in; }
	.Table2_B { width:1.2438in; }
	.Table2_C { width:2.7514in; }
	.Table3_A { width:0.8083in; }
	.Table3_B { width:1.1264in; }
	.Table3_C { width:1.1271in; }
	.Table3_D { width:1.4076in; }
	.Table3_E { width:1.9903in; }
	.Table4_A { width:0.9361in; }
	.Table4_B { width:1.3188in; }
	.Table4_C { width:4.2451in; }
	.Table5_A { width:0.9361in; }
	.Table5_B { width:1.3188in; }
	.Table5_C { width:4.2451in; }
	.Table6_A { width:1.191in; }
	.Table6_B { width:0.8729in; }
	.Table6_C { width:0.7451in; }
	.Table6_D { width:0.5639in; }
	.Table6_E { width:3.1271in; }
	.Code { font-family:Courier New; font-size:12pt; font-weight:bold; background-color:transparent; }
	.FirstEmphasis { font-family:Arial; font-size:12pt; font-style:italic; font-weight:bold; }
	.T10 { font-style:italic; }
	.T11 { font-style:italic; }
	.T12 { font-style:italic; }
	.T13 { font-style:italic; }
	.T14 { font-style:italic; }
	.T141 { text-decoration:underline; }
	.T142 { text-decoration:none ! important; }
	.T143 { text-decoration:none ! important; }
	.T144 { text-decoration:none ! important; }
	.T145 { text-decoration:none ! important; }
	.T146 { text-decoration:none ! important; }
	.T15 { font-style:italic; }
	.T16 { font-style:italic; }
	.T17 { font-style:italic; }
	.T18 { font-style:italic; }
	.T19 { font-style:italic; }
	.T20 { font-style:italic; }
	.T21 { font-style:italic; font-weight:bold; }
	.T22 { font-style:italic; font-weight:bold; }
	.T224 { font-size:11pt; }
	.T225 { font-size:11pt; }
	.T23 { font-style:italic; font-weight:bold; }
	.T24 { font-style:italic; font-weight:bold; }
	.T25 { font-style:italic; font-weight:bold; }
	.T26 { font-style:italic; font-weight:bold; }
	.T27 { font-style:italic; font-weight:bold; }
	.T28 { font-style:italic; text-decoration:none ! important; }
	.T29 { font-style:italic; text-decoration:none ! important; }
	.T3 { font-weight:bold; }
	.T30 { font-style:italic; font-weight:normal; }
	.T31 { font-size:7pt; }
	.T32 { font-size:7pt; }
	.T33 { font-size:7pt; }
	.T4 { font-weight:bold; }
	.T5 { font-weight:bold; }
	.T55 { font-style:normal; }
	.T6 { color:#000000; }
	.T7 { font-size:28pt; font-weight:bold; }
	.T8 { font-size:28pt; font-weight:bold; }
	.T9 { font-style:italic; }
	<!-- ODF styles with no properties representable as CSS -->
	.Sect1 .Table1.1 .Table1.2 .Table2.1 .Index_20_Link .ListLabel_20_1 .Numbering_20_Symbols .T1 .T100 .T101 .T102 .T103 .T104 .T105 .T106 .T107 .T108 .T109 .T110 .T111 .T112 .T113 .T114 .T115 .T116 .T117 .T118 .T119 .T120 .T121 .T122 .T123 .T124 .T125 .T126 .T127 .T128 .T129 .T130 .T131 .T132 .T133 .T134 .T135 .T136 .T137 .T138 .T139 .T140 .T147 .T148 .T149 .T150 .T151 .T152 .T153 .T154 .T155 .T156 .T157 .T158 .T159 .T160 .T161 .T162 .T163 .T164 .T165 .T166 .T167 .T168 .T169 .T170 .T171 .T172 .T173 .T174 .T175 .T176 .T177 .T178 .T179 .T180 .T181 .T182 .T183 .T184 .T185 .T186 .T187 .T188 .T189 .T190 .T191 .T192 .T193 .T194 .T195 .T196 .T197 .T198 .T199 .T200 .T201 .T202 .T203 .T204 .T205 .T206 .T207 .T208 .T209 .T210 .T211 .T212 .T213 .T214 .T215 .T216 .T217 .T218 .T219 .T220 .T221 .T222 .T223 .T34 .T35 .T36 .T37 .T38 .T39 .T40 .T41 .T42 .T43 .T44 .T45 .T46 .T47 .T48 .T49 .T50 .T51 .T52 .T53 .T54 .T56 .T57 .T58 .T59 .T60 .T61 .T62 .T63 .T64 .T65 .T66 .T67 .T68 .T69 .T70 .T71 .T72 .T73 .T74 .T75 .T76 .T77 .T78 .T79 .T80 .T81 .T82 .T83 .T84 .T85 .T86 .T87 .T88 .T89 .T90 .T91 .T92 .T93 .T94 .T95 .T96 .T97 .T98 .T99  { }
	</style></head><body dir="ltr" style="max-width:8.5in;margin-top:1in; margin-bottom:0.5in; margin-left:1in; margin-right:1in; "><p class="P264"><span class="T7">OpenCPI<br/></span><span class="T8">Platform Development<br/>Guide</span></p><p class="P1"></p><p class="P2"></p><p class="P6"></p><p class="P6"></p><p class="P6"></p><p class="P6"></p><p class="P5">Preliminary</p><p class="P4"></p><p class="P4"></p><p class="P3"></p><p class="P3"></p><p class="P6"></p><p class="P6"></p><p class="P6"></p><p class="P6"></p><p class="P6"></p><p class="P6"></p><p class="P128">Revision History</p><table border="0" cellspacing="0" cellpadding="0" class="Table1"><colgroup><col width="81"/><col width="550"/><col width="90"/></colgroup><tr class="Table11"><td style="text-align:left;width:0.7326in; " class="Table1_A1"><p class="P7">Revision</p></td><td style="text-align:left;width:4.9583in; " class="Table1_A1"><p class="P7">Description of Change</p></td><td style="text-align:left;width:0.809in; " class="Table1_A1"><p class="P7">Date</p></td></tr><tr class="Table12"><td style="text-align:left;width:0.7326in; " class="Table1_A1"><p class="P117">0.01</p></td><td style="text-align:left;width:4.9583in; " class="Table1_A1"><p class="P127"><span class="T32">I</span><span class="T31">nitial</span></p></td><td style="text-align:left;width:0.809in; " class="Table1_A1"><p class="P126"><span class="T31">201</span><span class="T32">4</span><span class="T31">-</span><span class="T32">12</span><span class="T31">-</span><span class="T32">1</span><span class="T33">5</span></p></td></tr><tr class="Table12"><td style="text-align:left;width:0.7326in; " class="Table1_A1"><p class="P118">0.5</p></td><td style="text-align:left;width:4.9583in; " class="Table1_A1"><p class="P118">Release partial draft</p></td><td style="text-align:left;width:0.809in; " class="Table1_A1"><p class="P118">2015-02-27</p></td></tr><tr class="Table12"><td style="text-align:left;width:0.7326in; " class="Table1_A4"><p class="P119">0.6</p></td><td style="text-align:left;width:4.9583in; " class="Table1_A4"><p class="P119">Add more general introduction to enabling systems for OpenCPI</p></td><td style="text-align:left;width:0.809in; " class="Table1_A4"><p class="P119">2015-04-23</p></td></tr><tr class="Table12"><td style="text-align:left;width:0.7326in; " class="Table1_A4"><p class="P120">0.7</p></td><td style="text-align:left;width:4.9583in; " class="Table1_A4"><p class="P120">Add content about device workers/subdevices/device proxies and endpoint proxies.</p></td><td style="text-align:left;width:0.809in; " class="Table1_A4"><p class="P120">2015-05-06</p></td></tr><tr class="Table12"><td style="text-align:left;width:0.7326in; " class="Table1_A4"><p class="P121">0.8</p></td><td style="text-align:left;width:4.9583in; " class="Table1_A4"><p class="P121">Add content about platforms and platform workers, apply review <span class="T181">comments for HDL devices</span></p></td><td style="text-align:left;width:0.809in; " class="Table1_A4"><p class="P122">2015-06-22</p></td></tr><tr class="Table12"><td style="text-align:left;width:0.7326in; " class="Table1_A4"><p class="P123">0.9</p></td><td style="text-align:left;width:4.9583in; " class="Table1_A4"><p class="P123">Add content about develop<span class="T185">ing HDL </span>platform support outside the core <span class="T185">directory </span>tree</p></td><td style="text-align:left;width:0.809in; " class="Table1_A4"><p class="P123">2015-08-28</p></td></tr><tr class="Table12"><td style="text-align:left;width:0.7326in; " class="Table1_A4"><p class="P124">1.0</p></td><td style="text-align:left;width:4.9583in; " class="Table1_A4"><p class="P124">Update for 2016Q2 release</p></td><td style="text-align:left;width:0.809in; " class="Table1_A4"><p class="P124">2016-05-23</p></td></tr></table><p class="P125"></p><p class="P191">Table of Contents</p><table border="0" cellspacing="0" cellpadding="0" class="Sect1"><colgroup/><tr><td><p class="P215"><a href="#__RefHeading__1015_1060509377">1 Introduction</a></p></td></tr><tr><td><p class="P214"><a href="#__RefHeading__1017_1060509377">1.1 References</a></p></td></tr><tr><td><p class="P215"><a href="#__RefHeading__1019_1060509377">2 OpenCPI Systems and Platforms</a></p></td></tr><tr><td><p class="P214"><a href="#__RefHeading___Toc4319_234407367">2.1 Inside an OpenCPI Platform</a></p></td></tr><tr><td><p class="P214"><a href="#__RefHeading__1021_1060509377">2.2 Development and Execution</a></p></td></tr><tr><td><p class="P214"><a href="#__RefHeading___Toc4321_234407367">2.3 Enabling New Systems for OpenCPI</a></p></td></tr><tr><td><p class="P214"><a href="#__RefHeading___Toc4323_234407367">2.4 A Process Template for Enabling OpenCPI on a New System.</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading___Toc4325_234407367">2.4.1 System inventory</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading___Toc4327_234407367">2.4.2 Processor, interconnect and device assessment</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading___Toc4329_234407367">2.4.3 Assemble Technical Data Package</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading___Toc4331_234407367">2.4.4 Experiments to Establish Feasibility and Missing Information</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading___Toc4333_234407367">2.4.5 Planning and Specification</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading___Toc4335_234407367">2.4.6 Technical Development</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading___Toc4337_234407367">2.4.7 Verification</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading___Toc4339_234407367">2.4.8 Contribution</a></p></td></tr><tr><td><p class="P215"><a href="#__RefHeading__1023_1060509377">3 Enabling the Development Host</a></p></td></tr><tr><td><p class="P214"><a href="#__RefHeading__17646_2116501284">3.1 Operating System Installation</a></p></td></tr><tr><td><p class="P214"><a href="#__RefHeading__17648_2116501284">3.2 Development Tools Installation for the Development Host.</a></p></td></tr><tr><td><p class="P215"><a href="#__RefHeading__1025_1060509377">4 Enabling GPP Platforms</a></p></td></tr><tr><td><p class="P214"><a href="#__RefHeading__1027_1060509377">4.1 Enabling Development for New GPP Platforms</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading__17650_2116501284">4.1.1 Developing a Tool-chain Installation Script</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading___Toc78367_1944612760">4.1.2 The File to Define the Full Target Specification for the Platform.</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading___Toc78369_1944612760">4.1.3 Developing the Environment Setup Script</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading___Toc78371_1944612760">4.1.4 Files to Provide Settings for Environment Variables for Framework Development</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading___Toc78373_1944612760">4.1.5 The Script to Recognize the Currently Running Platform</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading__17654_2116501284">4.1.6 Developing a Cross-development Component Build Script</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading__17656_2116501284">4.1.7 Summary for Enabling Development for a New GPP Platform</a></p></td></tr><tr><td><p class="P214"><a href="#__RefHeading__1029_1060509377">4.2 Enabling Execution for GPP Platforms</a></p></td></tr><tr><td><p class="P215"><a href="#__RefHeading__1033_1060509377">5 Enabling FPGA Platforms</a></p></td></tr><tr><td><p class="P214"><a href="#__RefHeading___Toc17468_1235158909">5.1 Physical FPGA Platforms</a></p></td></tr><tr><td><p class="P214"><a href="#__RefHeading___Toc17470_1235158909">5.2 Simulator FPGA Platforms</a></p></td></tr><tr><td><p class="P214"><a href="#__RefHeading__1035_1060509377">5.3 Enabling Development for FPGA Platforms</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading__17658_2116501284">5.3.1 Installing the Tool Chain</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading__17660_2116501284">5.3.2 Integrating the Tool Chain into the OpenCPI HDL Build Process.</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading__17662_2116501284">5.3.3 Building All the Existing Portable HDL Code</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading___Toc22146_1235158909">5.3.4 Scripts for HDL Platforms</a></p></td></tr><tr><td><p class="P214"><a href="#__RefHeading__1037_1060509377">5.4 Enabling Execution for FPGA platforms</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading__17664_2116501284">5.4.1 Creating the XML Metadata Definition of the Platform</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading__17666_2116501284">5.4.2 Creating the Platform Worker</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading___Toc22148_1235158909">5.4.3 Specifying Platform Configurations in XML Files.</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading__17668_2116501284">5.4.4 Testing the Basic Platform without Devices</a></p></td></tr><tr><td><p class="P214"><a href="#__RefHeading__1039_1060509377">5.5 Device Support for FPGA Platforms</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading___Toc4826_234407367">5.5.1 Device Component Specs and Device Worker Modularity</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading___Toc4828_234407367">5.5.2 Device Proxies  Software Workers that Control HDL Device Workers</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading___Toc4830_234407367">5.5.3 A Device Worker Implements the Data Sheet</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading___Toc4832_234407367">5.5.4 Subdevice Workers</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading___Toc4834_234407367">5.5.5 Higher-level Endpoint Proxies Suitable for Applications</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading__17670_2116501284">5.5.6 XML Metadata for Device Workers/Subdevices/DeviceProxies/EndpointProxies</a></p></td></tr><tr><td><p class="P211"><a href="#__RefHeading___Toc4836_234407367">5.5.7 Associating Device Workers and Subdevice Workers with Platforms and Cards.</a></p></td></tr><tr><td><p class="P215"><a href="#__RefHeading__1041_1060509377">6 Enabling GPU Platforms</a></p></td></tr><tr><td><p class="P214"><a href="#__RefHeading__1043_1060509377">6.1 Enabling Development for GPU Platforms</a></p></td></tr><tr><td><p class="P214"><a href="#__RefHeading__1045_1060509377">6.2 Enabling Execution for GPU Platforms</a></p></td></tr><tr><td><p class="P214"><a href="#__RefHeading__1047_1060509377">6.3 I/O Device Support for GPU Platforms</a></p></td></tr><tr><td><p class="P215"><a href="#__RefHeading__1049_1060509377">7 Glossary</a></p></td></tr><tr><td><p class="P215"><a href="#__RefHeading__17676_2116501284">8 From PPT:</a></p></td></tr></table><h1 class="Heading_20_1"><a id="a_1_Introduction"><span>1</span></a><a id="_Toc57540730"/><a id="__RefHeading__1015_1060509377"/><a id="_Toc57540727"/><a id="_Toc144999751"/>Introduction</h1><p class="P144"><a id="_GoBack"/>This document describes how to enable OpenCPI components and applications to run on new platforms. <span class="T202">It assumes a basic knowledge of OpenCPI as described in the </span><span class="FirstEmphasis">OpenCPI Overview</span><span class="T202"> and </span><span class="FirstEmphasis">OpenCPI Component Development Guide</span><span class="T202">. </span>Platform development is the third class of OpenCPI development, beyond component development and application development. It involves configuring, adapting and wrapping various aspects of hardware platforms, operating system<span class="T37">s</span>, system libraries, and development tools. It applies to general purpose computing platforms, FPGA platforms and GPU platforms. It applies to self-hosted development as well as cross development.</p><p class="P144">The questions this document tries to answer are:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>What are suitable platforms?<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>What is involved in making a platform ready?<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>What are the actual steps and processes for making a platform ready?<span class="odfLiEnd"/></p></li></ul><p class="P144">These questions are answered separately for execution <span class="T62">vs.</span> development.</p><p class="P144">These questions are answered separately for GPP, FPGA, and GPU platforms.</p><p class="P145">After introducing all these topics, this document has <span class="T35">sections for each aspect in the following table</span>, </p><p class="Table_20_Caption_20__28_before_29_"><span class="T36">Table </span><span class="T36"><a id="refTable0"/>1</span><span class="T36">: </span>Categories of Platform Development</p><table border="0" cellspacing="0" cellpadding="0" class="Table3"><colgroup><col width="90"/><col width="125"/><col width="125"/><col width="156"/><col width="221"/></colgroup><tr><td style="text-align:left;width:0.8083in; " class="Table3_A1"><p class="P210"></p></td><td style="text-align:left;width:1.1264in; " class="Table3_A1"><p class="P209"></p><p class="P209">Examples</p></td><td style="text-align:left;width:1.1271in; " class="Table3_A1"><p class="P209">Development<br/><span class="T34">Tools</span></p></td><td style="text-align:left;width:1.4076in; " class="Table3_A1"><p class="P209">Execution<br/><span class="T34">Environment</span></p></td><td style="text-align:left;width:1.9903in; " class="Table3_E1"><p class="P209">I/O and Interconnect<br/>Device Support</p></td></tr><tr><td style="text-align:left;width:0.8083in; " class="Table3_A2"><p class="P137">General-Purpose Processors<br/>(GPPs)</p></td><td style="text-align:left;width:1.1264in; " class="Table3_A2"><p class="P135">X86<br/>(Intel/AMD),</p><p class="P135">ARM<br/>(Xilinx/Altera/TI)</p></td><td style="text-align:left;width:1.1271in; " class="Table3_A2"><p class="P135">Compiler<br/>tool-chains</p></td><td style="text-align:left;width:1.4076in; " class="Table3_A2"><p class="P135">Operating System,</p><p class="P135">Libraries,</p><p class="P135">Drivers</p></td><td style="text-align:left;width:1.9903in; " class="Table3_E2"><p class="P135"></p></td></tr><tr><td style="text-align:left;width:0.8083in; " class="Table3_A2"><p class="P137">FPGAs</p></td><td style="text-align:left;width:1.1264in; " class="Table3_A2"><p class="P135">Xilinx<br/>(virtex, zynq)</p><p class="P135">Altera<br/>(stratix, cyclone)</p><p class="P135">Mentor/Modelsim</p></td><td style="text-align:left;width:1.1271in; " class="Table3_A2"><p class="P135">Synthesis</p><p class="P135">Place&amp;route</p><p class="P135">Simulation</p></td><td style="text-align:left;width:1.4076in; " class="Table3_A2"><p class="P135">Bitstream loading</p><p class="P135">Control Plane Drivers</p><p class="P135">Data Plane Drivers</p></td><td style="text-align:left;width:1.9903in; " class="Table3_E2"><p class="P136">Directly attached I/O devices</p></td></tr><tr><td style="text-align:left;width:0.8083in; " class="Table3_A2"><p class="P137">Graphics Processors</p></td><td style="text-align:left;width:1.1264in; " class="Table3_A2"><p class="P135">Nvidia Tesla</p><p class="P135">AMD FirePro</p></td><td style="text-align:left;width:1.1271in; " class="Table3_A2"><p class="P135">Compilers,<br/>Profilers</p></td><td style="text-align:left;width:1.4076in; " class="Table3_A2"><p class="P135">Execution Management</p><p class="P135">Drivers</p><p class="P135">Data Plane Drivers</p></td><td style="text-align:left;width:1.9903in; " class="Table3_E2"><p class="P135"></p></td></tr></table><h2 class="Heading_20_2"><a id="a_1_1_References"><span>1.1</span></a><a id="__RefHeading__1017_1060509377"/><a id="_Toc144999752"/>References</h2><p class="P8">This document <span class="T36">requires information from several others. To actually perform platform development it is generally useful to understand OpenCPI component and application development, as well as the installation process for previously enabled platforms. To simply get a flavor for what is involved in platform development, only the OpenCPI Introduction is required.</span></p><p class="Table_20_Caption_20__28_before_29_">Table <a id="refTable1"/>1 - Table of Reference Documents</p><table border="0" cellspacing="0" cellpadding="0" class="Table2"><colgroup><col width="278"/><col width="138"/><col width="305"/></colgroup><tr class="Table21"><td style="text-align:left;width:2.5049in; " class="Table2_A1"><p class="Table_20_Heading">Title</p></td><td style="text-align:left;width:1.2438in; " class="Table2_A1"><p class="Table_20_Heading">Published By</p></td><td style="text-align:left;width:2.7514in; " class="Table2_A1"><p class="Table_20_Heading">Link</p></td></tr><tr class="Table21"><td style="text-align:left;width:2.5049in; " class="Table2_A1"><p class="P130"><span class="T187">OpenCPI </span>Introduction</p></td><td style="text-align:left;width:1.2438in; " class="Table2_A1"><p class="P132">OpenCPI</p></td><td style="text-align:left;width:2.7514in; " class="Table2_A1"><p class="P133"></p></td></tr><tr class="Table21"><td style="text-align:left;width:2.5049in; " class="Table2_A3"><p class="P130"><span class="T186">OpenCPI </span>Installation <span class="T186">Guide</span></p></td><td style="text-align:left;width:1.2438in; " class="Table2_A3"><p class="P131">OpenCPI</p></td><td style="text-align:left;width:2.7514in; " class="Table2_A3"><p class="P129"></p></td></tr><tr class="Table21"><td style="text-align:left;width:2.5049in; " class="Table2_A3"><p class="P130"><span class="T186">OpenCPI </span>Component Development <span class="T186">Guide</span></p></td><td style="text-align:left;width:1.2438in; " class="Table2_A3"><p class="P131">OpenCPI</p></td><td style="text-align:left;width:2.7514in; " class="Table2_A3"><p class="P129"></p></td></tr><tr class="Table21"><td style="text-align:left;width:2.5049in; " class="Table2_A3"><p class="P130"><span class="T186">OpenCPI </span>Application Development <span class="T186">Guide</span></p></td><td style="text-align:left;width:1.2438in; " class="Table2_A3"><p class="P131">OpenCPI</p></td><td style="text-align:left;width:2.7514in; " class="Table2_A3"><p class="P129"></p></td></tr></table><h1 class="P260"><a id="a_2_OpenCPI_Systems_and_Platforms"><span>2</span></a><a id="__RefHeading__1019_1060509377"/><a id="_Toc144999753"/>OpenCPI <span class="T83">Systems and </span>Platforms</h1><p class="P9">OpenCPI provides a consistent model and framework for component-based application development and execution on various <span class="T79">combinations of </span>(heterogeneous) processing technologies, focusing mostly on embedded systems.</p><p class="P9">An <span class="T21">OpenCPI system</span> is a collection of processing elements that can be used together as resources for running component-based applications. While, at a high level, the system has processors of various types that are places for components to run, each processor is itself part of a hardware subsystem. <span class="T200">T</span>hese subsystems are wired together using some interconnect technologies (<span class="T120">e.g. </span>networks, buses, fabrics, cables).</p><p class="P9">We call each available processor and its surrounding directly-connected hardware a <span class="FirstEmphasis"><span class="T201">platform</span></span>. Most commonly, a platform is a card or motherboard housing <span class="T78">a</span> processor and associated memory and I/O devices. We call the data paths that allow platforms to communicate with each other <span class="FirstEmphasis"><span class="T201">interconnects</span></span>. <span class="T38">The most common interconnects for OpenCPI systems are PCI Express or Ethernet, although others are also supported and used for some platforms (e.g. the AXI system interconnects on Xilinx Zynq-based systems).</span></p><p class="P10">The scope of a system can be a small embedded system that fits in <span class="T200">a</span> <span class="T39">pocket</span>, or racks full of network-connected hardware that act as a system of systems. Since this system definition is somewhat broad, we target <span class="T62">the </span>efforts to enable run<span class="T62">ning</span> OpenCPI at each <span class="FirstEmphasis">platform</span> and <span class="FirstEmphasis">interconnect</span> within a system. Hence <span class="T21">platform development</span> <span class="T62">i</span>s enabling a platform, and <span class="T55">enabling a system is</span><span class="T9"> enabling whatever platforms </span><span class="T12">and interconnects </span><span class="T9">are in the system</span>.</p><p class="P10">Our most common and simple example system is the ZedBoard from Digilent <span class="T40">(zedboard.org)</span>, which is based on <span class="T80">the </span>Xilinx Zynq chip. This chip is called a system on chip or S<span class="T121">o</span>C, and indeed has two processing elements connected with an interconnect, all on one chip: 1) a dual-core ARM general-purpose processor, and 2) an FPGA. They are connected via an on-chip fabric based on the AXI standard, and each is connected to some I/O devices. <span class="T39">Thus the ZedBoard </span><span class="T22">system</span><span class="T39"> consists of two </span><span class="T22">platforms</span><span class="T39"> that happen to reside in the same chip, with an AXI </span><span class="T22">interconnect</span><span class="T39"> between them.</span></p><p class="P10">Another common example system is a typical PC, which has a multicore (1-12) Intel or AMD x86 processor on a motherboard. <span class="T39">If cards are plugged into slots on the PC's motherboard, and those cards have processors (e.g. GPP, FPGA, GPU) on them, then those cards can act as additional platforms in that system.</span></p><p class="P10">We consider multi-core GPPs as single processors since they generally run a single operating system and act as a single resource that can run multiple threads concurrent<span class="T42">l</span>y.</p><p class="P27">The final defined element of an OpenCPI system is <span class="T21">devices</span>, which are locally attached to some platform to allow the source or sink of data flowing between component to enter or exit the system. <span class="T200">Thus devices are distinct from interconnects.</span></p><p class="P27"><span class="T200">A</span> <span class="FirstEmphasis">system</span> consists of <span class="FirstEmphasis">platforms</span> connected by <span class="FirstEmphasis">interconnects</span>, and platforms can have locally attached <span class="FirstEmphasis">devices</span>.</p><h2 class="P248"><a id="a_2_1_Inside_an_OpenCPI_Platform"><span>2.1</span></a><a id="__RefHeading___Toc4319_234407367"/>Inside an OpenCPI Platform</h2><p class="P155">As mentioned above, a <span class="T21">platform</span> consists of a processor (GPP, FPGA, GPU, etc.) <span class="T84">attached to</span> <span class="T21">interconnects</span> allowing it to communicate with other platforms. The processor may have multiple cores, and may even consist of multiple processor chips (such as a dual-socket motherboard where two Intel X86 processors act together). There are two other elements that make up a platform: <span class="T21">devices</span> and <span class="T21">slots</span>. </p><p class="P155"><span class="T21">Devices</span> are hardware elements that are locally attached to the processor of the platform. They are controlled by special workers called <span class="FirstEmphasis">device workers</span> (analogous to device drivers), and usually act as source<span class="T84">s</span> or sinks for data into or out of <span class="T82">the system, and thus can be used for inputs and outputs for </span>a component-based application <span class="T82">running on that system.</span></p><p class="P156">When a device is hard-wired to the platform, it is defined as part of the platform. It is also common for platforms to be optionally configured <span class="T202">with</span> add-on <span class="T21">cards</span> that provide additional devices for the platform. To allow for this, platforms can have <span class="T21">slots</span>, which are an intrinsic part of the platform, and enable cards to be plugged in that add devices to the platform. <span class="T83">Such cards may be plugged in to any platforms that have compatible slots.</span></p><p class="P156">Thus the devices available on a platform are either a permanent part of the platform, or are optionally configured as being available on defined cards <span class="T202">when they</span> are plugged into one of the platform's slots.</p><p class="P157">Platforms can have any number of devices, and may have multiple devices of the same type. When cards are plugged into a platform's slots, they make additional devices available on the platform.</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Systems have platforms and interconnects.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Platforms have slots and devices.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Cards plug into slots and have devices.<span class="odfLiEnd"/></p></li></ul><h2 class="P249"><a id="a_2_2_Development_and_Execution"><span>2.2</span></a><a id="__RefHeading__1021_1060509377"/>Development and Execution</h2><p class="P11">Every platform must be enabled for development as well as execution. <span class="T9">Development</span> is the process of producing executable binaries, and <span class="T9">execution</span> is the process of running those binaries on the <span class="T62">available </span>platforms <span class="T62">in a system, </span>as part of the execution of a component-based application. OpenCPI uses the term binary artifact as a technology-neutral term for the <span class="T203">binary file</span> that execut<span class="T41">es</span> on various processing technologies. On GPPs, they are typically shared object files or dynamic libraries. On FPGAs, they are sometimes called bitstreams. On GPUs, they are sometimes called graphics kernels.</p><p class="P11">Enabling <span class="T9">development</span> is procuring, installing, configuring and integrating the various tools necessary to enable the developer to design and create binary artifacts from source code, <span class="T215">for a given target platform</span>. Some adaptations, scripts or wrappers are typically required to enable such tools to operate in the OpenCPI development context. OpenCPI does not contain, preclude or require GUI-based IDEs in the component or application development process.</p><p class="P12">For <span class="T81">most</span> embedded systems, the development tools do not run on the system itself, but run on a separate development host, typically a <span class="T63">(possibly virtual) </span>PC. The unusual, but still possible, case where the tools run on the targeted embedded system itself, is termed self-hosted development. When the target platform is embedded <span class="T63">and </span>development tools run on a development host, <span class="T63">that</span> is termed cross development, using cross-tools (e.g. cross-compilers).</p><p class="P12">All development hosts also act as execution platforms since any host capable of running development tools can act as an <span class="T215">OpenCPI </span>execution platform for the GPP/processor of that system. <span class="T215">OpenCPI contains tools that must be compiled on the development host and will always run on the development host. Thus a development host is established to execute tools used both to create binaries for itself and other target platforms (cross development). These tools include both OpenCPI's own tools as well as target-specific tools from third parties.</span></p><h2 class="Heading_20_2"><a id="a_2_3_Enabling_New_Systems_for_OpenCPI"><span>2.3</span></a><a id="__RefHeading___Toc4321_234407367"/>Enabling New Systems for OpenCPI</h2><p class="P158">Enabling systems for OpenCPI implies enabling the platforms and interconnects in the system for OpenCPI, as well as enabling the processors and devices on the platforms and the devices on any cards used in the system. The first step in the enabling process is to establish the inventory of these elements in the system.</p><p class="P158">Since interconnects, processors, and common devices are frequently found in many different systems, it is likely that support for some of them is already available in OpenCPI. So the enabling process is reduced to only dealing with the elements that do not already have OpenCPI support. Furthermore, there may be devices in the system that do not require OpenCPI in a particular situation, either because they are not going to be used, or their use is outside the scope of what OpenCPI does.</p><p class="P158">The system inventory for OpenCPI is:</p><ul><li><p class="P217" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Processors<span class="odfLiEnd"/></p></li><li><p class="P217" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Interconnects<span class="odfLiEnd"/></p></li><li><p class="P217" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Devices<span class="odfLiEnd"/></p></li></ul><p class="P158">For each, if there is no existing support in OpenCPI, support modules must be developed. For some, there may be partial support that must be extended for the intended usage. For new classes of processor (beyond GPP, FPGA, GPU) or new interconnects, the core framework of OpenCPI must be enhanced. Otherwise individual support modules can be developed without modifying the core infrastructure layers of OpenCPI. <span class="T85">Later sections of this document describe the requirements and process of enabling each type of element in the system. Processors require development support as well as runtime support. Devices and interconnects require only runtime support.</span></p><p class="P159">Since OpenCPI is open source software, it is very desirable to contribute new or extended support modules back to the community since most such modules will likely be used in other systems.</p><p class="P159">A key aspect of supporting new system elements is obtaining the necessary technical information and tools, and in some cases performing a variety of experiments to assess feasibility and derive otherwise unavailable information. When the information is not available from public sources (such as data sheets for device ICs), NDAs or other confidentiality agreements may be required. Vendors may refuse to supply the necessary information, leaving reverse engineering the only option.</p><p class="P159">Since OpenCPI, especially on FPGAs, operates directly on the FPGA devices and usually interacts directly with attached devices, either the vendor must supply the required device workers or supply the information required to development them. Preexisting FPGA drivers for attached devices that were not written with OpenCPI in mind are usually unsuitable as is, and must be either modified or replaced. In some cases then can be wrapped, although this usually results in unnecessary extra overhead.</p><h2 class="P250"><a id="a_2_4_A_Process_Template_for_Enabling_OpenCPI_on_a_New_System_"><span>2.4</span></a><a id="__RefHeading___Toc4323_234407367"/>A Process Template for Enabling OpenCPI on a New System.</h2><p class="P160">Here is a list of steps normal<span class="T86">l</span>y required to enable a new system for OpenCPI. <span class="T92">The first four steps are used to establish a clear base of information to estimate and plan the effort.</span></p><h3 class="P235"><a id="a_2_4_1_System_inventory"><span>2.4.1</span></a><a id="__RefHeading___Toc4325_234407367"/>System inventory</h3><p class="Body">Collect information to determine <span class="T89">the rough </span><span class="T4">scope of </span><span class="T5">the </span><span class="T4">effort.</span></p><p class="P29">This is the basic inventory of the relevant parts of the system, each of which needs to be considered in planning to enable the system.</p><p class="Body">Collect sufficient information to develop the list of processors, interconnects, and devices in the system that are relevant to OpenCPI applications, <span class="T87">establishing the system breakdown. This is usually a data sheet exercise.</span></p><p class="P163">The result is a list of system elements that need to be assessed, specifically identified as to the devices involved. This activity should not take more than a week unless information about the target system is unavailable or unduly restricted.</p><h3 class="P235"><a id="a_2_4_2_Processor__interconnect_and_device_assessment"><span>2.4.2</span></a><a id="__RefHeading___Toc4327_234407367"/>Processor, interconnect and device assessment</h3><p class="P28">Evaluate the state of support already in OpenCPI and what additional technical efforts are likely to be required. These assessments establish a rough level of effort, without necessarily establishing feasibility. A ROM <span class="T204">(rough order or magnitude) </span>LOE <span class="T204">(level of effort) </span>can be establishe<span class="T204">d</span>.</p><p class="P30">This effort requires matching technical support requirements with the current state of support in OpenCPI, and thus would require either gaining some familiarity with the OpenCPI supported hardware universe, or engaging with a group that is already familiar with it.</p><h4 class="Heading_20_4"><a id="a_2_4_2_1_For_each_processor__determine_whether_it_is_already_supported_in_OpenCPI__needs_some_incremental_enhanced_support__or_needs_entirely_new_support__The_categories_are_"><span>2.4.2.1</span></a>For each processor, determine whether it is already supported in OpenCPI, needs some incremental/enhanced support, or <span class="T204">needs </span>entirely new support. The categories are:</h4><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Already supported (e.g. Zynq ARM processor, Intel AMD x86 processor)<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Variant supported (e.g. Virtex6 vs. Virtex 7 FPGA)<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>New processor of existing type (e.g. PPC CPU vs. ARM CPU)<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>New class of processor (e.g. Adapteva Multicore). <span class="T93">This requires new work usually outside the scope of enabling a new system.</span><span class="odfLiEnd"/></p></li></ul><h4 class="Heading_20_4"><a id="a_2_4_2_2_For_each_processor__determine_whether_new_tools_are_required_that_have_not_been_integrated_with_OpenCPI_before__Categories_are_"><span>2.4.2.2</span></a>For each processor, determine whether new tools are required that have not been integrated with OpenCPI before. <span class="T87">Categories are:</span></h4><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Tools are already supported by OpenCPI<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Tools require a version upgrade/downgrade/variant of what is already supported.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Tools are completely new and not yet supported by OpenCPI.<span class="odfLiEnd"/></p></li></ul><h4 class="Heading_20_4"><a id="a_2_4_2_3_For_each_interconnect__determine_level_of_support_required_for_each_processor_type_that_is_attached_to_it__Categories_are_"><span>2.4.2.3</span></a>For each interconnect, determine level of support required for each processor type <span class="T89">that is attached to it</span>. Categories are:</h4><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Interconnect is already supported adequately in OpenCPI<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Interconnect support requires enhancements (e.g. PCI-E gen3x8, vs. PCI-E gen2x4).<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Interconnect support missing for processor type (e.g. Ethernet L2 on FPGAs).<span class="odfLiEnd"/></p></li></ul><h4 class="Heading_20_4"><a id="a_2_4_2_4_For_each_device__evaluate_the_state_of_support_already_in_OpenCPI_and_what_additional_technical_efforts_are_likely_to_be_required_the_each_device__as_it_will_be_attached_to_its_processor__"><span>2.4.2.4</span></a><span class="T91">For each device, e</span>valuate the state of support already in OpenCPI and what additional technical efforts are likely to be required the each device, as it will be attached to its processor..</h4><p class="P161"><span class="T91">Determine</span> whether it is already supported in OpenCPI, needs some incremental/enhanced support, or entirely new support. The categories are:</p><p class="Body">For each device attached to a processor, or on a required card, determine whether ex<span class="T90">i</span>sting OpenCPI support is adequate. Categories are:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Device is already supported<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Device support require<span class="T204">s</span> updating or enhancement.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Device support not present, but similar devices are supported as a model.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Device is different from any existing supported devices.<span class="odfLiEnd"/></p></li></ul><h3 class="P236"><a id="a_2_4_3_Assemble_Technical_Data_Package"><span>2.4.3</span></a><a id="__RefHeading___Toc4329_234407367"/>Assemble Technical Data Package</h3><p class="P162">For all elements requiring updated or new support, collect information necessary to perform the enabling technical development, and to establish more detailed work estimates. This effort will establish the availability of appropriate information to perform the technical developments. It will also find any roadblocks to obtaining the information (vendor unwillingness, legacy unavailability<span class="T204">)</span>.</p><p class="P164">In the particular case of device support, some vendors <span class="T204">d</span>o not expose sufficient information to support their devices in the absence of their own drivers that embed their ICD <span class="T204">(interface control document) </span>information they consider a trade secret. Such positioning by vendors of course makes them less desirable for OpenCPI-based systems.</p><p class="Body">Required information for processors/<span class="T88">FPGAs include:</span></p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Tool requirements (which tools, which settings, <span class="T88">cost</span>)<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Connectivity <span class="T88">technical </span>details (e.g. how <span class="T88">interconnects, </span>devices and slots are connected, <span class="T88">including pin-outs etc.</span>)<span class="odfLiEnd"/></p></li></ul><p class="Body">Require information for devices <span class="T91">include:</span></p><ul><li><p class="P218" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Device data sheets <span class="T92">or equivalent functional and interface documentation.</span><span class="odfLiEnd"/></p></li><li><p class="P218" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T88">P</span>rogramming/application guides.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Appropriate/relevant existing support modules in OpenCPI's<span class="odfLiEnd"/></p></li><li><p class="P219" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>How the devices are attached to the processors. (e.g. ICD)<span class="odfLiEnd"/></p></li></ul><p class="P163">As part of this effort, any additional required feasibility experiments or reverse engineering tasks are identified. <span class="T92">These are tasks to fill in the information gaps in order to have a high confidence work estimates and plans.</span></p><h3 class="P237"><a id="a_2_4_4_Experiments_to_Establish_Feasibility_and_Missing_Information"><span>2.4.4</span></a><a id="__RefHeading___Toc4331_234407367"/>Experiments to <span class="T199">E</span>stablish <span class="T199">F</span>eas<span class="T200">i</span>bility <span class="T205">and Missing Information</span></h3><p class="P31">There are always uncertainties and gaps in technical documentation, and in some cases the information is unavailable due to proprietary restrictions, In any case, as a final step to enable accurate work breakdowns and time/cost estimates, there are usually a set of tasks involving hands-on experience with the target system prior to the actual technical developments. Such tasks are derived from the <span class="T205">process</span> of the above tasks <span class="T205">(i.e. discovering knowledge gaps)</span>, and may include:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Verify and/or establish functional or performance capabilities of the system that are missing or questionable from the information obtained earlier.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Reverse-engineer missing ICD aspects (assuming no legal impediments).<span class="odfLiEnd"/></p></li></ul><p class="P31">These hands-on efforts establish the final information to plan and budget for the effort of enabling a new system for OpenCPI. <span class="T93">This activity depends on access to a real system.</span></p><h3 class="Heading_20_3"><a id="a_2_4_5_Planning_and_Specification"><span>2.4.5</span></a><a id="__RefHeading___Toc4333_234407367"/>Planning and Specification</h3><p class="P32">This phase of enabling a system is specifying the technical capabilities to be achieved for OpenCPI on the target system, and planning the tasks to develop and verify each functionality. The specifications are mostly based on achieving functionality that already exists on other systems, so the specifications are mostly references to other existing documents, with particular options, exceptions, or limitations highlighted.</p><p class="P32">Every system element not currently supported requires a development task, while all system elements, including those supposedly already supported, should still have a verification task planned.</p><p class="P32">In some cases, supporting a new system may in fact introduce new classes of support for OpenCPI, in which case the specifications will need to define functionality more fully, which will hopefully end up being a template for such support on other systems. Otherwise the functionality would be described as the existing baseline for similar devices, with any core enhancements clearly <span class="T205">specified</span>.</p><p class="P33">The tasks defined here will be of types described more fully in other sections of this document, where the various types of platform development are described in detail.</p><h3 class="P238"><a id="a_2_4_6_Technical_Development"><span>2.4.6</span></a><a id="__RefHeading___Toc4335_234407367"/>Technical Development</h3><p class="P33">The various technical development tasks are of the types corresponding to specific sections of this document. <span class="T94">Each type in the following list may or may not be required to enable a given system. Small updates or enhancements to existing modules are common.</span></p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Enabling a new development system <span class="T94">(including native development and execution)</span><span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T96">N</span>ew <span class="T95">GPP </span>development tools<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T96">N</span>ew FPGA tools<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>New GPP platform<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T96">New</span> interconnect for GPP platforms.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T96">New</span> interconnect for FPGA platforms<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T96">New</span> FPGA platform.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>New FPGA <span class="T205">c</span>ards<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>New FPGA <span class="T205">d</span>evice<span class="odfLiEnd"/></p></li></ul><h3 class="Heading_20_3"><a id="a_2_4_7_Verification"><span>2.4.7</span></a><a id="__RefHeading___Toc4337_234407367"/>Verification</h3><p class="P165">Verification requirements are very project-specific, but for each system element, a baseline verification should be defined, including specific characterization, both manual and automated.</p><h3 class="Heading_20_3"><a id="a_2_4_8_Contribution"><span>2.4.8</span></a><a id="__RefHeading___Toc4339_234407367"/>Contribution</h3><p class="P34">To reduce all efforts at system enablement for OpenCPI, it <span class="T205">is</span> strongly encouraged (or in some cases required), that enhancements to existing support modules, and new support modules for widely available processors, interconnects and devices be contributed back to the appropriate repositories.</p><h1 class="Heading_20_1"><a id="a_3_Enabling_the_Development_Host"><span>3</span></a><a id="__RefHeading__1023_1060509377"/><span class="T43">Enabling the </span>Development Host</h1><p class="P16">Before any platform-specific tools are installed on the development host, the basic development configuration must be established for OpenCPI. The <span class="FirstEmphasis">OpenCPI Installation Guide</span> describes the installation process <span class="T47">for supported development hosts</span>, but the basic steps are:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Installation of the OS with suitable options and packages.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Installation of native development tools to drive OpenCPI<span class="T64">'</span>s build system on the development host.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Retrieving current source code for OpenCPI<span class="odfLiEnd"/></p></li><li><p class="P220" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Establish a build environment with appropriate options<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Building the core OpenCPI software <span class="T214">targeting the development host</span><span class="odfLiEnd"/></p></li><li><p class="P220" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Building and testing the OpenCPI component libraries and example applications<span class="odfLiEnd"/></p></li></ul><p class="P111"><span class="T214">Building the core software for the development host</span> includes <span class="T214">OpenCPI</span> tool executables, as well as runtime libraries that support both tool execution as well as application/component execution on the development host.</p><p class="P112">This section addresses issues specific to development hosts, while following sections address issues for any target platform for execution, which also includes development hosts.</p><p class="P111"><span class="T216">F</span>or a new development platform, the <span class="T206">following aspects</span> must be <span class="T49">defined, documented</span>, and in some cases, new scripts and software will be required:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Operating <span class="T206">s</span>ystem <span class="T206">i</span>nstallation/configuration<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Retrieval of OpenCPI source distribution.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Installation of required packages that are available as options with the OS distribution.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Installation of other required packages that require specific download/installations.<span class="odfLiEnd"/></p></li></ul><p class="P17">The first two <span class="T215">steps </span>are generally manual, requiring written instructions. The latter two <span class="T215">are</span> scripted. Both the instructions and scripts should be <span class="T216">submitted back to</span> the OpenCPI source distribution for the benefit of other users of the same development host installation.</p><h2 class="Heading_20_2"><a id="a_3_1_Operating_System_Installation"><span>3.1</span></a><a id="__RefHeading__17646_2116501284"/>Operating System Installation</h2><p class="Standard">While an existing development system with various software installed can certainly be used as a development host, it <span class="T48">is</span> valuable to make a clean installation from scratch to avoid configuration conflicts and problems that simply arise from a mis-match or mis-configuration of the environment. While most OS installations have a number of manual steps, they should still be written down so they can be reliably repeated on new systems. Scripts should be written when a number of steps can be automated, being careful to avoid dependencies on other software this early in the installation process.</p><p class="Standard">See the installation guide for instructions on OS installation for the typical development hosts. Ideally, a new development host should have a new section written about it in <span class="T207">the installation guide</span> document so others can benefit, <span class="T48">including:</span></p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>How to get the OS (DVD, download, etc.).<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>How to perform the installation, with options at least appropriate for OpenCPI development.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>How to update the OS to the most recent patch level.<span class="odfLiEnd"/></p></li><li><p class="P221" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>How to obtain/download the OpenCPI code base.<span class="odfLiEnd"/></p></li></ul><p class="Standard">This <span class="T50">(normally manual) new </span>procedure should be included in the README file in the platform's director<span class="T65">y.</span> <span class="T50">Note that the last step is the first point where any OpenCPI support scripts become available. The last step, retrieving the OpenCPI source distribution, could consist of network download or downloading to another system and burning CDs/DVDs, or even installing additional tools in order to accomplish the download. Typically, for network attached systems, it is simply accomplished by using:</span></p><p class="Code">% git clone <span class="T66">https</span>://github.com/opencpi/opencpi.git</p><p class="Standard">Once the OpenCPI source distribution is present, scripts to finish the installation can be run out of that tree <span class="T207">(after they are created and added to the OpenCPI repository). The remaining instructions assume you are in the directory created by the git clone command, i.e. you must then do:</span></p><p class="Code">% <span class="T217">cd opencpi</span></p><p class="Standard">In summary, the task to enable this <span class="T207">first </span>aspect of the installation is to create the README file explaining the initial OS installation, and the retrieval of the OpenCPI distribution. <span class="T207">C</span>reate the new directory under <span class="Code">platforms</span>, named after the development platform, and put the README file in that directory.</p><h2 class="Heading_20_2"><a id="a_3_2_Development_Tools_Installation_for_the_Development_Host_"><span>3.2</span></a><a id="__RefHeading__17648_2116501284"/>Development Tools Installation<span class="T208"> </span>for the Development Host.</h2><p class="P113"><span class="T217">Most of the remaining steps for enabling the development host are the same as those for supporting any runtime platform, and are explained in the </span><span class="FirstEmphasis">Enable GPP Platforms</span><span class="T217"> section below. Prior to the installation of any target-platform-specific tools, a basic set of tools must be installed on the development host that will support development for all platforms.</span></p><p class="P18">OpenCPI development requires a number of tools to be available. These require<span class="T67">d</span> tools fall into two categories:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Tools typically part of a standard OS and development environment installation.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Tools that OpenCPI has specific scripts for downloading and installing.<span class="odfLiEnd"/></p></li></ul><p class="P18">The first category should be installed by a new script written for the <span class="T218">development host </span>platform, and placed in the platform's subdirectory under the name <span class="Code"><span class="T9">&lt;platform&gt;</span></span><span class="Code">-packages.sh</span>. This script does what is necessary to perform a standard installation (presumably globally on the system for all users) of at least the following software tools:</p><ul><li><p class="P232" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>make<span class="odfLiEnd"/></p></li><li><p class="P232" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>git<span class="odfLiEnd"/></p></li><li><p class="P232" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T208">C</span>/<span class="T208">C</span>++ compiler tool chain<span class="odfLiEnd"/></p></li><li><p class="P232" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>python<span class="odfLiEnd"/></p></li></ul><p class="P212">This script should be written assuming a minimal OS installation has been performed. I.e. it should not assume the OS is already a typical development system installation.</p><p class="P212">For OpenCPI <span class="T218">binary </span>distributions using the RPM <span class="T209">or similar package management schemes, </span><span class="T209">this script would be unnecessary since the installation would automatically deal with such dependencies.</span></p><p class="P213">For reference, the contents of this script for CentOS6, with the name:</p><p class="Code">platforms/centos6/centos6-packages.sh</p><p class="P194">is currently:</p><p class="Code">#!/bin/sh<br/># Install prerequisite packages for Cent<span class="T122">OS</span>6<br/>echo Installing standard extra packages using "yum"<br/>sudo yum -y groupinstall "development tools"<br/>echo Installing packages required: tcl pax python-devel<br/>sudo yum -y install tcl pax python-devel <span class="T67">fakeroot redhat-lsb-core</span><br/>echo Installing 32 bit libraries '(really only required for modelsim)'<br/>sudo yum -y install glibc.i686 libXft.i686 libXext.i686 ncurses-libs.i686</p><p class="P102">Sometimes extra tools <span class="T218">here </span>are required for various tools for other <span class="T218">target </span>platforms. In this example above, some 32 bit libraries are included because they were discovered to be needed by the Modelsim FPGA simulation tool. It was convenient, for users, to put them here for all installations rather than install them as needed for some tools. <span class="T209">The </span><span class="Code">tcl</span><span class="T209">, </span><span class="Code">fakeroot</span><span class="T209">, and </span><span class="Code">redhat-lsb-core</span><span class="T209"> packages are not needed by OpenCPI itself, but are required to install some other packages used with OpenCPI.</span></p><p class="P104">This script is run by the higher level script <span class="Code">install-prerequisites.sh</span>.</p><p class="P114">After creating this script, the remaining steps for enabling the development host are the same as for any GPP platform.</p><h1 class="Heading_20_1"><a id="a_4_Enabling_GPP_Platforms"><span>4</span></a><a id="__RefHeading__1025_1060509377"/><span class="T44">Enabling </span>GPP Platforms</h1><p class="Standard">Enabling a GPP <span class="T213">(General Purpose Processor) </span>platform <span class="T68">requires two different aspects: enabling development/cross development, and enabling execution. Enabling for development allows building component and application binaries for the platform and also enables building the OpenCPI core runtime libraries and runtime command line tools for execution on the target platform.</span></p><p class="Standard">To actually execute on <span class="T68">GPP</span> platforms, new additions or modifications to the OpenCPI core software may be required. The core software is highly portable and has been supported on a number of platforms and environments. However, it is common for a new compiler, toolchain, or system libraries to require some adjustments to the OpenCPI core software. Here are some reasons that require modifications to OpenCPI core software:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>New compilers sometimes have new correct warnings that should be addressed.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>System headers are sometimes <span class="T52">more</span> standards conformant, which is good.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Some compilers are dumber that others, requir<span class="T213">ing</span> code be dumbed down to avoid language or library features that are not universally supported.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Some compilers are stricter than others, requiring code that was previously accepted to be tightened up to be strictly compliant and accepted.<span class="odfLiEnd"/></p></li></ul><p class="Standard">These reasons may result in modifications to the core OpenCPI software, but they should not and cannot make that software stop working on existing supported platforms. Any such modifications should be done with care, and whenever possible, the modifications should be retested on existing supported platforms.</p><h2 class="Heading_20_2"><a id="a_4_1_Enabling_Development_for_New_GPP_Platforms"><span>4.1</span></a><a id="__RefHeading__1027_1060509377"/>Enabling Development for <span class="T199">New </span>GPP<span class="T43"> P</span>latforms</h2><p class="P115"><span class="T45">Whether a GPP platform is the development host itself, or an embedded GPP using cross-development, the tool chain must be established on a development host. For development hosts, there is typically a default tool chain that is installed globally in the system for any development task on that system. This is the purpose of the </span><span class="Code">platforms/</span><span class="Code"><span class="T9">&lt;platform&gt;</span></span><span class="Code">-packages.sh</span><span class="T219"> script mentioned above.</span></p><p class="P13">When the tool chain desired for <span class="T46">OpenCPI execution on </span>the development host is <span class="T9">not</span> the default <span class="T52">tool-chain </span>for <span class="T219">the development host</span>, then it is installed separately much like other cross-compiler tool chains for embedded hosts.</p><p class="P19">Thus development tools for GPP platforms are established in three ways:</p><ol><li><p class="P216" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.635cm;">1.</span>The development host's globally installed default tools.<span class="odfLiEnd"/></p></li><li><p class="P216" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.635cm;">2.</span>A specific prerequisite installation in OpenCPI's own installation area<span class="odfLiEnd"/></p></li><li><p class="P216" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.635cm;">3.</span>A side effect of another tool installation that it is part of.<span class="odfLiEnd"/></p></li></ol><p class="P20">The first <span class="T69">case </span>is the default for development hosts. The second is used <span class="T220">either:</span></p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>on a development host when OpenCPI should not use the default global tool-chain installation, or <span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>for normal cross-tool installation<span class="odfLiEnd"/></p></li></ul><p class="P20"><span class="T220">T</span>he third is used when such an installation by itself is not desired since the tool-chain is part of a separate package installation. <span class="T53">An example of this third case is the Xilinx FPGA tool set which also includes the compiler tool chain for the ARM CPUs that are inside the Xilinx Zynq SoC (FPGA + dual ARM core).</span></p><p class="P14"><span class="T53">OpenCPI has a prerequisites area (normally at /</span><span class="Code">opt/opencpi/prerequisites</span><span class="T53">), where various installations are placed so that they do not interfere with other global software installations. Both runtime library prerequisites and tool prerequisites are typically installed here. It is also acceptable to install tools in a global location, but such an installation may not be acceptable for all users. Hence all the built-in prerequisite installations that are standard for OpenCPI are installed in this sandbox area.</span></p><p class="P23">The primary tasks for enabling GPP cross development are to:</p><ul><li><p class="P222" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Develop a script for installing the tool-chain package in the prerequisites area (unless the platform is the development host, and the standard tool-chain is used).<span class="odfLiEnd"/></p></li><li><p class="P222" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Develop an environment setup script for OpenCPI cross development of the OpenCPI core software<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Develop a cross-development script for component development in the tools/include/rcc directory.<span class="odfLiEnd"/></p></li></ul><h3 class="Heading_20_3"><a id="a_4_1_1_Developing_a_Tool-chain_Installation_Script"><span>4.1.1</span></a><a id="__RefHeading__17650_2116501284"/>Developing a <span class="T199">T</span>ool-chain <span class="T199">I</span>nstallation <span class="T199">S</span>cript</h3><p class="Body">If the tool chain is truly specific to the platform, this script should live in the <span class="Code">platforms</span> directory in the file:</p><p class="Code">platforms/&lt;platform&gt;/install-&lt;tool&gt;.sh</p><p class="P147">Otherwise <span class="T54">it should be in:</span></p><p class="Code">scripts/install-&lt;tool&gt;.sh</p><p class="P147">This script should follow the pattern of other install scripts in the scripts directory, in particular:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Placing the package in the prerequisites area.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Downloading from a known internet location if at all possible.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>If not possible, then telling the user to get the installation file somehow and where to put it <span class="T54">(see the </span><span class="Code">scripts/install-opensplice.sh</span><span class="T54"> for an example of this).</span><span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Making the script clean up a previous installation when performing a new one.<span class="odfLiEnd"/></p></li><li><p class="P223" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>This script should source the installation setup script called <span class="Code">scripts/setup-install.sh</span>, which should be <span class="T9">sourced</span><span class="T55"> early in the script.</span><span class="odfLiEnd"/></p></li><li><p class="P223" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>This script should be expected to be called from the root of the OpenCPI tree.<span class="odfLiEnd"/></p></li></ul><p class="P138">A simple example of these scripts is in:</p><p class="Code">scripts/install-gtest.sh</p><p class="Body">This script can then be called manually or become part of a platform installation script.</p><h3 class="P239"><a id="a_4_1_2_The_File_to_Define_the_Full_Target_Specification_for_the_Platform_"><span>4.1.2</span></a><a id="__RefHeading___Toc78367_1944612760"/>The <span class="T210">F</span>ile to <span class="T210">D</span>efine the <span class="T210">F</span>ull <span class="T210">T</span>arget <span class="T210">S</span>pecification for the <span class="T210">P</span>latform.</h3><p class="P106"><span class="T51">A target specification file should be placed in the platform's directory with the name </span><span class="Code">target</span><span class="T51">. This file is a single line with the target specification consisting of three fields separated by hyphens. It is used during all compilations in OpenCPI to identify the platform. The CentOS6 target (in the file: </span><span class="Code">platforms/centos6/target</span><span class="T51">), is:</span></p><p class="P203">linux-c6-x86_64</p><p class="P103">The first field is the operating system name (another example is <span class="Code">macos</span>). The second field is the OS version, and the third is the machine or processor or architecture being compiled for, commonly returned from the linux utility <span class="Code">uname -m</span>.</p><p class="P105">The OS version field is normally a single letter assigned to the OS distribution (<span class="Code">c</span> for CentOS, <span class="Code">u</span> for Ubuntu, <span class="Code">r</span> for RedHat etc.), followed by a major version number.</p><p class="Body"><a id="__RefHeading__17652_2116501284"/><span class="T209">The third field is the machine architecture that should be shared across operating systems. E.g. </span><span class="Code">x86_64</span><span class="T209"> is for the 64 bit version of the Intel x86 architecture, and is used for all Linux and MacOS targets for that architecture.</span></p><h3 class="P239"><a id="a_4_1_3_Developing_the_Environment_Setup_Script"><span>4.1.3</span></a><a id="__RefHeading___Toc78369_1944612760"/>Developing <span class="T221">the</span> <span class="T199">E</span>nvironment <span class="T199">S</span>etup <span class="T199">S</span>cript</h3><p class="Standard">For each GPP platform, there must be a script that sets up the environment to build for that target platform. Any time development is done in the OpenCPI tree, such a script must be sourced before any building takes place. It is common to run such a script in any new command window for the target platform.</p><p class="Standard">The script to enable development for a given GPP platform should be in the file:</p><p class="Code">platforms/&lt;platform&gt;/&lt;platform&gt;-env.sh</p><p class="Body">This script should set up the environment variables that <span class="T220">specify</span> the tool-chain necessary to build for it. Some typical environment variables that must be setup in this script include:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>OCPI_<span class="T220">DYNAMIC</span>: whether libraries <span class="T70">should default to</span> static (0) or dynamic(1)<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>OCPI_TARGET_OS: the OS: first part of the target triple<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>OCPI_TARGET_OS_VERSION: the OS Version: second part of target triple<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>OCPI_TARGET_ARCH: the third/last part of the target triple<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>OCPI_TARGET_HOST: the target triple<span class="odfLiEnd"/></p></li><li><p class="P224" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>OCPI_CFLAGS, OCPI_C<span class="T220">XX</span>FLAGS, OCPI_LDFLAGS: typical usage<span class="odfLiEnd"/></p></li></ul><h3 class="P239"><a id="a_4_1_4_Files_to_Provide_Settings_for_Environment_Variables_for_Framework_Development"><span>4.1.4</span></a><a id="__RefHeading___Toc78371_1944612760"/><span class="T210">F</span>ile<span class="T212">s</span> to <span class="T210">P</span>rovide <span class="T212">Settings</span> for <span class="T210">E</span>nvironment <span class="T210">V</span>ariables for <span class="T212">Framework D</span>evelopment</h3><p class="P108">The file <span class="Code">&lt;platform&gt;-env.sh</span> must be created and should define default values for environment variables needed during <span class="T211">framework </span>development. The variables specified in this file may be overridden by users when they customize their own environments. This file is used in environment setup scripts to establish defaults based on the platform.</p><p class="P108">These settings are not those explicitly <span class="T9">required</span> for the platform, but just defaults. If they are hard requirements, they should be in the <span class="Code"><span class="T9">&lt;platform&gt;</span></span><span class="Code">-target.sh</span> and <span class="Code"><span class="T9">&lt;platform&gt;</span></span><span class="Code">-target.mk</span> files. <span class="T211">They only should apply to building the OpenCPI framework, and not for component development.</span></p><p class="P109">The most common variable setting in these files is for compiler warning options, e.g.:</p><p class="P203">export OCPI_CXXFLAGS+=-Wno-sign-conversion</p><p class="P189">or</p><p class="P204">export OCPI_CXXFLAGS+=-std=c++0x</p><p class="P109">The two files, <span class="Code">&lt;platform&gt;-target.sh</span> and <span class="Code">&lt;platform&gt;-target.mk</span> serve the same purpose for different environments. The first sets variables used in shell scripts and the second sets variables for make files. The variable settings should be the same in each. The settings only apply to building the OpenCPI framework and not to component development.</p><p class="P110">For all three of these files, the range of settings is best understood by examining all the existing platforms.</p><h3 class="P239"><a id="a_4_1_5_The_Script_to_Recognize_the_Currently_Running_Platform"><span>4.1.5</span></a><a id="__RefHeading___Toc78373_1944612760"/>The <span class="T212">S</span>cript to <span class="T212">R</span>ecognize the <span class="T212">C</span>urrently <span class="T212">R</span>unning <span class="T212">P</span>latform</h3><p class="P107">The final step is to modify the file <span class="Code">platforms/getPlatform.sh</span> to recognize when it is running on this new platform and return the new target consistent with the others, with <span class="T212">five</span> values: OS, OSVersion, Machine, Target, Platform.</p><p class="P110">On a CentOS6 platform, this happens:</p><p class="P203">% platforms/getPlatform.sh<br/>linux c6 x86_64 linux-c6-x86_64 centos6</p><p class="P110">On a MacOS platform this happens:</p><p class="P203">% platforms/getPlatform.sh<br/>macos 10_11 x86_64 macos-10_11-x86_64 macos10_11</p><h3 class="Heading_20_3"><a id="a_4_1_6_Developing_a_Cross-development_Component_Build_Script"><span>4.1.6</span></a><a id="__RefHeading__17654_2116501284"/>Developing a <span class="T199">C</span>ross-development <span class="T199">C</span>omponent <span class="T199">B</span>uild <span class="T199">S</span>cript</h3><p class="P21">While the above environment setup script is used when building the core code of OpenCPI (libraries and executables), a different script is used when building software components. This allows for building components for multiple targets in a single pass.</p><p class="P21">This script is in the file:</p><p class="Code"><span class="T72">tools/cdk/include/rcc</span>/&lt;dev-host&gt;=&lt;target-<span class="T72">host</span>&gt;.mk</p><p class="P21">Thus the script is specifically describing the tools used when building on a particular development host targeting a particular target GPP <span class="T72">host</span>. An example is the file:</p><p class="Code"><span class="T72">tools/cdk/include/rcc/</span>linux-c6-x86_64=linux-zynq-arm.mk</p><p class="P21">which contains the script to compile for the zynq version of linux with an ARM processor, when the development host is Cent<span class="T71">OS</span>6 linux on an X86_64 (64-bit x86) processor.</p><p class="P24">Thus the required target file in a platform's directory contains the target triple used here. E.g. since <span class="Code">platforms/zed/target</span> file contains l<span class="Code">inux-zynq-arm</span>, cross-building for the <span class="Code">zed</span> platform on a CentOS6 development host looks for the file named <span class="Code">linux-c6-x86_64=linux-zynq-arm.mk</span></p><p class="P21">Th<span class="T73">e</span>s<span class="T73">e</span> script<span class="T73">s</span> <span class="T73">are</span> responsible for setting the following environment variables whose names include the <span class="T73">target</span> name (in this case <span class="Code">linux-zynq-arm</span>):</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Gc_linux-zynq-arm<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Gc_LINK_linux-zynq-arm<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Gc++_linux-zynq-arm<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Gc++_LINK_linux-zynq-arm<span class="odfLiEnd"/></p></li></ul><p class="P139">These variables are the compile and link commands for C and C++ components respectively.</p><h3 class="P240"><a id="a_4_1_7_Summary_for_Enabling_Development_for_a_New_GPP_Platform"><span>4.1.7</span></a><a id="__RefHeading__17656_2116501284"/>Summary for Enabling Development for a <span class="T199">N</span>ew GPP <span class="T199">P</span>latform</h3><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>An installation script to install the tool-chain on the development host<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T222">E</span>nvironment script<span class="T222">s (3)</span> to set environment variables for the OpenCPI core.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>An environment script to set up environment variables for building C/C++ components.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Test the installation and build of standard OpenCPI prerequisite software packages.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Build the OpenCPI core and make adjustments to the code for issues that arise.<span class="odfLiEnd"/></p></li></ul><h2 class="Heading_20_2"><a id="a_4_2_Enabling_Execution_for_GPP_Platforms"><span>4.2</span></a><a id="__RefHeading__1029_1060509377"/>Enabling Execution for GPP <span class="T199">P</span>latforms</h2><p class="P15">Execution on GPP platforms requires some command line tools, libraries, a<span class="T56">nd</span> device drivers. The core OpenCPI libraries and command-line tools are built using the appropriate compiler <span class="T74">as installed above. Once the development host has been enabled, and the OpenCPI core and example components have been built, a few additional steps are required to enable </span><span class="T10">execution</span><span class="T74"> on the platform.</span></p><p class="P116">Several <span class="T57">OpenCPI </span>runtime libraries have aspects that use conditional compilation depending on the system or CPU being target<span class="T58">ed</span>. The current OpenCPI core libraries have significant Linux dependencies and in several files there is conditional code between Linux and MacOS (such as low level networking details). There are a few areas that have conditional code depending on the CPU being used, such as realtime high resolution timing registers in the CPU<span class="T75">. These customizations are not well defined. For new CPU architectures and new operating systems not based on Linux, the code must be examined for these issues, which will typically cause compilation errors.</span></p><h1 class="Heading_20_1"><a id="a_5_Enabling_FPGA_Platforms"><span>5</span></a><a id="__RefHeading__1033_1060509377"/>Enabling FPGA Platforms</h1><p class="P166">Whereas <span class="T59">GPP platforms have operating systems that OpenCPI uses to interface with the hardware surrounding the processor, FPGA platforms do not. OpenCPI provides an infrastructure on FPGAs, which requires some FPGA logic that is specific to the platform, analogous to a board support package that adapts an embedded operating system to a given hardware board and associated devices.</span></p><p class="P148">We define an FPGA <span class="T21">platform</span> as a particular, single FPGA on some hardware (board). If a board has multiple OpenCPI-usable FPGA<span class="T60">s</span>, each is a platform and each may host a container in which <span class="T76">components (actually: </span><span class="T11">worker instances</span><span class="T76">) </span>execute.</p><p class="P167">An FPGA <span class="T119">simulator may also be an FPGA platform</span>, which is also a place where OpenCPI HDL components may execute, with all the same infrastructure as physical FPGA platforms. </p><p class="P169">Analogous to preparing the support for a GPP platform, enabling an FPGA platform involves steps <span class="T117">to enable the development environment, and steps to enable the runtime/execution environment.</span></p><p class="P169"><span class="T117">Enabling development for a platform involves</span>:</p><ul><li><p class="P225" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Installing and integrating a development tool-chain that can target the FPGA <span class="T124">device </span>on the platform.<span class="odfLiEnd"/></p></li><li><p class="P225" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Verifying that the integrated tool chain can process and build all the core OpenCPI FPGA code and portable components when targeting the FPGA platform's part and part family.<span class="odfLiEnd"/></p></li></ul><p class="P72">Enabling runtime execution for a platform involves:</p><ul><li><p class="P225" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Writing specific new VHDL code that supports the particulars of the hardware attached to the FPGA on the platform <span class="T117">(except for simulators)</span><span class="odfLiEnd"/></p></li><li><p class="P225" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Verifying that the various portable FPGA test applications execute on the platform.<span class="odfLiEnd"/></p></li></ul><p class="P170">In the sections below, these two aspects are described in detail.</p><h2 class="P251"><a id="a_5_1_Physical_FPGA_Platforms"><span>5.1</span></a><a id="__RefHeading___Toc17468_1235158909"/>Physical FPGA Platforms</h2><p class="P148"><span class="T117">Physical FPGA p</span>latforms are based on a particular type of FPGA chip: e.g., a Xilinx ML605 development board has a Virtex6 FPGA (xc6vlx240t), with a speed grade and a package. Platforms are specific FPGAs connected locally to devices such as:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Local I/O devices: ADC, DAC, DRAM, Flash, G<span class="T123">b</span>E, etc. <span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Interconnects: PCI<span class="T123">e</span>, Ethernet, etc. to talk to other <span class="T117">OpenCPI platforms</span> <span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Slots: FMC, HSMC, mezzanine card slots. <span class="odfLiEnd"/></p></li></ul><p class="Body"><span class="T60">For example, </span>a Xilinx ML605 has PCI Express <span class="T60">interconnect</span>, DRAM, and 2 FMC slots <span class="T60">(and other minor devices).</span></p><p class="P170">For each attached device on a platform, specific development may be required (described in the Device Development section below). However, in many cases existing device support from other platforms may be reused, since OpenCPI FPGA device support is typically done in a way that is sharable across platforms.</p><p class="P171">Examples of physical FPGA platforms are:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Xilinx ML605 development board with a Virtex6 FPGA-attached<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>ZedBoard platform with a Zynq SoC (with internal ARM and FPGA).<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Altera Stratix<span class="T130">4</span> development board.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Xilinx ZC702 development board with Zynq SoC<span class="odfLiEnd"/></p></li></ul><h2 class="P251"><a id="a_5_2_Simulator_FPGA_Platforms"><span>5.2</span></a><a id="__RefHeading___Toc17470_1235158909"/>Simulator FPGA Platforms</h2><p class="P168">OpenCPI provides a software server infrastructure to make execution on simulators as similar as possible to execution on phy<span class="T117">si</span>cal FPGAs, without simulating any external device-related logic. <span class="T118">The simulation server environment makes execution on different simulators also similar to each other. Multiple simulator instances may execute simultaneously (subject to any license restrictions).</span></p><p class="P171">At the time of this writing, only mixed-language simulators (VHDL and Verilog) may be enabled and used with OpenCPI.</p><p class="P171">Examples of supported FPGA simulators include:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Xilinx Isim<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Mentor Modelsim<span class="odfLiEnd"/></p></li></ul><p class="P141">Other simulators that may be supported include:</p><ul><li><p class="P226" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Aldec<span class="odfLiEnd"/></p></li><li><p class="P226" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Xilinx Vivado xsim<span class="odfLiEnd"/></p></li></ul><h2 class="P252"><a id="a_5_3_Enabling_Development_for_FPGA_Platforms"><span>5.3</span></a><a id="__RefHeading__1035_1060509377"/>Enabling Development for FPGA <span class="T199">P</span>latforms</h2><h3 class="Heading_20_3"><a id="a_5_3_1_Installing_the_Tool_Chain"><span>5.3.1</span></a><a id="__RefHeading__17658_2116501284"/>Installing the <span class="T199">T</span>ool <span class="T199">C</span>hain</h3><p class="P152">Document the basic process of obtaining and installing the tools, highlighting any options or configurations that must be specialized, customized, or simply required for using OpenCPI. Licensing is also an issue for many FPGA tools.</p><p class="P153">Note that OpenCPI execute<span class="T125">s</span> FPGA tools in wrapper scripts that perform any necessary initialization or setup, including license setup. Thus, for OpenCPI, there is no need for login-time startup scripts. In fact, such scripts can actually cause problems in many cases since OpenCPI frequently invokes multiple alternative tool sets under a single build command. <span class="T125">P</span>olluting your environment with settings from multiple tools and vendors is frequently a source of problems.</p><p class="P182">For OpenCPI development it is recommended to remove any such automatic setup at login items that the tools installation process inserts into your login script(s), and put them in an a separate script that is used as needed.</p><h3 class="Heading_20_3"><a id="a_5_3_2_Integrating_the_Tool_Chain_into_the_OpenCPI_HDL_Build_Process_"><span>5.3.2</span></a><a id="__RefHeading__17660_2116501284"/>Integrating the <span class="T199">T</span>ool <span class="T199">C</span>hain into the OpenCPI <span class="T128">HDL B</span>uild <span class="T199">P</span>rocess.</h3><p class="P152">[<span class="T128">[</span>This is a large topic that is currently not <span class="T128">fully </span>documented].</p><p class="P172">This process includes enabling the OpenCPI FPGA build process to use the right tools to target the part family of the FPGA device on the platform. For example, on the Zed platform, the family of the FPGA part is zynq. On the ML605 platform, the family of the FPGA part is virtex6. The required tools for a platform's FPGA may already be installed and integrated, and may already support the particular part family of the platform's FPGA. If not, that support must be added to the integration of those tools.</p><p class="P172">So the integration process is:</p><ol><li><p class="List_20_Number" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">1.</span>If the required tools are not available integrated with OpenCPI, they must be <span class="T129">integrated (not a small job)</span>.<span class="odfLiEnd"/></p></li><li><p class="List_20_Number" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">2.</span>If the required tools are available integrated with OpenCPI, but do not yet support the part family, that support must be added.<span class="odfLiEnd"/></p></li></ol><p class="P172">The database of part families, and their relationships to tools and platforms, is in the file:</p><p class="Code">tools/cdk/include/hdl/hdl-targets.mk</p><p class="P154">The scripts that wrap and execute FPGA tools are found in <span class="T126">the directory:</span></p><p class="Code">tools/cdk/include/hdl</p><h3 class="Heading_20_3"><a id="a_5_3_3_Building_All_the_Existing_Portable_HDL_Code"><span>5.3.3</span></a><a id="__RefHeading__17662_2116501284"/>Building <span class="T199">A</span>ll the <span class="T199">E</span>xisting <span class="T199">P</span>ortable HDL <span class="T199">C</span>ode</h3><p class="P183">Nearly all HDL code (mostly VHDL) in OpenCPI is portable and can be built (compiled and synthesized) for all part families and vendors and simulators. This portable HDL code can be built using the make hdlportable command in the top level directory of OpenCPI, supplying the targets (part families) required.</p><p class="P192">Here is a command that builds all the portable code in OpenCPI <span class="T128">for currently supported part families (known as </span><span class="Code">HdlTargets</span><span class="T128"> in the OpenCPI FPGA build process):</span></p><p class="Code">make hdlportable <span class="T127">\<br/> </span>HdlTargets='isim modelsim virtex6 virtex5 <span class="T127">\<br/>       </span>stratix4 stratix5 zynq spartan3adsp'</p><p class="P186">Some of the code built using the above command is explicitly labeled to <span class="T21">only build</span> for certain targets or to <span class="T21">not build</span> for some targets, but most is truly portable and will build for all targets. Once this build command succeeds for the target (part family) for the platform, you can proceed with the steps below to write the HDL code necessary to enable execution on the platform.</p><h3 class="Heading_20_3"><a id="a_5_3_4_Scripts_for_HDL_Platforms"><span>5.3.4</span></a><a id="__RefHeading___Toc22146_1235158909"/>Scripts for HDL Platforms</h3><p class="P187">For physical platforms (not simulation), there are two scripts that must be also placed in the platform's directory:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>A JTAG support script to enable JTAG-based bitstream loading, <span class="T183">whose name is:<br/></span><span class="Code">jtagSupport_</span><span class="Code"><span class="T9">&lt;platform&gt;</span></span><span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>A boot-flash loading script to enable scripted loading ot bitstreams to the boot flash, <span class="T183">whose name is:<br/></span><span class="Code">loadFlash_</span><span class="Code"><span class="T9">&lt;platform&gt;</span></span><span class="odfLiEnd"/></p></li></ul><p class="P187">In some cases the appropriate script might be already be written for a different platform, in which case one platform's script can be a symbolic link to the other. In other cases there might be a vendor script (e.g. for all Xilinx or all Altera) which may live in the <span class="Code">hdl/vendors/</span><span class="Code"><span class="T9">&lt;vendor&gt;</span></span> directory.</p><p class="P188"><span class="T184">For simulation platforms there must be a script to invoke the simulator underneath the OpenCPI simulator server as invoked by the </span><span class="Code">ocpihdl simulate</span><span class="T184"> command. This script must be called: </span><span class="Code">runSimExec.</span><span class="Code"><span class="T9">&lt;platform&gt;</span></span></p><h2 class="P253"><a id="a_5_4_Enabling_Execution_for_FPGA_platforms"><span>5.4</span></a><a id="__RefHeading__1037_1060509377"/>Enabling Execution for <span class="T44">FPGA</span> platforms</h2><p class="P75">This section assumes the reader is familiar with component and application development with OpenCPI, including developing HDL <span class="T134">application </span>workers and assemblies.</p><p class="P75">An OpenCPI HDL hardware platform is an FPGA with associated devices and slots attached to its pins. The first step to supporting the platform is to determine whether the types of devices and slots attached to the FPGA are already supported by OpenCPI.</p><p class="P75">If a platform has slot types that are not yet supported, that support must be added. Slot types are defined by specific physical connectors, electrical signaling and direction, and pin and signal name assignments. Common slot types are FMC (FPGA Mezzanine Cards) as defined in the VITA 57 standard, and HSMC (High Speed <span class="T131">Mezzanine Card) as defined by Altera</span>. This <span class="T131">slot-type support </span>process is described in the Defining New HDL Platform Slot Types section below. <span class="T131">It generally does not involve writing HDL code, just writing descriptive metadata in XML.</span></p><p class="P75">Similarly, if the devices <span class="T131">attached to the FPGA </span>are not yet supported in OpenCPI, that support must also be added. <span class="T131">Device support in OpenCPI is generally portable (i.e. the device support code can be used to support the same device on different platforms), although there are certainly exceptions to this. The device support process is described in the Device Support for FPGA Platforms section below.</span></p><p class="P76">The term card is used in OpenCPI to mean a card with additional devices that may be plugged into a slot on the platform. Thus devices may be directly attached to the pins of the platform FPGA, or they may exist on a plug-in card that, when plugged into a slot, become attached to the platform FPGA. In this latter case such devices are not considered part of the platform, but part of the card, which might be plugged into a certain type of slot on any platform.</p><p class="P77">HDL Platform support starts with deciding on a name for the platform (usually a lower-cased version of the name used by the vendor of the platform), and creating a directory with that name wherever the platform support code and metadata should live. In that directory in all cases there should be a Makefile containing the following line, <span class="T188">usually the last line in the file</span>:</p><p class="Code">include $(OCPI_CDK_DIR)/include/hdl/platform.mk</p><p class="P99">Directories for platforms supported in the OpenCPI core repository are in the <span class="Code">hdl/platforms</span> directory, but the directory for any other platform can be anywhere else. If several platforms are being supported together, it is convenient, but not required, to place all their directories in a single <span class="Code">platforms</span> directory since that name is specially supported in the <span class="Code">OCPI_HDL_PLATFORM_PATH</span> environment variable. Use of this environment variable is explained in the HDL section of the OpenCPI <span class="T188">Component </span>Development Guide.</p><p class="P78">Then the platform worker <span class="T189">(source code and OWD/XML) </span>and other platform-specific files are placed in this directory. In summary, the steps to enabling an HDL platform for execution are, (assuming the development tools are enabled):</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Determine <span class="T133">and identify </span>slot types and devices for the platform.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Define any new slot types and add them to OpenCPI.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Define and establish skeletons for all new devices on the platform.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Define the platform worker, with associated hardware-related metadata <span class="T132">and files</span>.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Implement the platform worker and perform basic tests, with <span class="T9">no</span> devices enabled.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Implement any new devices for the platform, and test the platform <span class="T9">with</span> devices <span class="T190">(both pre-existing and new)</span>.<span class="odfLiEnd"/></p></li></ul><h3 class="P241"><a id="a_5_4_1_Creating_the_XML_Metadata_Definition_of_the_Platform"><span>5.4.1</span></a><a id="__RefHeading__17664_2116501284"/>Creating the <span class="T131">XML M</span>etadata <span class="T131">D</span>efinition of the <span class="T131">P</span>latform</h3><p class="P77">The XML file that defines an HDL platform <span class="T135">is named the same as the platform name with an </span><span class="Code">.xml</span><span class="T135"> suffix. It describes</span> both the hardware aspects of the platform as well as the OWD <span class="T134">for the </span>HDL worker that runs the platform, which is called the platform worker. Thus the platform XML is an OWD for the platform worker, with additional information. <span class="T134">The platform worker is a special type of device worker (a worker that touches pins). Developing device workers in general is the subject of the next major section below, but information specific to platform workers is described here.</span></p><p class="P79">The platform XML is an OWD with these special aspects:</p><ul><li><p class="P227" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>The top level XML element is <span class="Code">HdlPlatform</span><span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>The spec being implemented is <span class="Code">platform-spec.xml</span>.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>The slots present on the platform <span class="T147">are indicated by </span><span class="Code">slot</span><span class="T147"> elements</span><span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>The devices present on the platform <span class="T147">are indicated by </span><span class="Code">device</span><span class="T147"> elements.</span><span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>The external signals (to pins) required by the platform worker (as for any device worker) <span class="T147">are indicated by </span><span class="Code">signal</span><span class="T147"> elements. Signal elements are described in the device support section below.</span><span class="odfLiEnd"/></p></li></ul><h4 class="P254"><a id="a_5_4_1_1_Slot_Elements_in_a_Platform_XML_File"><span>5.4.1.1</span></a>Slot Element<span class="T150">s</span> <span class="T150">in</span> a Platform XML <span class="T150">Fi</span>le</h4><p class="Body"><span class="T136">Each s</span>lot element of the platform XML file declare<span class="T136">s</span> the existence of a slot. The required <span class="Code">type=</span> attribute must match the name of a defined slot type. The slot type <span class="T138">definition files</span> are normally in the <span class="Code">hdl/cards/specs</span> directory in the <span class="T191">CDK</span>, which is automatically searched whenever <span class="T138">a platform XML</span> file is processed. Examples of slot types are:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="Code"><span class="T137">fmc_lpc</span></span>: the low pin count variant of the FPGA Mezzanine Card from VITA57.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="Code"><span class="T137">fmc_hpc</span></span>: the high pin count variant of the FMC cards from VITA57<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="Code"><span class="T137">hsmc</span></span>: the High Speed Mezzanine Card from Altera.<span class="odfLiEnd"/></p></li></ul><p class="Body">The optional <span class="Code">name=</span> attribute of the slot element may assign a name to the slot. If it is not present, the slot's name becomes the slot type. <span class="T148">If </span><span class="Code">name=</span><span class="T148"> is </span><span class="T18">unspecified</span><span class="T148"> and i</span>f more than one slot of the same type is present, a zero-origin ordinal is appended to the slot-type as the name. <span class="T148">E</span>.g. if there were two slots of type <span class="Code">hsmc</span> and the<span class="T148">y</span> were not given names, their names would be <span class="Code">hsmc0</span> and <span class="Code">hsmc1</span>. <span class="T139">Slot names are needed for two purposes:</span></p><ol><li><p class="List_20_Number" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">1.</span>When a card is plugged into a slot, that slot is identified by its name. <span class="T139">Slot names are case insensitive for this purpose.</span><span class="odfLiEnd"/></p></li><li><p class="P233" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">2.</span>The default name for signals between the platform FPGA and a slot is the slot name as a prefix, followed by underscore, followed by the signal name as defined in the slot type definition file.<span class="odfLiEnd"/></p></li></ol><p class="Body">These fully prefixed slot signal names do not appear in <span class="T139">source </span>code or XML, but they do correspond to the names found in a platform's constraint file, <span class="T139">which is normally supplied separately and is not defined nor modified by OpenCPI.</span></p><p class="P176">E.g. <span class="T149">for a slot signal named </span><span class="Code">PRSNT_M2C_L</span><span class="T149">, </span>the name of the signal from the platform FPGA to the slot, for the second of two <span class="Code">fmc_lpc</span> slots <span class="T139">that did not have assigned names</span>, would be <span class="Code">fmc_lpc1_PRSNT_M2C_L</span>. <span class="T139">Slot names (and slot type signals) </span><span class="T14">are case sensitive</span><span class="T139"> for this purpose since there are some tools and systems where the case of such signals matters in the constraints file.</span></p><p class="Body">There is one other aspect to slot elements in the platform XML file: <span class="T140">slot </span>signal mapping. Normally, the slot signal names are based on the specification of the slot types. <span class="T140">E.g., t</span>he FMC slot signal names are defined by VITA57. <span class="T140">If a platform's constraints file (and documentation) do not use the standard names from the slot type specification, then extra child elements are added to the slot element, indicating the correspondence between what the standard (e.g. VITA57) says and what this platform's constraints file and documentation use as a signal name for that slot signal.</span></p><p class="P173">As an example, the ZedBoard platform has an FMC LPC slot. It uses the VITA57 signal names for <span class="T9">almost</span> all these signals. However, it changes signal names when they are differential and use the CC suffix. Whereas VITA57 always puts the CC suffix last, the ZedBoard puts the differential suffix last (i.e. _N and <span class="T141">P). </span><span class="T142">So here is the slot element for the ZedBoard platform XML, that forces the slot name to be upper case </span><span class="Code"><span class="T142">FMC</span></span><span class="T142">, and remaps the offending signals so OpenCPI knows how to route signals through the slot's connector </span><span class="T143">to cards that </span><span class="T28">do </span><span class="T29">not</span><span class="T143"> follow the VITA57 conventions</span><span class="T142">:</span></p><p class="P202">&lt;slot name='FMC' type='fmc_lpc'&gt;<br/> &lt;!-- <span class="T140">These</span> signals don't <span class="T140">use</span> <span class="T140">VITA57</span> signal name<span class="T140">s--&gt;</span><br/> &lt;signal slot='LA00_P_CC' platform='LA00_CC_P'/&gt;<br/> &lt;signal slot='LA00_N_CC' platform='LA00_CC_N'/&gt;<br/> &lt;signal slot='LA01_P_CC' platform='LA01_CC_P'/&gt;<br/> &lt;signal slot='LA01_N_CC' platform='LA01_CC_N'/&gt;<br/> &lt;signal slot='LA17_P_CC' platform='LA17_CC_P'/&gt;<br/> &lt;signal slot='LA17_N_CC' platform='LA17_CC_N'/&gt;<br/> &lt;signal slot='LA18_P_CC' platform='LA18_CC_P'/&gt;<br/> &lt;signal slot='LA18_N_CC' platform='LA18_CC_N'/&gt;<br/> &lt;signal slot='CLK0_M2C_N' platform='CLK0_N'/&gt;<br/> &lt;signal slot='CLK0_M2C_P' platform='CLK0_P'/&gt;<br/> &lt;signal slot='CLK1_M2C_N' platform='CLK1_N'/&gt;<br/> &lt;signal slot='CLK1_M2C_P' platform='CLK1_P'/&gt;<br/> &lt;signal slot='DP0_C2M_P' platform=''/&gt;<br/> &lt;signal slot='DP0_C2M_N' platform=''/&gt;<br/>&lt;/slot&gt;</p><p class="P174"><span class="T142">Finally, some platforms do not connect all possible slot signals to the FPGA. In this case the slot element maps them to an empty signal name on the platform, indicating that these slot signals cannot be used on this platform. In the above example, the last two slot signals mentioned (</span><span class="Code"><span class="T142">DP0_C2M_P/N</span></span><span class="T142">) are not connected to the </span><span class="T146">(Zynq) </span><span class="T142">FPGA on the ZedBoard platform.</span></p><p class="P175"><span class="T144">Card-based devices are not considered part of the platform, and thus constraints for card-based devices are handled differently </span><span class="T145">and </span><span class="T146">are </span><span class="T145">not in the platform's constraints file.</span></p><h4 class="P255"><a id="a_5_4_1_2_Device_Elements_in_a_Platform_XML_File"><span>5.4.1.2</span></a>Device Elements in a Platform XML File</h4><p class="P177">Device elements indicate devices that are part of the platform and are directly attached to the platform FPGA's pins. Device elements indicate <span class="T151">these</span> things:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T19">Required: </span><span class="T151">the</span> HDL device worker support<span class="T151">ing</span> this device (like a device driver).<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>The (optional) name of the device, if not based <span class="T192">on the device worker's name</span>.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Which parameter settings should be used for the device worker for this device.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>A<span class="T151">ny</span> mapping between the device worker's external signals and the names that the platform uses for those same device signals <span class="T192">(e.g. in its constraints file)</span>.<span class="odfLiEnd"/></p></li></ul><p class="P178">In most cases a device element simply indicates that a device exists and which device worker should be used to support it. E.g.: if a platform had a flash device that was supported by the device worker named flash.hdl, this might be the device element:</p><p class="P196">&lt;device worker='flash'/&gt;</p><p class="P178">Similar to slot names, if there is no <span class="Code">name=</span> attribute provided for a device element, the worker name is used, and if there are multiple devices using the same worker, a zero-based ordinal is appended.</p><p class="P178">Like normal application workers, device workers can have parameter or initial property settings. To make device workers reusable on multiple platforms, different values may be needed for different platforms. E.g., if a device worker has several clocking modes depending on how its hardware is configured, these property values can indicate to the device worker how it should operate on this particular platform. Such property values are supplied using property elements (with name= and value= attributes), much like the property values for application components in an OpenCPI application.</p><p class="P178">In the following example, the device element <span class="T153">says</span> there is a <span class="Code">lime_adc</span> device present, and on this platform, its <span class="Code">use_ctl_clk</span> property should be set to <span class="Code">false</span>.:</p><p class="P196">&lt;device worker='lime_adc'&gt;<br/> &lt;property name='use_ctl_clk' value='<span class="T152">false</span>'/&gt;<br/>&lt;/device&gt;</p><p class="P195">Like slots, devices can have signal elements to indicate that the standard signal naming should be overridden to match up with the constraints file of the platform (so that the constraints file can remain untouched). These <span class="Code">signal</span> elements use the <span class="Code">name=</span> attribute to indicate the signal name as declared by the device worker, and the <span class="Code">platform=</span> attribute to indicate the name used for the platform. If not mapped, the platform signal for this device's signal is the device's name, followed by underscore, followed by the device worker's declared external signal name.</p><p class="P193">Also like slots, if the <span class="Code">platform=</span> attribute is the empty string, it indicates that this device signal is not connected to the device on this platform. The following example indicates the presence of a <span class="Code">lime_dac</span> device, but that on this platform the <span class="Code">tx_clk</span> signal is not connected:</p><p class="P199">&lt;device worker='lime_dac'&gt;<br/> &lt;signal name='tx_clk' platform=''/&gt;<br/>&lt;/device&gt;</p><h3 class="P241"><a id="a_5_4_2_Creating_the_Platform_Worker"><span>5.4.2</span></a><a id="__RefHeading__17666_2116501284"/>Creating the <span class="T199">P</span>latform <span class="T199">W</span>orker</h3><p class="P80"><span class="T154">While</span> a platform worker's XML (OWD) has extra elements to describe the platform's hardware (devices and slots), it is still an OWD, and thus it describes any implementation-specific properties and ports of the <span class="T154">platform </span>worker. Being a device worker, it can also define external signals that are connected externally to pins.</p><p class="P80">Thus to complete the OWD, any such ports and properties must be defined. The spec (OCS) for all platform workers defines certain ports and properties that all platform workers must support and implement, but platform workers can and typically do have other ports and properties that are platform-specific.</p><p class="P80">We first describe the required <span class="T154">properties and </span>ports required by the OCS for all platform workers, followed by a number of optional worker port types that are in fact unique to platform workers that no other type of worker can use.</p><h4 class="P256"><a id="a_5_4_2_1_Properties_Required_for_all_Platform_Workers_"><span>5.4.2.1</span></a>Properties <span class="T156">Required </span>for all <span class="T156">P</span>latform <span class="T156">W</span>orkers.</h4><p class="P100">The spec (OCS) for platform workers contains properties that should be supported by all platform workers. These are listed in <span class="Code">hdl/platforms/specs/platform_spec</span>.xml.</p><p class="P101">Supporting the properties falls into these categories:</p><ol><li><p class="List_20_Number" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">1.</span>Readable constants that may be specified as parameters in the OWD itself.<span class="odfLiEnd"/></p></li><li><p class="List_20_Number" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">2.</span>Readable constants whose values may be specified in the worker code.<span class="odfLiEnd"/></p></li><li><p class="List_20_Number" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">3.</span>Properties directly supported by in<span class="T155">stantiating</span> existing modules in the worker.<span class="odfLiEnd"/></p></li><li><p class="P234" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">4.</span>Properties directly supported by special ports required of the worker<span class="odfLiEnd"/></p></li><li><p class="List_20_Number" style="margin-left:1.016cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0.508cm;">5.</span>Properties that require specific code support in the platform worker.<span class="odfLiEnd"/></p></li></ol><p class="P184">Nearly all of them are supported by existing primitive modules that all platform workers must instantiate, and some are simply read-only values that the platform worker code (or OWD) can specify values for.</p><p class="P179">It is best to look at some of the existing platform workers to see how these properties are supported <span class="T193">(e.g. </span><span class="Code">zed</span><span class="T193">, </span><span class="Code">ml605</span><span class="T193"> or </span><span class="Code">alst4</span><span class="T193">).</span></p><p class="P185">Here is a table with the properties and their category listed.</p><p class="Table_20_Caption_20__28_before_29_">Table <a id="refTable2"/>2: Platform Worker Required Properties</p><table border="0" cellspacing="0" cellpadding="0" class="Table6"><colgroup><col width="132"/><col width="97"/><col width="83"/><col width="63"/><col width="347"/></colgroup><tr><td style="text-align:left;width:1.191in; " class="Table6_A1"><p class="P208">Name</p></td><td style="text-align:left;width:0.8729in; " class="Table6_A1"><p class="P208">Type</p></td><td style="text-align:left;width:0.7451in; " class="Table6_A1"><p class="P208">Access</p></td><td style="text-align:left;width:0.5639in; " class="Table6_A1"><p class="P208">Cate-gory</p></td><td style="text-align:left;width:3.1271in; " class="Table6_E1"><p class="P208">Description</p></td></tr><tr><td style="text-align:left;width:1.191in; " class="Table6_A2"><p class="P206">UUID</p></td><td style="text-align:left;width:0.8729in; " class="Table6_A2"><p class="P206">ULong*16</p></td><td style="text-align:left;width:0.7451in; " class="Table6_A2"><p class="P206">Readable</p></td><td style="text-align:left;width:0.5639in; " class="Table6_A2"><p class="P206">4</p></td><td style="text-align:left;width:3.1271in; " class="Table6_E2"><p class="P206">Unique ID of bitstream file</p></td></tr><tr><td style="text-align:left;width:1.191in; " class="Table6_A2"><p class="P206">timeNow</p></td><td style="text-align:left;width:0.8729in; " class="Table6_A2"><p class="P206">ULongLong</p></td><td style="text-align:left;width:0.7451in; " class="Table6_A2"><p class="P206">Readable</p></td><td style="text-align:left;width:0.5639in; " class="Table6_A2"><p class="P206">3</p></td><td style="text-align:left;width:3.1271in; " class="Table6_E2"><p class="P206">Current time-of-day (32.32 GPS time)</p></td></tr><tr><td style="text-align:left;width:1.191in; " class="Table6_A2"><p class="P206">romAddr</p></td><td style="text-align:left;width:0.8729in; " class="Table6_A2"><p class="P206">Ushort</p></td><td style="text-align:left;width:0.7451in; " class="Table6_A2"><p class="P206">Writable</p></td><td style="text-align:left;width:0.5639in; " class="Table6_A2"><p class="P206">3</p></td><td style="text-align:left;width:3.1271in; " class="Table6_E2"><p class="P206">Address for reading bitstream metadata</p></td></tr><tr><td style="text-align:left;width:1.191in; " class="Table6_A2"><p class="P206">romData</p></td><td style="text-align:left;width:0.8729in; " class="Table6_A2"><p class="P206">ULong</p></td><td style="text-align:left;width:0.7451in; " class="Table6_A2"><p class="P206">Readable</p></td><td style="text-align:left;width:0.5639in; " class="Table6_A2"><p class="P206">3</p></td><td style="text-align:left;width:3.1271in; " class="Table6_E2"><p class="P206">Data when reading bitstream metadata</p></td></tr><tr><td style="text-align:left;width:1.191in; " class="Table6_A2"><p class="P206">nMemories</p></td><td style="text-align:left;width:0.8729in; " class="Table6_A2"><p class="P206">Ulong</p></td><td style="text-align:left;width:0.7451in; " class="Table6_A2"><p class="P206">Readable</p></td><td style="text-align:left;width:0.5639in; " class="Table6_A2"><p class="P206">1 or 2</p></td><td style="text-align:left;width:3.1271in; " class="Table6_E2"><p class="P206">How many memories the platform has</p></td></tr><tr><td style="text-align:left;width:1.191in; " class="Table6_A2"><p class="P206">memories</p></td><td style="text-align:left;width:0.8729in; " class="Table6_A2"><p class="P206">Ulong*4</p></td><td style="text-align:left;width:0.7451in; " class="Table6_A2"><p class="P206">Readable</p></td><td style="text-align:left;width:0.5639in; " class="Table6_A2"><p class="P206">2</p></td><td style="text-align:left;width:3.1271in; " class="Table6_E2"><p class="P206">Information about individual memories</p></td></tr><tr><td style="text-align:left;width:1.191in; " class="Table6_A2"><p class="P206">nLEDs</p></td><td style="text-align:left;width:0.8729in; " class="Table6_A2"><p class="P206">Ulong</p></td><td style="text-align:left;width:0.7451in; " class="Table6_A2"><p class="P206">Readable</p></td><td style="text-align:left;width:0.5639in; " class="Table6_A2"><p class="P206">1 or 2</p></td><td style="text-align:left;width:3.1271in; " class="Table6_E2"><p class="P206">How many LED indicators are present</p></td></tr><tr><td style="text-align:left;width:1.191in; " class="Table6_A2"><p class="P206">LEDs</p></td><td style="text-align:left;width:0.8729in; " class="Table6_A2"><p class="P206">ULong</p></td><td style="text-align:left;width:0.7451in; " class="Table6_A2"><p class="P206">Readable+Writable</p></td><td style="text-align:left;width:0.5639in; " class="Table6_A2"><p class="P206">5</p></td><td style="text-align:left;width:3.1271in; " class="Table6_E2"><p class="P206">Actual LED settings, up to 32, LSB is LED 0</p></td></tr><tr><td style="text-align:left;width:1.191in; " class="Table6_A2"><p class="P206">time<span class="T155">Status</span></p></td><td style="text-align:left;width:0.8729in; " class="Table6_A2"><p class="P207">Ulong</p></td><td style="text-align:left;width:0.7451in; " class="Table6_A2"><p class="P207">volatile</p></td><td style="text-align:left;width:0.5639in; " class="Table6_A2"><p class="P207">3</p></td><td style="text-align:left;width:3.1271in; " class="Table6_E2"><p class="P207">Status of the the time service</p></td></tr><tr><td style="text-align:left;width:1.191in; " class="Table6_A2"><p class="P207">timeControl</p></td><td style="text-align:left;width:0.8729in; " class="Table6_A2"><p class="P207">Ulong</p></td><td style="text-align:left;width:0.7451in; " class="Table6_A2"><p class="P207">writable</p></td><td style="text-align:left;width:0.5639in; " class="Table6_A2"><p class="P207">3</p></td><td style="text-align:left;width:3.1271in; " class="Table6_E2"><p class="P207">Control register for the time serv.ce</p></td></tr><tr><td style="text-align:left;width:1.191in; " class="Table6_A2"><p class="P207">timeDelta</p></td><td style="text-align:left;width:0.8729in; " class="Table6_A2"><p class="P207">ULongLong</p></td><td style="text-align:left;width:0.7451in; " class="Table6_A2"><p class="P207">writable</p></td><td style="text-align:left;width:0.5639in; " class="Table6_A2"><p class="P207">3</p></td><td style="text-align:left;width:3.1271in; " class="Table6_E2"><p class="P207">Perform hardware subtraction via timeNow</p></td></tr><tr><td style="text-align:left;width:1.191in; " class="Table6_A2"><p class="P207">ticksPerSecond</p></td><td style="text-align:left;width:0.8729in; " class="Table6_A2"><p class="P207">Ulong</p></td><td style="text-align:left;width:0.7451in; " class="Table6_A2"><p class="P207">volatile</p></td><td style="text-align:left;width:0.5639in; " class="Table6_A2"><p class="P207">3</p></td><td style="text-align:left;width:3.1271in; " class="Table6_E2"><p class="P207">Timekeeping clock rate</p></td></tr></table><h4 class="Heading_20_4"><a id="a_5_4_2_2_Ports_of_Platform_Workers"><span>5.4.2.2</span></a>Ports of Platform Workers</h4><p class="P93">Platform workers have ports that are different than ports of application workers. They are not used for moving data to and from other workers. They allow the platform worker to provide required services to the rest of the HDL infrastructure. The platform worker has three port types:</p><ul><li><p class="P228" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Control plan<span class="T157">e</span> access ports, providing off-chip access to the on-chip control plane.<span class="odfLiEnd"/></p></li><li><p class="P228" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Metadata access ports to provide access to built-in bitstream metadata via properties<span class="odfLiEnd"/></p></li><li><p class="P229" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Timebase ports to provide the basis for timekeeping on the platform.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Interconnect ports to allow external interconnect hardware <span class="T194">interfaces</span> to support data flow (e.g. PCIe, AXI etc.).<span class="odfLiEnd"/></p></li></ul><p class="P180">To support the (single) control plane access port (called a <span class="Code">cpmaster</span> port), the platform worker must provide an addressable path from the controlling processors's software into the FPGA. This usually involves adapting a window on an addressable bus that the FPGA is connected to, to the protocol and signals of the <span class="Code">cpmaster</span> port. The adaptation is normally put into its own module and then instanced in the platform worker. <span class="T158">The platform worker must choose an appropriate clock and (asserted high) reset signal to serve as the platform't control clock/reset.</span></p><p class="P180">An example from the ZedBoard platform is where an addressable bus port in the Zynq chip, which connects the processor to the FPGA, is called the <span class="T158">M_AXI_GP0. The Zynq CPU is the master, and generates read and write accesses to the FPGA acting as a slave. In this case an adapter module was written (called </span><span class="Code">axi2cp</span><span class="T158">) to convert the protocol used by the M_AXI_GP0 port in the hardware, to the OpenCPI control plane protocol. This module is instanced in the Zed platform worker and connected to the CPU on one side, and the platform worker's </span><span class="Code">cpmaster</span><span class="T158"> port on the other. In the Zed platform worker this adapter and its connection is shown by this code:</span></p><p class="P196">-- Adapt the axi master from the PS to be a CP Master<br/>cp : axi2cp<br/> port map(<br/>  clk   =&gt; clk,<br/>  reset  =&gt; reset,<br/>  axi_in =&gt; ps_axi_gp_out,<br/>  axi_out =&gt; ps_axi_gp_in,<br/>  cp_in  =&gt; cp_in,<br/>  cp_out =&gt; cp_out<br/>  );</p><p class="P179"><span class="T157">The </span><span class="Code">metadata</span><span class="T157"> port is supported by connecting properties to elements of the port record, by inserting these lines into the platform worker:</span></p><p class="Code">props_out.UUID    &lt;= metadata_in.UUID;<br/>props_out.romData  &lt;= metadata_in.romData;<br/>metadata_out.clk   &lt;= clk;<br/>metadata_out.romAddr &lt;= props_in.romAddr;<br/>metadata_out.romEn  &lt;= props_in.romData_read;</p><p class="P82">The clk signal is the platform's control clock (see above).</p><p class="P84">The timebase port is to provide signals that are the basis for timekeeping on the platform. They are a clock, a PPS input signal and an optionally connected PPS output signal. The platform worker should use a clock that is best suited for timekeeping, which usually means the one with the least jitter and drift over the short term. On some platforms this is simply the same as the control clock, but on others there may be a clock with better performance for this purpose and the platform worker should use it.</p><p class="P81"><span class="T158">The fourth type of port on the platform worker is the one that enables off-chip data streaming (messaging) to and from other FPGA or software workers. It is called the </span><span class="Code">unoc</span><span class="T158"> port (for micro-network-on-chip). [Note this port is becoming obsolete and replaced by the scalable data plane, and thus will not be documented here]. On some platforms (e.g. PCIe-based), both the control plane and data plane use the same off-chip interconnect, and the platform worker simply provides separate access paths to that interconnect for control and data purposes. The control plane acts as bus slave, whereas the data plane may act as both master and slave.</span></p><h4 class="P257"><a id="a_5_4_2_3_Platform_Worker_Clocks"><span>5.4.2.3</span></a>Platform Worker Clocks</h4><p class="P73"><span class="T158">As seen above in the discussion of the control plane adaptation (the </span><span class="Code">cpmaster</span><span class="T158"> port), the platform worker sources the clock (and reset) used for the OpenCPI control plane on the platform. It also sources any clocks associated with the data plane where data/messages are flowing to other workers in other FPGAs or software platforms. In both these cases the clock and reset signals are part of the interface at these ports.</span></p><p class="P83">A platform worker usually also sources another clock for timekeeping on the platform <span class="T159">(in the </span><span class="Code">timebase</span><span class="T159"> port), u</span>nless there will never be any need for timekeeping on the platform </p><p class="P84">In general these clocks are ones that already exist on the platform and are simply assigned to these additional purposes. I.e. the control clock may be the clock already associated with the bus between the CPU and FPGA. In some cases the platform worker may synthesize/generate new clocks for these purposes.</p><h4 class="P258"><a id="a_5_4_2_4_Building_the_Platform_Worker_Using_its_Makefile_"><span>5.4.2.4</span></a>Building the Platform Worker <span class="T199">U</span>sing its Makefile.</h4><p class="P94">Like any other worker, a platform worker has a worker Makefile that is used for various purposes. Since the HdlTarget and HdlPlatform are implicit for a platform worker, there is no need to specify either (in the file or on the command line).</p><p class="P95">As with other HDL workers, the makefile may reference other local source files or primitive cores and libraries from elsewhere. The basic contents for a platform worker's Makefile is simply:</p><p class="Code">include $(OCPI_CDK_DIR)/include/hdl/hdl-platform.mk</p><p class="P85">In addition to building the platform worker, you can also build platform configurations here in the platform worker directory. In fact, when nothing else is specified, a base platform configuration (with no device workers) is built whenever the platform worker is built. To specify more platform configurations to build, specify them in the Configurations make variable in this Makefile, and for each one, write an XML file describing which devices (and any parameters for them) that should be included in the platform configuration.</p><p class="P86">Running make in a platform worker directory builds the platform worker, the base configuration, and any other platform configurations as specified in the Configurations make variable.</p><h3 class="Heading_20_3"><a id="a_5_4_3_Specifying_Platform_Configurations_in_XML_Files_"><span>5.4.3</span></a><a id="__RefHeading___Toc22148_1235158909"/>Specifying Platform Configurations in XML <span class="T199">F</span>iles.</h3><p class="P86">For each platform configuration mentioned in the Configurations variable in the platform worker makefile, there must be a corresponding <span class="T195">XML file</span>. This XML file has these <span class="T195">aspecs</span>:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>The top level element <span class="T195">is</span> <span class="Code">HdlConfig</span>.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>A device child element <span class="T195">is present </span>for each device <span class="T195">in the configuration</span>.<span class="odfLiEnd"/></p></li></ul><p class="P181">For devices <span class="T195">previously </span>defined<span class="T195"> </span>as being part of the platform (and thus mentioned in the platform worker's OWD), the device element simply has a <span class="Code">name=</span> attribute indicating which of the platform's devices should be included in the platform configuration.</p><p class="P181">Platform configurations can also specify devices that are on cards plugged into one of the platform's slots. Specifying the <span class="Code">card=</span> attribute indicates which card the device is on, and implies that the card is plugged into one of the platform's slots. If there are multiple slots of the type that the indicated card is defined for, then a <span class="Code">slot=</span> attribute must be used to unambiguously indicate which slot the card is plugged into.</p><p class="P181">Thus platform configurations can indicate a mix of devices: those that are part of the platform, and others that should be made available assuming a certain type of card is plugged into one of the platform's slots. <span class="T160">T</span>he following example, <span class="T160">(for the ZedBoard platform), indicates that a configuration should be built that assumes a lime-zipper-fmc card should be plugged into a slot on the platform, and thus device workers to support the lime_adc device on that card should be included. There is no </span><span class="Code">slot=</span><span class="T160"> attribute included or required since the platform has only one slot.</span></p><p class="P200">&lt;HdlConfig&gt;<br/> &lt;device name='lime_adc' card='lime-zipper-fmc'/&gt;<br/>&lt;/HdlConfig&gt;</p><p class="P190">Device elements in this file can also set values for parameter properties of the device worker for the device, but <span class="T9">only those that are not already specified in the board definition file</span> (either platform configuration XML file or card definition XML). I.e. the board definition file specifies fixed aspects of the device as it exists on that board, but any other parameter properties not mentioned for the board can be configured as required in the platform configuration (or in the container). E.g.:</p><p class="P201">&lt;HdlConfig&gt;<br/> &lt;device name='lime_adc' card='lime-zipper-fmc'&gt;<br/>  <span class="T223">&lt;property name='use_control_clock' value='true'/&gt;<br/> &lt;/device&gt;</span><br/>&lt;/HdlConfig&gt;</p><p class="P190">The same capability exists for the platform worker itself. Parameter property values for the platform worker can be specified by top level property elements in this file, e.g.:</p><p class="P205"><span class="T224">&lt;HdlConfig&gt;<br/> </span><span class="T225">&lt;property name='ocpi_debug' value='true'/&gt;</span><span class="T224"><br/> &lt;device name='lime_adc' card='lime-zipper-fmc'/</span><span class="T225">&gt;</span><span class="T224"><br/>&lt;/HdlConfig&gt;</span></p><h3 class="Heading_20_3"><a id="a_5_4_4_Testing_the_Basic_Platform_without_Devices"><span>5.4.4</span></a><a id="__RefHeading__17668_2116501284"/>Testing the <span class="T199">B</span>asic <span class="T199">P</span>latform <span class="T199">w</span>ithout <span class="T199">D</span>evices</h3><p class="P74"><span class="T195">Y</span>ou can build and run various tests <span class="T195">w</span>ithout supporting any of the devices on the platform. <span class="T61">This can be the first chance to test the full bitstream build flow.</span></p><p class="P87">In particular, to test the control plane support, you can test the platform with no interconnect/dataplane support by using applications like tb_bias which do not require interconnect support for the data plane.</p><p class="P87">Data plane support can then be tested one direction at a time, using simple applications like patternbias or biascapture that only flow data in one direction between the FPGA platform and the processor.</p><h2 class="P253"><a id="a_5_5_Device_Support_for_FPGA_Platforms"><span>5.5</span></a><a id="__RefHeading__1039_1060509377"/>Device Support for <span class="T44">FPGA</span> <span class="T199">P</span>latforms</h2><p class="P88"><span class="T161">Device support development involves the creation of specialized workers that enable OpenCPI to use the devices attached to an HDL platform. </span><span class="T15">Device workers</span><span class="T161"> are</span> like "device drivers" for specific FPGA-attached hardware devices  workers that <span class="T161">interface with</span> devices using device-specific signals and I/O pins.</p><p class="P35">Device workers are like normal application workers with one important difference: they have signal connections with hardware attached to pins of the FPGA. The control interface and data interfaces to <span class="T161">device</span> workers are the same <span class="T97">as an application worker</span>. <span class="T162">For example,</span> a device worker <span class="T162">for an output device (like a DAC or a printer) </span>would have some signals attached to FPGA pins that are connected to the <span class="T97">output</span> device, and would also have a normal <span class="T162">worker input</span> data port that would be connected to some application worker <span class="T97">producing</span> the data.</p><p class="P89">[Diagram showin<span class="T182">g</span> app worker  device worker  device.]</p><p class="P35">When the device is attached to the FPGA via dedicated pins, the device is considered part of the platform. When the device is on an optional card plugged into a slot (which has pins connected to the FPGA), the device is considered part of the card, not the platform. In both case<span class="T162">s</span> the same device worker is used to access <span class="T97">and control </span>the device.</p><p class="P35">A simple <span class="T97">DA</span>C device worker <span class="T196">might</span> have an <span class="T97">X</span>ML descriptor <span class="T162">(OWD) </span>like this:</p><p class="Code">&lt;HdlDevice Language='vhdl' spec='<span class="T97">dac</span>-spec'&gt;<br/> &lt;port name='<span class="T98">in</span>' datawidth='<span class="T97">8'</span>/&gt;<br/> <span class="T97">&lt;signal output='valid'/&gt;<br/> &lt;signal output='data' width='8'/&gt;<br/> &lt;signal input='ready'/&gt;</span><br/>&lt;/HdlDevice&gt;</p><p class="P37">The <span class="Code">HdlDevice</span> element is similar to the <span class="Code">HdlWorker</span> element except that i<span class="T196">t</span> allows some extra features like the <span class="Code">signal</span> child elements.</p><p class="P36"><span class="T97">The </span><span class="Code">spec='dac-spec'</span><span class="T97"> attribute indicates that this device worker implements the spec common to all DAC devices (properties and ports). It can add its own properties as required.</span></p><p class="P36"><span class="T97">The </span><span class="Code">port</span><span class="T97"> element simply sets the physical data width of the input port to 8.</span></p><p class="P36"><span class="T97">The </span><span class="Code">signal</span><span class="T97"> elements specify the names of device signals (HDL language ports) connected to the FPGA pins that are connected to a device supported by this device worker.</span></p><p class="P37">All the details of an HdlDevice XML are mentioned below. An example of the device worker source code for this (simplistic, single clock domain) device worker would be:</p><p class="Code">in_out.take &lt;= in_in.ready and (ready or not in_in.valid);<br/>valid    &lt;= in_in.ready and in_in.valid;<br/>data    &lt;= in_in.data;</p><h3 class="P242"><a id="a_5_5_1_Device_Component_Specs_and_Device_Worker_Modularity"><span>5.5.1</span></a><a id="__RefHeading___Toc4826_234407367"/>Device Component Specs and Device Worker Modularity</h3><p class="P36"><span class="T97">In order to ensure that similar devices have common application-visible behavior, OpenCPI has </span><span class="T13">device </span><span class="T16">class</span><span class="T13"> specs</span><span class="T97"> (DCS) that represent commonly used classes of devices. This is a specialization of the component specifications (OCS ) that are the basis of multiple implementations (application workers) of the same functionality. In this device case, the multiple implementations are for different devices of the same class. Device workers for devices in the same class implement the same DCS; a device class is represented by its DCS. There is no difference in syntax between an OCS and a DCS.</span></p><p class="P39">As the integration of functionality on single chips increases, it is common for a chip to implement multiple functions of different classes <span class="T163">of device (e.g. an ADC and a DAC)</span>. <span class="T163">Generally</span>, this should <span class="T9">not</span> result in a single device worker for the multi-function <span class="T163">chip. Creating such a single device worker would result in </span>the <span class="T163">functions</span> not <span class="T163">being </span>represented to the system or to users the same as <span class="T163">a similar function from a </span>non-integrated single-purpose <span class="T163">chip</span>. <span class="T163">Thus, a device worker should be developed for each class that is present on the multifunction chip.</span></p><p class="P40">This avoids exposing the multi-function integration of a single chip <span class="T164">to applications </span>and <span class="T197">thus enhances</span> the re-use of applications. Furthermore, when only one function is needed, a multi-function device worker <span class="T197">would</span> use FPGA resources for functions that <span class="T164">are</span> not being used. <span class="T165">It possible to develop swiss-army-knife device workers for multifunction chips that intend to avoid using resources for parts that are unused. However, the recommended practice of OpenCPI is to be more modular, namely:</span></p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T165">Chips</span> that contain multiple functions should generally be treated as multiple devices using multiple device workers <span class="T165">of the appropriate classes</span>.<span class="odfLiEnd"/></p></li></ul><p class="P40">When a multi-function device has pins or hardware that must be shared among the functional device worker<span class="T99">s</span> (e.g. <span class="T165">a </span>common reset or SPI or clocks), a subdevice module can be used <span class="T165">for such shared logic</span>. This is discussed in a later section.</p><p class="P38"><span class="T166">T</span>he first step in developing support for a new device is to identify the device <span class="T166">class</span> specs that are relevant, and determine the list of device workers that must be created. <span class="T166">Each device class spec defines common properties, data ports, and implied functionality that all device workers of the class should try to implement.</span></p><p class="P41">Some examples of classes of devices currently defined are:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>ADC and DACs which convert between isochronous <span class="T197">data and</span> flow-controlled data and may have scheduling and timestamping functionality.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Upconverters and downconverters between IF/Baseband and RF.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Clock generators<span class="odfLiEnd"/></p></li><li><p class="P230" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>DRAM<span class="odfLiEnd"/></p></li></ul><h3 class="P243"><a id="a_5_5_2_Device_Proxies__Software_Workers_that_Control_HDL_Device_Workers"><span>5.5.2</span></a><a id="__RefHeading___Toc4828_234407367"/>Device Proxies  <span class="T167">Software Workers that Control HDL Device Workers</span></h3><p class="P42">A device proxy is a software <span class="T167">worker</span> <span class="T100">(RCC/C++) </span>that is specifically paired with a device worker in order to translate a higher level control interface for a class <span class="T100">of devices </span>into the lower level actions required on the <span class="T167">actual </span>device. <span class="T167">While i</span>t is possible that the <span class="T167">HDL </span>device worker itself could support the required<span class="T167"> generic interface, for many device classes, it is more productive to split the supporting code for the device into a (software) proxy and a HDL device worker. When a device worker has a proxy, it is termed the slave of that proxy. Using a proxy is not always required.</span></p><p class="P96">The requirements for a class of devices may in fact be split into a low level part that HDL device workers typically implement, and a high level part that would usually be implemented in a proxy. An example might be where an ADC device worker had a low-latency gain adjustment input port that could probably not be implemented in software, as well as a high level sample rate setting that would be better implemented in a proxy.</p><p class="P43">Device proxies are simple C++ <span class="T168">(</span><span class="T20">not C</span><span class="T168">)</span> RCC workers where the XML (OWD) specifies a slave attribute, indicating which worker is the slave for that proxy. That attribute <span class="T198">enables</span> convenient access to all the <span class="T168">slave</span> worker's properties from the proxy<span class="T198">'s</span> code.</p><p class="P43">Thus there are two patterns for <span class="T101">implementing HDL device support in OpenCPI</span>:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T9">Device-worker-only</span>, where the device worker implements both the device component spec as well as any required higher level properties.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T9">Device-worker-and-proxy,</span> where the device worker implements only the device component spec, and the device proxy implements the higher level properties for the class.<span class="odfLiEnd"/></p></li></ul><p class="P44">A common example of higher level properties for a device class is the center/tuning frequency of an RF/IF up/down converter. The high level property is a convenient floating point number, which typically requires setting a variety of device registers to accomplish. The proxy code would make the necessary translations and computations before setting the correct register values <span class="T198">in the HDL device worker</span>.</p><h3 class="P244"><a id="a_5_5_3_A_Device_Worker_Implements_the_Data_Sheet"><span>5.5.3</span></a><a id="__RefHeading___Toc4830_234407367"/>A Device Worker Implements the Data Sheet</h3><p class="P44"><span class="T170">It is recommended</span> to <span class="T171">use</span> the <span class="T171">data sheet's </span>signal names and register names in the device worker code <span class="T170">(</span>and <span class="T102">its OWD)</span> <span class="T171">so they </span>are easily correlated to the names in the data sheet. This allows for easier code maintenance and system level debugging. <span class="T171">E.g., a system engineer may find it especially valuable to probe and examine device-level settings when referring to the data sheet, even though they might not be HDL coders. When the naming conventions in the data sheet are at odds with better naming conventions, it may still be preferable to use them for these reasons.</span></p><p class="IndentHang"><span class="T171">    </span><span class="T17">Implementing all the functionality in a device may not be desirable when it is initially written for a given platform, since that platform may not use all the device's capabilities. W</span><span class="T9">hen a device worker</span><span class="T17"> </span><span class="T9">is insufficient </span><span class="T17">in this way for a new platform or project</span><span class="T9">, it should be enhanced in such a way that any existing uses of it will still work (backward compatibility) so that the community in fact gets the benefit of a newer more complete device worker implementation.</span></p><p class="P46">As mentioned above, multi-function <span class="T169">chips</span> should generally be supported by multiple device workers. But <span class="T9">within</span> any device worker <span class="T169">for a function</span>, if there are features or modes that carry significant overhead, they should be controlled by parameter properties <span class="T169">(thus generics in VHDL) </span>so that the resources are not wasted when the feature/mode is not being used. <span class="T171">This will promote re-use of the device worker.</span></p><p class="P45">When devices have internal registers, the most common approach is to define each internal register as a property in the OWD (not in the OCS), and use the raw property feature of <span class="T169">HDL </span>workers to access those registers.</p><h3 class="P245"><a id="a_5_5_4_Subdevice_Workers"><span>5.5.4</span></a><a id="__RefHeading___Toc4832_234407367"/>Subdevice Workers</h3><p class="P90">[Diagrams here, based on existing PPTs etc.]</p><p class="P47">Writing <span class="T172">a </span>device worker to be reusable across many embedded systems is made more difficult by two facts:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Multifunction devices have aspects that are shared between functions <span class="T172">(e.g. common reset)</span><span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Controlling different devices sometimes involves sharing control/configuration buses (e.g. SPI and I2C) or other hardware.<span class="odfLiEnd"/></p></li></ul><p class="P47">In order to preserve the modularity of distinct classes of devices, <span class="T103">as well as</span> the reusability of device workers, <span class="T103">OpenCPI supports a further specialization of device workers called subdevice workers.</span></p><p class="P49">A subdevice worker implements the required sharing of low level hardware between device workers. It is defined to <span class="T30">support</span> some number of device workers, and is thus instantiated whenever any of its <span class="T9">supported</span> device workers <span class="T172">are</span> instantiated in a platform configuration or container. Subdevice workers may simply support the different device workers used on a single multi-function device, or they may support a variety of different device workers that are found on a platform. Thus they may be very <span class="T9">platform-specific</span> or <span class="T9">card-specific</span>.</p><p class="P51">New subdevice workers may be required when a device with an existing device worker is used on a new platform or card, since the sharing of hardware (e.g. an I2C bus) may be different. That may result in the existing device worker being refactored to share functions that it did not share before.</p><p class="P48">Subdevice workers <span class="T173">typically </span>have no control <span class="T173">interface</span>. Like device workers they have signals that are attached to FPGA pins. <span class="T104">These pins are usually what is shared between the device worker that the subdevice supporting it. It is possible that subdevices have no external signals and only exist to coordinate between several optionally present device workers.</span></p><p class="P50">Subdevice workers also have connections to the device workers they support. The XML <span class="T173">(a minimal OWD) </span>for a subdevice defines:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>The hardware FPGA pins i<span class="T173">t is</span> attached to <span class="T105">(via the signals element like all device workers)</span><span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>The device workers it supports<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>How it is connected to each of the device workers it supports.<span class="odfLiEnd"/></p></li></ul><p class="P91">The example below defines a subdevice with no control interface (no properties or control operations), driving two signals that are an I2C interface, and supporting a si5351 clock generator device worker via a rawprop worker port (defined <span class="T174">below</span>). It is declaring that if that device is present, it should also be present and be connected to that device worker via the rawprop port. By including this subdevice in a platform (in the platform OWD), it will be associated on this platform with the si5351 device worker.</p><p class="P197">&lt;HdlDevice language="vhdl"&gt;<br/> &lt;componentspec nocontrol='true'&gt;<br/> &lt;rawprop name='rprops'/&gt;<br/> &lt;supports worker='si5351'&gt;<br/>  &lt;connect port="rawprops" to="r<span class="T175">aw</span>props"/&gt;<br/> &lt;/supports&gt;<br/> &lt;Signal Inout='sda'/&gt;<br/> &lt;Signal Inout='scl'/&gt;<br/>&lt;/HdlDevice&gt;</p><p class="P52">The most common connection between a device worker and a subdevice that supports it, is the rawprop connection that enables a device worker to delegate some or all of its raw property accesses to the subdevice. The device worker declares a rawprop master port for this delegation, and the subdevice declares an array of one or more a rawprop slave ports to support device workers this way. <span class="T106">This type of connection is common when there is a shared control path like SPI or I2C to access the registers of several devices' properties.</span></p><p class="P92">A rawprop worker port consists of a VHDL record of signals that allow a device worker to easily delegate all of its raw property accesses to the subdevice, using this VHDL:</p><p class="P198">rawprops_out.present   &lt;= '1';<br/>rawprops_out.reset    &lt;= ctl_in.reset;<br/>rawprops_out.raw     &lt;= props_in.raw;<br/>props_out.raw      &lt;= rawprops_in.raw;</p><p class="P92">The present signal tells the subdevice that there is a connection to a worker. The reset signal tells the subdevice that this worker is being reset, and the raw subrecord is conveying the raw property signals into the device worker down to the subdevice. Similarly, the raw output signals from the subdevice are conveyed back as the device worker's raw property output signals. The raw property signals are defined in the component developer's guide.[ref]</p><p class="P53">When the rawprop connection is not sufficient for all of the shared functionality in the subdevice, another type of connection is used, which is <span class="T175">a customized</span> <span class="T175">set</span> of signals. This is called a devsignals connection.</p><p class="P54">Since platforms and cards declare which devices the <span class="T176">have</span>, including subdevices, they can specify which subdevices are present. This allows different subdevices to be used for different platforms while leaving the device workers untouched and reused.</p><h3 class="Heading_20_3"><a id="a_5_5_5_Higher-level_Endpoint_Proxies_Suitable_for_Applications"><span>5.5.5</span></a><a id="__RefHeading___Toc4834_234407367"/>Higher-level <span class="T108">Endpoint Proxies</span> <span class="T199">Suitable for Applications</span></h3><p class="P55">As discussed above, we use <span class="T21">device proxies </span>to normalize the behavior of a class of devices. The granularity of such classes is sometimes below the level appropriate for applications, <span class="T108">but is optimal for sharing, reuse, and rapid enablement of new platforms.</span></p><p class="P56">An example <span class="T108">of fine granularity </span>is a clock generator chip. There are many such chips, and device workers <span class="T177">are</span> written for them. <span class="T177">T</span>hey should all act the same, in terms of how they are set up and programmed, <span class="T177">usually using a device proxy</span>. When users or applications want access to a clock generator device, they should be able to use it the same way as any other clock generator device.</p><p class="P56">However, clock generator chips are also frequently used to drive other devices to a specific clock (e.g. sampling) frequency, and there may be some specific relationship on a given platform or card between specific clock generator chips and the devices they provide clocking too.</p><p class="P56">So, in addition to device proxies that are defined for the granularity of individual devices, that have device workers, OpenCPI <span class="T107">also defines specifications for some higher level proxies called </span><span class="T23">Endpoint Proxies,</span><span class="T107"> for presenting a collection of devices to applications as something to connect and configure within the application. The purpose of higher level Endpoint Proxies is to remove all device specifics from applications, rather than simply normalize the behavior of a device to its class. Applications and users want to see standard, portable interfaces for endpoints (e.g. sources and sinks of radio data). Endpoint proxies make that possible.</span></p><p class="P57">Endpoint proxies are simply proxies that typically have multiple slaves, which themselves are probably device proxies, or in some cases device workers.</p><p class="P58">As with subdevices at the bottom of the OpenCPI device support stack, endpoint proxies are at the top of the device support stack, appropriate for use by applications. But both may <span class="T177">internally </span>be somewhat platform specific. Both exist to leave the device workers alone so that they are reusable across platforms <span class="T110">and cards.</span></p><p class="P97">[Insert diagram for stack]</p><p class="P57">Applications use endpoint proxies by instantiating a component of an endpoint proxy spec. A good example of a class of endpoint proxies is a radio front end (as defined by the RedHawk system <span class="T109">or GNU Radio</span>), or a transceiver subsystem as defined in the Wireless Innovation Forum, or the RF Chain as defined in the JTRS MHAL specification. <span class="T109">Since OpenCPI is not software radio system as such, an endpoint proxy can represent any application-level source or sink of data.</span></p><h3 class="P246"><a id="a_5_5_6_XML_Metadata_for_Device_Workers_Subdevices_DeviceProxies_EndpointProxies"><span>5.5.6</span></a><a id="__RefHeading__17670_2116501284"/>XML Metadata for Device Workers/Subdevices/DeviceProxies/EndpointProxies</h3><p class="P59">The four types of workers that relate to device support in OpenCPI <span class="T178">are</span>:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Device Workers<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Device Proxies<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Subdevices<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span>Endpoint Proxies<span class="odfLiEnd"/></p></li></ul><p class="P59">All these are workers <span class="T113">and </span>share the XML structure of workers via the OWD for ports and properties.</p><p class="P59">Device workers use the normal <span class="T111">top-level </span><span class="Code">spec=</span> attribute to identify the class of the device. Device workers and subdevice workers use the HdlDevice top level XML tag, have signal elements for hardware signals, and may have rawprop and devsignal ports to connect devices <span class="T178">to</span> subdevices. <span class="T178">If a device worker uses a subdevice, it may in fact have no signal elements.</span></p><p class="P59">Subdevice workers have supports child elements describing which device workers they support and how they are connected to them.</p><p class="P60">Device proxies have a top-level slave attribute identifying which worker they are a proxy for. The name should include the authoring model suffix, such as:</p><p class="P98"><span class="T178">slave='</span>adc-chip123.hdl<span class="T178">'</span></p><p class="P59">Endpoint proxies have multiple slave child elements indicating which other workers they are using to implement their higher level function for applications.</p><h4 class="Heading_20_4"><a id="a_5_5_6_1_Signal_XML_Elements_for_Device_Workers_and_Subdevice_Workers"><span>5.5.6.1</span></a>Signal XML <span class="T199">E</span>lements for <span class="T199">D</span>evice <span class="T199">W</span>orkers and <span class="T199">S</span>ubdevice <span class="T199">W</span>orkers</h4><p class="P61">Signal elements are children of the top level HdlDevice element, and contain the following attributes. They identify the signals that are attached to the pins of the FPGA.</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T21">Input='name':</span> identifies a signal as an input and provides its name.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T21">Output='name':</span> identifies a signal as an output from and provides its name.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T21">Inout='name': </span>identifies a signal as a tristate signal and provides its name.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T21">Bidirectional:='name':</span> identifies a signal as usable in either direction and provides its name<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T21">Width='nn': </span>specifies that the signal is an array of signals with the width specified.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T21">Differential='true</span><span class="T24">|</span><span class="T21">false':</span> specifies that the signal is differential<span class="odfLiEnd"/></p></li></ul><p class="P62">All signal names are restricted to legal identifies in VHDL and Verilog. <span class="T178">Inout signals are only really tristate at the top level of the design (in the container). Inside device workers a signal identified as inout, represents three signals, with the suffixes </span><span class="Code">_i</span><span class="T178"> for input, </span><span class="Code">_o</span><span class="T178"> for output, and </span><span class="Code">_oe</span><span class="T178"> for the output enable. Containers ensure that tristate signals result in a signal tristate IO pin. Similarly, differential signals represent two signals, one with a </span><span class="Code">_p</span><span class="T178"> suffix, and one with a </span><span class="Code">_n</span><span class="T178"> suffix.</span></p><h4 class="Heading_20_4"><a id="a_5_5_6_2_RawProp_XML_Elements_for_Device_Workers_and_Subdevice_Workers"><span>5.5.6.2</span></a>RawProp XML <span class="T199">E</span>lements for <span class="T199">D</span>evice <span class="T199">W</span>orkers and <span class="T199">S</span>ubdevice <span class="T199">W</span>orkers</h4><p class="P62">The rawprop child element identifies a port of the worker that extends the raw property signals from a device worker to a subdevice worker. Its attributes are:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T21">Name='name':</span> the name of the port (defaults to raw<span class="T179">p</span>rops)<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T21">Optional='true</span><span class="T26">|f</span><span class="T21">alse':</span> indicates whether a connection to this port is required.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T21">Count='nn':</span> indicates this is an array of raw property ports.<span class="odfLiEnd"/></p></li><li><p class="P231" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T4">Master='true|false':</span> indicates who generates addresses for raw accesses<span class="odfLiEnd"/></p></li></ul><p class="P62">Raw property <span class="T182">signals are listed in the following two tables.</span></p><p class="Table_20_Caption_20__28_before_29_">Table <a id="refTable3"/>3: Master-to-Slave Raw Property Signals</p><table border="0" cellspacing="0" cellpadding="0" class="Table4"><colgroup><col width="104"/><col width="146"/><col width="471"/></colgroup><tr><td style="text-align:left;width:0.9361in; " class="Table4_A1"><p class="P63">Name</p></td><td style="text-align:left;width:1.3188in; " class="Table4_A1"><p class="P63">Type</p></td><td style="text-align:left;width:4.2451in; " class="Table4_C1"><p class="P63">Purpose</p></td></tr><tr><td style="text-align:left;width:0.9361in; " class="Table4_A2"><p class="P64">present</p></td><td style="text-align:left;width:1.3188in; " class="Table4_A2"><p class="P64">bool_t</p></td><td style="text-align:left;width:4.2451in; " class="Table4_C2"><p class="P64">Indicate to slave whether port is connected</p></td></tr><tr><td style="text-align:left;width:0.9361in; " class="Table4_A2"><p class="P64">reset</p></td><td style="text-align:left;width:1.3188in; " class="Table4_A2"><p class="P64">bool_t</p></td><td style="text-align:left;width:4.2451in; " class="Table4_C2"><p class="P64">Indicate to slave whether master is being reset</p></td></tr><tr><td style="text-align:left;width:0.9361in; " class="Table4_A2"><p class="P64">renable</p></td><td style="text-align:left;width:1.3188in; " class="Table4_A2"><p class="P64">bool_t</p></td><td style="text-align:left;width:4.2451in; " class="Table4_C2"><p class="P64">Indicate to slave that a raw read is in progress</p></td></tr><tr><td style="text-align:left;width:0.9361in; " class="Table4_A2"><p class="P64">wenable</p></td><td style="text-align:left;width:1.3188in; " class="Table4_A2"><p class="P64">bool_t</p></td><td style="text-align:left;width:4.2451in; " class="Table4_C2"><p class="P64">Indicate to slave that a raw write is in progress.</p></td></tr><tr><td style="text-align:left;width:0.9361in; " class="Table4_A2"><p class="P64">addr</p></td><td style="text-align:left;width:1.3188in; " class="Table4_A2"><p class="P64">ushort_t</p></td><td style="text-align:left;width:4.2451in; " class="Table4_C2"><p class="P64">Indicate to slave the address of the current read/write access.</p></td></tr><tr><td style="text-align:left;width:0.9361in; " class="Table4_A2"><p class="P64">benable</p></td><td style="text-align:left;width:1.3188in; " class="Table4_A2"><p class="P64">Slv(3 downto 0)</p></td><td style="text-align:left;width:4.2451in; " class="Table4_C2"><p class="P64">Indicates to slave which bytes are being read/written</p></td></tr><tr><td style="text-align:left;width:0.9361in; " class="Table4_A2"><p class="P64">data</p></td><td style="text-align:left;width:1.3188in; " class="Table4_A2"><p class="P64">word32_t</p></td><td style="text-align:left;width:4.2451in; " class="Table4_C2"><p class="P64">Write data 4 bytes wide.</p></td></tr></table><p class="Table_20_Caption_20__28_before_29_">Table <a id="refTable4"/>4: <span class="T182">Slave</span>-to-<span class="T182">Master</span> Raw Property Signals</p><table border="0" cellspacing="0" cellpadding="0" class="Table5"><colgroup><col width="104"/><col width="146"/><col width="471"/></colgroup><tr><td style="text-align:left;width:0.9361in; " class="Table5_A1"><p class="P63">Name</p></td><td style="text-align:left;width:1.3188in; " class="Table5_A1"><p class="P63">Type</p></td><td style="text-align:left;width:4.2451in; " class="Table5_C1"><p class="P63">Purpose</p></td></tr><tr><td style="text-align:left;width:0.9361in; " class="Table5_A2"><p class="P64">done</p></td><td style="text-align:left;width:1.3188in; " class="Table5_A2"><p class="P64">bool_t</p></td><td style="text-align:left;width:4.2451in; " class="Table5_C2"><p class="P64">Indicate to master that the access is done</p></td></tr><tr><td style="text-align:left;width:0.9361in; " class="Table5_A2"><p class="P64">data</p></td><td style="text-align:left;width:1.3188in; " class="Table5_A2"><p class="P64">word32_t</p></td><td style="text-align:left;width:4.2451in; " class="Table5_C2"><p class="P66">Read data 4 bytes wide.</p></td></tr><tr><td style="text-align:left;width:0.9361in; " class="Table5_A2"><p class="P65">present</p></td><td style="text-align:left;width:1.3188in; " class="Table5_A2"><p class="P64">bool_<span class="T112">array_</span>t</p></td><td style="text-align:left;width:4.2451in; " class="Table5_C2"><p class="P64">Indicate to <span class="T112">master which other masters (device workers) are present. Range is 0 to raw_max_devices-1</span></p></td></tr></table><h4 class="Heading_20_4"><a id="a_5_5_6_3_DevSignal_XML_Elements_for_Device_Workers_and_Subdevice_Workers"><span>5.5.6.3</span></a>DevSignal XML <span class="T199">E</span>lements for <span class="T199">D</span>evice <span class="T199">W</span>orkers and <span class="T199">S</span>ubdevice <span class="T199">W</span>orkers</h4><p class="P67">This XML element represents a custom signal bundle that is connected between device workers and subdevices. It has two attributes:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T21">Name='name':</span> the name of the port (the default is dev).<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T21">Optional='true|false':</span> whether this port must be connected or not.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T21">Count='nn':</span> indicates an array of similar ports with the same signals.<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T21">Signals='sig-file':</span> indicates a file containing a top level Signals element consisting of signal child elements.<span class="odfLiEnd"/></p></li></ul><p class="P67">The file indicated by the Signals attribute enumerates the signals in the bundle, <span class="T180">similar to the signal elements in a device worker's OWD.</span></p><h4 class="Heading_20_4"><a id="a_5_5_6_4_Slave_XML_Element_for_Endpoint_Proxies_"><span>5.5.6.4</span></a>Slave XML <span class="T199">E</span>lement for <span class="T116">E</span>ndpoint <span class="T116">Pr</span>oxies.</h4><p class="P68">When an EndpointProxy requires more than one slave to implement its application-relevant endpoint type, it uses the slave child elements to describe them <span class="T113">(rather than simply using the slave attribute at the top level)</span>. The attributes of the slave child elements are:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T27">n</span><span class="T21">ame='device-worker-name':</span> The name, including authoring model suffix, of the required slave device worker, <span class="T180">e.g. </span><span class="Code">lime_adc.hdl</span><span class="T180"></span>.<span class="odfLiEnd"/></p></li></ul><h4 class="P259"><a id="a_5_5_6_5_The_Supports_XML_Element_for_Subdevices_"><span>5.5.6.5</span></a>The Supports XML <span class="T199">E</span>lement for <span class="T116">S</span>ubdevices.</h4><p class="P69">Subdevices indicate which device workers they support by using supports XML elements, and to indicate how they are connected to a device worker they support, they specify connect child elements within the supports elements, e.g.:</p><p class="Code"> &lt;supports worker='lime_dac'&gt;<br/>  &lt;connect port="rawprops" to="rprops" index='1'/&gt;<br/>  &lt;connect port="dev" to='dev' index='1'/&gt;<br/> &lt;/supports&gt;<br/> &lt;supports worker='lime_adc'&gt;<br/>  &lt;connect port="rawprops" to="rprops" index='0'/&gt;<br/>  &lt;connect port="dev" to='dev' index='0'/&gt;<br/> &lt;/supports&gt;</p><p class="P70">The <span class="T114">attributes of</span> the supports element <span class="T114">are:</span></p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T21">worker</span><span class="T25">='worker-name'</span><span class="T21">: </span>which names the device worker it supports<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T21">index='which instance': </span> which identifies which device of that type is being supported <span class="T114">by the subdevice</span>.<span class="odfLiEnd"/></p></li></ul><p class="P69">The attributes of the connect child element of the supports element are:</p><ul><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T21">port='subdevport': </span>the port on the subdevice that should be connected<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T21">to='devworkerport':</span> the port on the supported device worker that should be connected<span class="odfLiEnd"/></p></li><li><p class="List_20_Bullet" style="margin-left:1.016cm;"><span style="display:block;float:left;min-width:0.635cm;"></span><span class="T21">index='index':</span> index into the subdevice's port array (when its count attribute is &gt; 1).<span class="odfLiEnd"/></p></li></ul><p class="P71">It is possible that different instances of the same device on a platform or card are supported by entirely different subdevices.</p><h3 class="P247"><a id="a_5_5_7_Associating_Device_Workers_and_Subdevice_Workers_with_Platforms_and_Cards_"><span>5.5.7</span></a><a id="__RefHeading___Toc4836_234407367"/>Associating Device Workers and Subdevice <span class="T116">W</span>orkers with Platform<span class="T116">s </span>and Cards.</h3><p class="P71">Both device workers and subdevice workers are enumerated in the XML description of a platform or card using the device child element and the worker attribute. This declares the existence of the device on the platform or card <span class="T180">as well as</span> the device worker that is used. <span class="T115">The order of these elements defines the ordinals of the devices when multiple instances of the same device are present.</span></p><p class="P71">The presence of subdevice workers in this declared list makes them available to support any devices that are used in a platform configuration or container. When a device is used (instantiated based on the platform configuration XML or the container XML), any subdevices that exist on the platform that support the device will <span class="T115">also </span>be <span class="T115">instanced and connected</span>.</p><h1 class="P261"><a id="a_6_Enabling_GPU_Platforms"><span>6</span></a><a id="__RefHeading__1041_1060509377"/>Enabling <span class="T44">GPU</span> Platforms</h1><p class="P146"></p><h2 class="P252"><a id="a_6_1_Enabling_Development_for_GPU_Platforms"><span>6.1</span></a><a id="__RefHeading__1043_1060509377"/>Enabling Development for <span class="T77">GPU</span> <span class="T199">P</span>latforms</h2><p class="P150">Installation script/procedure for tool kit/driver package.</p><p class="P149">Describe ocpiocl.</p><p class="P149">Do we ever need to do anything else for real compilation?</p><p class="P150">Installation of libraries, defining where they are.</p><p class="P150">Test build of existing opencl components.</p><p class="P150"></p><h2 class="P253"><a id="a_6_2_Enabling_Execution_for_GPU_Platforms"><span>6.2</span></a><a id="__RefHeading__1045_1060509377"/>Enabling Execution for <span class="T44">GPU</span> <span class="T199">P</span>latforms</h2><p class="P22">OpenCL should in general do the right thing.</p><p class="P22">Testing the existing OCL components and test applications.</p><p class="P22"></p><h2 class="P253"><a id="a_6_3_I_O_Device_Support_for_GPU_Platforms"><span>6.3</span></a><a id="__RefHeading__1047_1060509377"/>I/O Device Support for <span class="T44">GPU</span> <span class="T199">P</span>latforms</h2><p class="P13">Perhaps actually video output, openGL integration?</p><p class="P140">None at this time.</p><h1 class="P262"><a id="a_7_Glossary"><span>7</span></a><a id="__RefHeading__1049_1060509377"/>Glossary</h1><p class="P142"><span class="T3">Application</span>  In this context of Component-Based Development (CBD), an application is a composition or assembly of components that as a whole perform some useful function. The term application can also be an adjective to distinguish functions or code from infrastructure to support the execution of component-based application. I.e. software/gateware is either application or infrastructure.</p><p class="P134"><span class="T3">Configuration Properties</span>  Named scalar values of a worker that may be read or written by control software. Their values indicate or control aspects of the workers operation. Reading and writing these property values may or may not have side effects on the operation of the worker. Configuration properties with side effects can be used for custom worker control. Each worker may have its own, possibly unique, set of configuration properties. They may include hardware resource such registers, memory, and state.</p><p class="P142"><span class="T3">Control Operations </span> A fixed set of control operations that every worker has. <span class="T6">The control aspect is a common control model that allows all workers to be managed without having to customize the management infrastructure software for each worker, while the aforementioned configuration properties are used to specialize components.</span></p><p class="P142"><span class="T3">Infrastructure</span>  Software/gateware is either application of or infrastructure.</p><p class="P142"><span class="T3">Worker</span>  <span class="T6">A concrete implementation (and possibly runtime instance) of a component, written according to an authoring model</span>.</p><p class="P143"><span class="T3">Authoring Model</span>  <span class="T6">A set of metadata and language rules and interfaces for writing a worker.</span></p><p class="P151">Tool-chain</p><p class="P151">container</p><p class="P151">artifact</p><p class="P151">build flow</p><p class="P151">cross-build, cross-compile</p><p class="P151">development host</p><p class="P151">platform</p><p class="P151">card</p><p class="P151">slot</p><p class="P151">platform worker</p><p class="P151">device worker</p><p class="P151">platform configuration</p><p class="P151">HDL container</p><p class="P151">default container</p><p class="P151">interconnect</p><p class="P151">control plane</p><p class="P151">data plane</p><h1 class="P263"><a id="a_8_From_PPT_"><span>8</span></a><a id="__RefHeading__17676_2116501284"/>From PPT:</h1><p class="P26"></p><p class="P25">OpenCPI Platform Development Briefing </p><p class="P25">FPGA Platform Support in OpenCPI </p><p class="P25">OpenCPI applications are composed from components. </p><p class="P25"></p><p class="P25">Components are written and compiled for various platforms: </p><p class="P25">GPPs running C/C++-based software components </p><p class="P25">GPUs running OpenCL-based components </p><p class="P25">FPGAs (or FPGA simulators) running VHDL-based components </p><p class="P25"></p><p class="P25">When applications are executed, each component executes: </p><p class="P25">On a platform (e.g. Linux on x86_64, or Xilinx or Altera FPGA) </p><p class="P25">In a container (a runtime environment established on that platform) </p><p class="P25"></p><p class="P25">Three things must exist for an OpenCPI application to run: </p><p class="P25">Components must be written and built/compiled for platforms. </p><p class="P25">Applications must be specified as consisting of components </p><p class="P25">Platforms must be available and enabled to run containers </p><p class="P25"></p><p class="P25">This briefing describes how FPGA platforms are enabled and used </p><p class="P25">FPGA Platform Development in OpenCPI </p><p class="P25">We define an FPGA "platform" as a particular, single FPGA on some hardware (board). </p><p class="P25">If a board has multiple OpenCPI-usable FPGAs: </p><p class="P25">each is a platform. </p><p class="P25">each may host a container in which to execute components. </p><p class="P25"></p><p class="P25">Platforms are based on a particular type of FPGA chip: </p><p class="P25">E.g., a Xilinx ML605 development board has a Virtex6 FPGA: </p><p class="P25">xc6vlx240t, with a speed grade and a package </p><p class="P25"></p><p class="P25">Platforms are specific FPGAs connected locally to: </p><p class="P25">Local I/O devices: ADC, DAC, DRAM, Flash, G<span class="T123">b</span>E, etc. </p><p class="P25">Interconnects: PCI<span class="T123">e</span>, Ethernet, etc. to talk to other containers </p><p class="P25">Slots: FMC, HSMC, mezzanine card slots. </p><p class="P25">E.g., a Xilinx ML605 has PCI Express, DRAM, and 2 FMC slots. </p><p class="P25"></p><p class="P25">Platform FPGAs host containers in which components execute. </p><p class="P25">FPGA Platforms in OpenCPI </p><p class="P25">An FPGA with attached Interconnects, Devices, and Slots </p><p class="P25">Platform logic, Device/Interconnect Logic, Application Logic </p><p class="P25">ML605 Platform Example </p><p class="P25">The FPGA: Vendor: Xilinx, Family: Virtex6, Part: xc6vlx240t </p><p class="P25">Interconnect(s): PCI Express (and G<span class="T123">b</span>E - not supported yet) </p><p class="P25">Devices: DVI video output (not supported yet) </p><p class="P25">Slots: ISO/VITA 57.1 Slots: FMC-LPC and FMC-HPC </p><p class="P25">ZedBoard Platform Example </p><p class="P25">The FPGA: Vendor: Xilinx, Family: Zynq-7000, Part: xc7z020 </p><p class="P25">Interconnect(s): AXI (to ARM) (and G<span class="T123">b</span>E - not supported yet) </p><p class="P25">Devices: HDMI video output (not supported yet) </p><p class="P25">Slots: ISO/VITA 57.1 Slot: FMC-LPC </p><p class="P25">ALST4 Platform Example </p><p class="P25">The FPGA: Vendor: Altera, Family: Stratix4, Part: ep4sgx230 </p><p class="P25">Interconnect(s): PCI Express (and G<span class="T123">b</span>E - not supported yet) </p><p class="P25">Devices: HDMI video output (not supported yet) </p><p class="P25">Slots: Altera HSMC card slots (2) </p><p class="P25">Slots and Cards </p><p class="P25">Many FPGA platforms have slots/connectors for add-in cards. </p><p class="P25">E.g. FPGA Mezzanine Cards (ANSI/VITA FMC Standard 57.1) </p><p class="P25">E.g. HSMC (Altera's High Speed Mezzanine Card) </p><p class="P25"></p><p class="P25">OpenCPI defines Slot Types. </p><p class="P25">A slot type has pins, direction, and default signal names </p><p class="P25">Typically documented in the standard specification (e.g. ANSI/VITA 57.1) </p><p class="P25">Platforms specify what slots are present, of what types </p><p class="P25">Using the &lt;slot&gt; XML element in the HdlPlatform XML file. </p><p class="P25"></p><p class="P25">Separate from platforms, OpenCPI defines Cards </p><p class="P25">Cards have a slot type, and on-board devices </p><p class="P25">Cards specify wiring from devices to slot pins/signals. </p><p class="P25"></p><p class="P25">Cards are like platforms: they have devices </p><p class="P25">But no FPGAs, just devices connected to slot pins </p><p class="P25">FPGA Platform Development on OpenCPI </p><p class="P25">As consistent as possible with FPGA "application" development (OpenCPI sub-assemblies on FPGAs). </p><p class="P25"></p><p class="P25">Platform development involves the creation of specialized types of workers that enable the HDL platform. </p><p class="P25">Device Workers: like "device drivers" for specific FPGA-attached hardware devices  workers that talk to devices using ad hoc, device-specific signals and I/O pins. </p><p class="P25">Platform Workers: device workers with special responsibilities for enabling the whole platform. </p><p class="P25"></p><p class="P25">Two other modules are automatically generated based on XML specifications: </p><p class="P25">Platform Configurations </p><p class="P25">a pre-linked core combining a platform worker with some device workers </p><p class="P25">Containers: top-level bitstream designs </p><p class="P25">Deploying an application subassembly on a platform configuration. </p><p class="P25">Device Workers </p><p class="P25">Device Workers: like "device drivers" for specific FPGA-attached hardware. </p><p class="P25"></p><p class="P25">Device Workers are special workers that have ad-hoc signals to some device attached to the FPGA </p><p class="P25">Still are controlled by a normal "WCI" control interface. </p><p class="P25">Have data-plane interfaces to provide data to/from application workers. </p><p class="P25">Have ad-hoc signal connections to hardware </p><p class="P25">Designed to be portable </p><p class="P25">e.g. same DAC on different FPGAs, or on different cards </p><p class="P25">Designed to be replicated </p><p class="P25">E.g. multiple ADCs of the same type connected to one FPGA </p><p class="P25">Analogous to "device drivers" in software. </p><p class="P25">Platform Workers </p><p class="P25">Platform Workers are specialized Device Workers </p><p class="P25">Have ad-hoc signals to the platform hardware </p><p class="P25">Not for any individual device (that's what other device workers do) </p><p class="P25"></p><p class="P25">Perform standardized "platform enabling functions" </p><p class="P25">Provide control path from outside the FPGA (e.g. "register access") </p><p class="P25">Provide timekeeping services and clocks </p><p class="P25">Provide external access to bitstream metadata </p><p class="P25"></p><p class="P25">Standard control interface and properties </p><p class="P25">Platform name, fpga device, chip serial number </p><p class="P25">Switch settings (input), LEDs (output) </p><p class="P25">Bitstream UUID and metadata </p><p class="P25">Time-of-day, timekeeping/PPS status </p><p class="P25">Can have platform-specific properties/controls </p><p class="P25">E.g. PCI device ID assigned by BIOS for PCI-based platforms </p><p class="P25"></p><p class="P25"><span> </span></p><p class="P25">Platform Worker Ports </p><p class="P25">Control Interface (WCI), like any worker </p><p class="P25">Control operations and properties </p><p class="P25">But platform workers also bootstrap everything, including WCIs </p><p class="P25"></p><p class="P25">Data ports, when data producing/consuming devices cannot be optional (i.e. when they can't have their own device workers) </p><p class="P25">Rare, theoretical case </p><p class="P25"></p><p class="P25">Special "infrastructure" ports to provide key services </p><p class="P25">Time Service (provide platform timekeeping) </p><p class="P25">This port is required of all platform workers </p><p class="P25">Metadata Master (provide access to metadata via WCI properties) </p><p class="P25">This port is required of all platform workers </p><p class="P25">Control Plane Master (provide a control path into the device) </p><p class="P25">This port is optional, but must be provided by some device if not here </p><p class="P25">Data Plane NOC Master (for data connections) </p><p class="P25">Optional port, when platform supplies an interconnect path to the chip </p><p class="P25"></p><p class="P25"></p><p class="P25">Platform (Worker) Description XML </p><p class="P25">The &lt;HdlPlatform&gt; XML file defines a platform and its worker </p><p class="P25"></p><p class="P25">This file is used to define the platform worker </p><p class="P25">Uses the "platform_spec" OCS as its "spec" (in hdl/platforms/specs) </p><p class="P25">Defines ad-hoc platform signals </p><p class="P25">Defines any platform-specific properties </p><p class="P25">Defines any optional infrastructure ports (CP Master, NOC Master) </p><p class="P25"></p><p class="P25">This file also lists the available devices and slots on the platform </p><p class="P25">Each device is defined by its device worker </p><p class="P25">A device (and device worker) can be mentioned more than once </p><p class="P25">I.e. there might be multiple instances of a device on a platform </p><p class="P25">Each slot is named and has a type </p><p class="P25">Platform Configurations </p><p class="P25">Specifies one particular "configuration" of a platform </p><p class="P25"></p><p class="P25">Builds on the minimum base of support for the platform </p><p class="P25">Base support XML is the &lt;HdlPlatform&gt; XML file </p><p class="P25">Base support code is the platform worker code. </p><p class="P25"></p><p class="P25">The "configuration" of the platform consists of: </p><p class="P25">Which devices are supported and instanced in this configuration </p><p class="P25">Which device(s) provide control plane (if not the platform worker) </p><p class="P25"></p><p class="P25">A configuration may be constrained or optimized </p><p class="P25">Constraints to physically place/constrain device workers </p><p class="P25">Creates a platform configuration "core" to use for apps </p><p class="P25"></p><p class="P25">Analogous to "an OS kernel with built-in device drivers". </p><p class="P25">Does not preclude more devices added in container for the app </p><p class="P25">Platform Configuration Description XML </p><p class="P25">Is a &lt;HdlConfig&gt; XML document </p><p class="P25">Platform is implied when it is in a platform's directory </p><p class="P25">Otherwise use the "platform" attribute </p><p class="P25">Name is implied by the filename of the XML file </p><p class="P25">Otherwise use the "name" attribute </p><p class="P25"></p><p class="P25">Child elements under &lt;HdlConfig&gt; are &lt;device&gt; </p><p class="P25">Specifies which of the platform's devices are included (&lt;device /&gt;) </p><p class="P25">Device "Name" attribute matches some &lt;device&gt; in platform XML </p><p class="P25">"control" boolean attribute says whether a device provides a control path to the platform (when the platform worker doesn't do it). </p><p class="P25">Default is no devices at all: the base configuration </p><p class="P25"></p><p class="P25">No source code associated with Platform Configurations </p><p class="P25">All is generated </p><p class="P25"></p><p class="P25">Future: Specific constraints, Clock specs, Multiple control paths </p><p class="P25">Containers </p><p class="P25">A container deploys an application subassembly on a specific (FPGA) platform configuration. </p><p class="P25">To specify a container you specify: </p><p class="P25">The application assembly to be deployed </p><p class="P25">If container is specified in an assembly directory, that assembly is implied. </p><p class="P25">The platform configuration on which the assembly should run </p><p class="P25">If just the platform is specified, its base configuration is implied. </p><p class="P25">Top level connections </p><p class="P25">Application external ports to devices or interconnects </p><p class="P25">Special case: can connect devices to interconnects </p><p class="P25">Example XML </p><p class="P25">&lt;HdlContainer platform='ml606/ml605_flash_dac' assembly='modem'&gt;# &lt;connection external='in' interconnect='pcie'/&gt;# &lt;connection external='out' device='dac'/&gt;#&lt;/HdlContainer&gt; </p><p class="P25">I.e. deploy the "modem" assembly on the "ml605+flash+dac" configuration, with input from PCI<span class="T123">e</span> and output to DAC </p><p class="P25">No source code associated with Containers: all is generated </p><p class="P25"></p><p class="P25">Containers in HDL Assembly Makefiles </p><p class="P25">A Default Container is defined as: </p><p class="P25">All external ports of the assembly are connected to the interconnect </p><p class="P25">No device worker connections are made </p><p class="P25">E.g. PCI Express, or (future) ethernet </p><p class="P25">If no external ports, a standalone container is built (e.g. tb_bias) </p><p class="P25"></p><p class="P25">Two "make" variables specify the containers/bitstreams to build </p><p class="P25"></p><p class="P25">DefaultContainers= </p><p class="P25">If specified empty, no default containers are built </p><p class="P25">If not specified at all, default containers are built for "base" platform configurations for platforms requested in HdlPlatforms </p><p class="P25">If specified not empty, only those default containers are built </p><p class="P25">Containers=  specific XML-based containers </p><p class="P25">The names of HdlContainer xml files to build </p><p class="P25">Using specific platform configurations </p><p class="P25">Specifying external port connections to devices and interconnects </p><p class="P25">Example HDL Assembly Makefiles </p><p class="P25">Simplest assembly/bitstream Makefile is: </p><p class="P25">   include $(OCPI_CDK_DIR)/include/hdl/hdl-assembly.mk </p><p class="P25">The assembly XML is assumed to be in &lt;cwd&gt;.xml </p><p class="P25">Implies: build default containers for whatever platforms are requested </p><p class="P25">No specific containers are indicated </p><p class="P25">More complex example </p><p class="P25">   DefaultContainers=isim_pf ml605_flash </p><p class="P25">   Containers=ml605_ADC </p><p class="P25">   include $(OCPI_CDK_DIR)/include/hdl/hdl-assembly.mk </p><p class="P25">Build default container for base config of isim_pf and "flash" config of ml605 </p><p class="P25">Build a specific container as described in ml605_ADC.xml </p><p class="P25">Another Example </p><p class="P25">   DefaultContainers= </p><p class="P25">   Containers=ml605_ADC </p><p class="P25">   include $(OCPI_CDK_DIR)/include/hdl/hdl-assembly.mk </p><p class="P25">Build no default containers, only one in ml6065_ADC.xml </p><p class="P25">Clocks </p><p class="P25">The platform worker is responsible for producing two clocks, with no particular relationship: </p><p class="P25">The control plane clock </p><p class="P25">The timekeeping clock </p><p class="P25"></p><p class="P25">The control plane clock is used for: </p><p class="P25">All workers' control interfaces </p><p class="P25">All control plane infrastructure </p><p class="P25">Default clock for all other worker ports (data, time, etc). </p><p class="P25"></p><p class="P25">The timekeeping clock drives the timekeeping system </p><p class="P25">Should be the "best" (drift, PPM, etc.) clock available in the HW. </p><p class="P25">Is used to keep the notion of time of day, sync'd to PPS input </p><p class="P25">Provides "time of day" to any worker that wants it </p><p class="P25"></p><p class="P25">The platform may provide other clocks </p><p class="P25"></p><p class="P25"></p><p class="P25">Slots and Cards </p><p class="P25">Platforms have slots of certain types. </p><p class="P25">E.g. ML605s have one FMC_LPC slot and one FMC_HPC slot. </p><p class="P25">E.g. Zedboards have one FMC_LPC slot </p><p class="P25">A platform's slots are defined by: </p><p class="P25">type </p><p class="P25">non-default signal names for slot pins (different than the slot type spec) </p><p class="P25">Platform configurations may indicate specific cards in specific slots. </p><p class="P25">Containers may indicate or imply specific cards in specific slots </p><p class="P25"></p><p class="P25">Cards have devices just like platforms have devices. </p><p class="P25">When a device is used, its device worker is instantiated and connected. </p><p class="P25">Some devices on a card can remain unused and not instantiated </p><p class="P25"></p><p class="P25">Subdevices and sharing I/Os </p><p class="P25">Device workers support hardware that performs a logical function. </p><p class="P25">I.e. a function an application may request </p><p class="P25"></p><p class="P25">Device workers should not control multiple functions </p><p class="P25">Which would force logic to be present when functions are not used. </p><p class="P25"></p><p class="P25">Just because a device might have 2 functions (e.g. ADC+DAC), does not mean one device worker should control both functions. </p><p class="P25"></p><p class="P25">Modular devices workers are good, but raise problems: </p><p class="P25">Some hardware is shared between functions </p><p class="P25">E.g. one SPI or I2C to configure multiple functions. </p><p class="P25"></p><p class="P25">Solution is subdevices: </p><p class="P25">They implement a shared module used by multiple device workers. </p><p class="P25">Present and needed when any of the device workers are present. </p><p class="P25">Instantiated and connected automatically as needed. </p><p class="P25">Subdevices </p><p class="P25">A subdevice is generally a device worker with no WCI </p><p class="P25">It "serves" multiple actual device workers. </p><p class="P25">Built like a normal device worker. </p><p class="P25"></p><p class="P25">It has the signals for external pins that must be shared between its "client" device workers. </p><p class="P25">E.g. it would control SPI pins that its device workers need to share. </p><p class="P25"></p><p class="P25">It defines worker ports that are connected to its clients. </p><p class="P25">They must be optional since not all clients may be present </p><p class="P25">They may be a "devsignals" ports when the signals are custom. </p><p class="P25">They may be "rawprop" ports when the subdevice supports sharing of a lower level access path (e.g. SPI or I2C) to hardware-based properties. </p><p class="P25"></p><p class="P25">Client device workers declare their requirements for subdevices </p><p class="P25">And how they are connected to them </p><p class="P25"></p><p class="P25"></p><p class="P25">Subdevices: example </p><p class="P25">The shared module for Lime chip SPI and clocking options: </p><p class="P25">&lt;HdlDevice language="vhdl"&gt; </p><p class="P25"> &lt;ComponentSpec nocontrol='true'/&gt; </p><p class="P25"> &lt;rawprop name='props' count='2' optional='1'/&gt; </p><p class="P25"> &lt;devsignals count='2' optional='1' signals='lime-spi-signals'/&gt; </p><p class="P25"> &lt;Signal Output="reset"/&gt; </p><p class="P25"> &lt;Signal Input="sdo"/&gt; </p><p class="P25"> &lt;Signal Output="sclk"/&gt; </p><p class="P25"> &lt;Signal Output="sen"/&gt; </p><p class="P25"> &lt;Signal Output="sdio"/&gt; </p><p class="P25"> &lt;Signal Input="rx_clk_in"/&gt; &lt;!-- could be rx_clk_out from lime --&gt; </p><p class="P25"> &lt;Signal Input="tx_clk_in"/&gt; </p><p class="P25">&lt;/HdlDevice&gt; </p><p class="P25">Note: no real component spec. Completely custom w/ no control </p><p class="P25">Note: rawprop slave is x2 to be ready for lime_rx and lime_tx </p><p class="P25">Note: devsignals slave is x2 to be ready for lime_rx and lime_tx </p><p class="P25">Note: both are optional since parts may not be connected </p><p class="P25">Note: devsignals port has a custom set of signals for this worker </p><p class="P25">Defined in the file lime-spi-signals in the specs directory </p><p class="P25"></p><p class="P25">Subdevices: example: the client devices </p><p class="P25">The OWD for the lime_tx device worker: </p><p class="P25">&lt;HdlDevice language="vhdl" FirstRawProperty="dc_regval" spec='qdac-spec'&gt; </p><p class="P25"> &lt;property name='Present' type='uchar' volatile='true'/&gt; </p><p class="P25"> &lt;property name='ClkMode' type='uchar' parameter='true' default='0'/&gt; </p><p class="P25"> &lt;xi:include href='lime-properties.xml'/&gt; </p><p class="P25"> &lt;StreamInterface Name="in" DataWidth="32"/&gt; </p><p class="P25"> &lt;rawprop name='rawprops' master='true'/&gt; </p><p class="P25"> &lt;requires worker='lime_spi'&gt; </p><p class="P25">  &lt;connect port="rawprops" to="props" index='1'/&gt; </p><p class="P25">  &lt;connect port="dev" to='dev' index='1'/&gt; </p><p class="P25"> &lt;/requires&gt; </p><p class="P25"> &lt;Signal Output="tx_clk"/&gt; </p><p class="P25"> &lt;Signal Output="txen"/&gt; </p><p class="P25"> &lt;Signal Output="tx_iq_sel"/&gt; </p><p class="P25"> &lt;Signal Output="txd" width="12"/&gt; </p><p class="P25">&lt;/HdlDevice&gt; </p><p class="P25"></p><p class="P25">Note: rawprop and devsignals ports are for subdevice connection(s) </p><p class="P25">Note: explicit declaration that this worker REQUIRES the subdevice </p><p class="P25">and connects to "index 1" (for tx) of the subdevice. </p><p class="P25">Note: this device worker still has direct signals to the device </p><p class="P25">Note: this device worker actually declares the same properties as rx. </p><p class="P25">Subdevices: custom signals in worker ports </p><p class="P25">What needs to be shared may have custom signals </p><p class="P25">&lt;devsignals master='true' signals='lime-spi-signals'/&gt; </p><p class="P25">The "devsignals" port type is for this purpose. </p><p class="P25">The "signals" attribute is the file full of signal declarations </p><p class="P25">Allows different workers and subdevices to use the same list of signals. </p><p class="P25">The direction of signals is relative to the "master" </p><p class="P25">The "signals" file for the "devsignals" port for lime_spi: </p><p class="P25">&lt;signals&gt; </p><p class="P25"> &lt;signal input='rx_clk_in'/&gt; &lt;!- might be used by either side --&gt; </p><p class="P25"> &lt;signal input='tx_clk_in'/&gt; &lt;!- might be used by either side --&gt; </p><p class="P25"> &lt;!-- To let each side know whether they are both present --&gt; </p><p class="P25"> &lt;signal input='rx_present'/&gt; </p><p class="P25"> &lt;signal input='tx_present'/&gt; </p><p class="P25">&lt;/signals&gt; </p><p class="P25"></p><p class="P25">Note: a way to tell each client whether the other is present </p><p class="P25">Note: this is separate from the "rawprop" port, which is a standard port type for device workers (not application workers). </p><p class="P25">Note: this is just a bundle of signals that fans out to all clients. </p><p class="P25">FPGA Architecture </p><p class="P25">Devices and Subdevices: Example </p><p class="P25">Build flow (bottom to top) </p></body></html>
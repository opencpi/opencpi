%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% this file was generated by docGen.py
% this file is intended to be edited
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section*{Summary - \Comp}
% Make table whose width is equal to which will be used for text
% wrapping, split into 2 equal columns
\begin{longtable}{|p{\dimexpr0.5\textwidth-2\tabcolsep\relax}
                  |p{\dimexpr0.5\textwidth-2\tabcolsep\relax}|}
  \hline
  \rowcolor{blue}
  & \\
  \hline
  Name              & \comp \\
  \hline
  Latest Version    &  \docVersion (release date 7/2019) \\
  \hline
	Worker Type       & Application                              \\
  \hline
	Component Library & ocpi.assets.dsp\_comps                    \\
  \hline
	Workers           & \comp.rcc                                \\
  \hline
	Tested Platforms  & centos7, xilinx13\_3, xilinx13\_4 \\
  \hline
\end{longtable}

\begin{center}
  \textit{\textbf{Revision History}}
\end{center}
\begin{longtable}{|p{\dimexpr0.15\textwidth-2\tabcolsep\relax}
                  |p{\dimexpr0.65\textwidth-2\tabcolsep\relax}
                  |p{\dimexpr0.2\textwidth-2\tabcolsep\relax}|}
  \hline
  \rowcolor{blue}
  \textbf{Revision} & \textbf{Description of Change} & \textbf{Date} \\
  \hline
  v1.0 & Initial release. & 2/2016 \\
  % If you look through the git history, this file appears to have undergone a
  % 'git mv' such that it was associated with an entirely different component,
  % and then another 'git mv' to revert back. These moves occurred before 1.1 and
  % after 1.3 releases, so it appears that this datasheet for real digitizer
  % didn't even exist for releases 1.1, 1.2, and 1.3.
  \hline
  v1.4 & Updated formatting, block diagram, and performance and resource utilization. Updated source dependencies to reflect new assets project directory name. & 9/2018 \\
  \hline
  v1.5 & Added \verb+enable_printing+ and \verb+sync_criteria_met+ properties to \comp{}.rcc. Also added functional diagram and xilinx13\_4 as a tested platform. & 4/2019 \\
  \hline
  v1.6 & Converted \comp{}.rcc from C to C++.  Added the \verb+sync_pattern+ property to \comp{}.rcc. Added 8, 16, 32 and 64 bit modes. Removed rstream\_protocol on output port which is handled in the default 16 bit mode.  Endianness byte swapping occurs for 16, 32 and 64 bit modes but not for the 8 bit mode. & 7/2019 \\
  \hline
\end{longtable}

%\section*{Functionality}
%\begin{flushleft}
%\end{flushleft}

\section*{Worker Implementation Details}
\subsection*{\comp.rcc}
This worker performs symbol decisions by decoding signed real Q0.15 symbols into bits. Each positive symbol is decoded to a 1 and each negative symbol is decoded into a 0.
Once the sync criteria is met, the decoded bits are packed into 16-bit words which are subsequently sent to the output port.
The sync criteria is met when a) the \verb+need_sync+ property has a value of false, or b) the first 0xFACE sequence occurs in the decoded bits. When the first 0xFACE sequence occurs in the decoded bits and the \verb+enable_printing+ is true, the following is printed to stdout:
\lstset{language=bash, backgroundcolor=\color{lightgray}, columns=flexible,
        breaklines=true, prebreak=\textbackslash, basicstyle=\ttfamily,
        showstringspaces=false,upquote=true, aboveskip=\baselineskip,
        belowskip=\baselineskip}
\begin{lstlisting}
sync pattern 0xFACE found
\end{lstlisting}

%\section*{Theory}
%\begin{flushleft}
%\end{flushleft}

\section*{Block Diagrams}
\subsection*{Top level}
\begin{center}
	\begin{tikzpicture}[% List of styles applied to all, to override specify on a case-by-case
			every node/.style={
				align=center,  		% use this so that the "\\" for line break works
				minimum size=2cm	% creates space above and below text in rectangle
			},
			every edge/.style={draw,thick}
		]
		\node[rectangle,ultra thick,draw=black,fill=blue](R2){\Comp};
		\node[rectangle,draw=white,fill=white](R3)[left= of R2]{``in'' \\ Signed real symbols (Q0.15)};
		\node[rectangle,draw=white,fill=white](R4)[right= of R2]{``out'' \\ Decoded bits packed into 16-bit words};
		\node[rectangle,draw=white,fill=white](R5)[above= of R2]{\verb+sync_pattern+, \\ \verb+need_sync+, \\ \verb+enable_printing+, \\ \verb+sync_criteria_met+};
		\path[->]
		(R3)edge []	node [] {} (R2)
		(R2)edge []	node [] {} (R4)
		(R2)edge []	node [] {} (R5)
		(R5)edge []	node [] {} (R2)
		;
	\end{tikzpicture}
  \captionof{figure}{\comp{}.rcc Worker Diagram}
\end{center}

\begin{center}
  \begin{figure}[h]
    \centering\captionsetup{type=figure}\includegraphics[scale=0.14]{Real_Digitizer_Diagram}
    \captionof{figure}{\comp{}.rcc Functional Diagram}
    \label{fig:blockdiagram}
  \end{figure}
\end{center}\pagebreak

%\subsection*{State Machine}
%\begin{flushleft}
%\end{flushleft}

\section*{Source Dependencies}
\subsection*{\comp.rcc}
\begin{itemize}
	\item projects/assets/components/dsp\_comps/\comp.rcc/\comp.cc
\end{itemize}
%\subsection*{\comp.hdl}

\begin{landscape}
  \input{component_spec_properties.inc} % it is recommended to NOT remove this line

  \input{worker_properties.inc} % it is recommended to NOT remove this line

  \input{component_ports.inc} % it is recommended to NOT remove this line

  \input{worker_interfaces.inc} % it is recommended to NOT remove this line
\end{landscape}

%\section*{Control Timing and Signals}
%%\subsection*{\comp.hdl}
%\begin{flushleft}
%\end{flushleft}

%\section*{Performance and Resource Utilization}
%%\subsubsection*{\comp.rcc}
%%\subsubsection*{\comp.hdl}

\section*{Test and Verification}
\normalsize
No unit test currently exists for this worker.
